/**
 * CXP Portal client for Android and iOS webviews - Copyright Â© 2016 Backbase B.V - All Rights Reserved
 * Version 6.0.0
 * http://www.backbase.com
 */
!function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[s]={exports:{}};t[s][0].call(u.exports,function(e){var r=t[s][1][e];return i(r?r:e)},u,u.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){"use strict";function n(e){if("undefined"==typeof e||null===e)return e;if(Array.isArray(e))return e.slice();if("object"==typeof e){var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),t}return e}function i(){var e={},t=Error.stackTraceLimit,r=Error.prepareStackTrace;return Error.stackTraceLimit=3,Error.prepareStackTrace=function(t,r){var n=r[2];e.file=n.getFileName(),e.line=n.getLineNumber();var i=n.getFunctionName();i&&(e.func=i)},Error.stackTraceLimit=t,Error.prepareStackTrace=r,e}function o(e,t){t||(t="    ");var r=e.split(/\r?\n/g);return t+r.join("\n"+t)}function s(e,t){if(t){if(y[t])return;y[t]=!0}console.error(e+"\n")}function a(e){return y[e]}function l(){}function c(){}function u(e){var t="string"==typeof e?S[e.toLowerCase()]:e;return t}function p(e,t,r){if(!(this instanceof p))return new p(e,t);var i;if(void 0!==t&&(i=e,e=t,!(i instanceof p)))throw new TypeError("invalid Logger creation: do not pass a second arg");if(!e)throw new TypeError("options (object) is required");if(i){if(e.name)throw new TypeError("invalid options.name: child cannot set logger name")}else if(!e.name)throw new TypeError("options.name (string) is required");if(e.stream&&e.streams)throw new TypeError('cannot mix "streams" and "stream" options');if(e.streams&&!Array.isArray(e.streams))throw new TypeError("invalid options.streams: must be an array");if(e.serializers&&("object"!=typeof e.serializers||Array.isArray(e.serializers)))throw new TypeError("invalid options.serializers: must be an object");var o,s,a;if(i&&r){this._isSimpleChild=!0,this._level=i._level,this.streams=i.streams,this.serializers=i.serializers,this.src=i.src,o=this.fields={};var c=Object.keys(i.fields);for(a=0;a<c.length;a++)s=c[a],o[s]=i.fields[s];var u=Object.keys(e);for(a=0;a<u.length;a++)s=u[a],o[s]=e[s]}else{var h=this;if(i){for(this._level=i._level,this.streams=[],a=0;a<i.streams.length;a++){var f=n(i.streams[a]);f.closeOnExit=!1,this.streams.push(f)}this.serializers=n(i.serializers),this.src=i.src,this.fields=n(i.fields),e.level&&this.level(e.level)}else this._level=Number.POSITIVE_INFINITY,this.streams=[],this.serializers=null,this.src=!1,this.fields={};e.stream?h.addStream({type:"stream",stream:e.stream,closeOnExit:!1,level:e.level}):e.streams?e.streams.forEach(function(t){h.addStream(t,e.level)}):i&&e.level?this.level(e.level):i||h.addStream({type:"raw",stream:new l,closeOnExit:!1,level:e.level}),e.serializers&&h.addSerializers(e.serializers),e.src&&(this.src=!0),o=n(e),delete o.stream,delete o.level,delete o.streams,delete o.serializers,delete o.src,this.serializers&&this._applySerializers(o),Object.keys(o).forEach(function(e){h.fields[e]=o[e]})}}function h(e){return function(){function t(t){var s;t[0]instanceof Error?(o={err:r.serializers&&r.serializers.err?r.serializers.err(t[0]):p.stdSerializers.err(t[0])},s={err:!0},l=1===t.length?[o.err.message]:Array.prototype.slice.call(t,1)):"object"!=typeof t[0]&&null!==t[0]||Array.isArray(t[0])?(o=null,l=Array.prototype.slice.call(t)):(o=t[0],l=Array.prototype.slice.call(t,1));var a=n(r.fields);a.level=e;var c=o?n(o):null;return c&&(r.serializers&&r._applySerializers(c,s),Object.keys(c).forEach(function(e){a[e]=c[e]})),a.levelName=k[e],a.msg=v.apply(r,l),a.time||(a.time=new Date),r.src&&!a.src&&(a.src=i()),a.v=m,a}var r=this,o=null,l=arguments,c=null;if(this._emit)return 0===arguments.length?this._level<=e:void(this._level>e||(c=t(l),this._emit(c)));var u="unbound";if(!a[u]){var h=i();s(v("bunyan usage error: %s:%s: attempt to log with an unbound log method: `this` is: %s",h.file,h.line,this.toString()),u)}}}function f(e){var t=e.stack||e.toString();if(e.cause&&"function"==typeof e.cause){var r=e.cause();r&&(t+="\nCaused by: "+f(r))}return t}function d(){var e=[];return function(t,r){return r&&"object"==typeof r?-1!==e.indexOf(r)?"[Circular]":(e.push(r),r):r}}var g="0.2.3",m=0,v=function(e){if(null===e)return"null";if("string"!=typeof e)return e.toString();for(var t=/%[sdj%]/g,r=1,n=arguments,i=n.length,o=String(e).replace(t,function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}break;default:return e}}),s=n[r];i>r;s=n[++r])o+=" "+s;return o},y={};l.prototype.write=function(e){e.level<x?console.log(e):e.level<_?console.info(e):e.level<E?console.warn(e):console.error(e),e.err&&e.err.stack&&console.error(e.err.stack)},c.prototype.write=function(e){function t(e,t){return Array(t+1-(e+"").length).join("0")+e}var r,n="color: DimGray",i="color: SteelBlue";r=e.level<w?"color: DeepPink":e.level<x?"color: GoldenRod":e.level<_?"color: DarkTurquoise":e.level<E?"color: Purple":e.level<P?"color: Crimson":"color: Black";var o=e.childName?e.name+"/"+e.childName:e.name,s=k[e.level].toUpperCase();s=Array(6-s.length).join(" ")+s,console.log("[%s:%s:%s:%s] %c%s%c: %s: %c%s",t(e.time.getHours(),2),t(e.time.getMinutes(),2),t(e.time.getSeconds(),2),t(e.time.getMilliseconds(),4),r,s,n,o,i,e.msg),e.err&&e.err.stack&&console.log("%c%s,",r,e.err.stack)};var b=10,w=20,x=30,_=40,E=50,P=60,S={trace:b,debug:w,info:x,warn:_,error:E,fatal:P},k={};Object.keys(S).forEach(function(e){k[S[e]]=e}),p.prototype.addStream=function(e,t){var r=this;switch(null!==t&&void 0!==t||(t=x),e=n(e),!e.type&&e.stream&&(e.type="raw"),e.raw="raw"===e.type,e.level?e.level=u(e.level):e.level=u(t),e.level<r._level&&(r._level=e.level),e.type){case"stream":e.closeOnExit||(e.closeOnExit=!1);break;case"raw":e.closeOnExit||(e.closeOnExit=!1);break;default:throw new TypeError('unknown stream type "'+e.type+'"')}r.streams.push(e),delete r.haveNonRawStreams},p.prototype.addSerializers=function(e){var t=this;t.serializers||(t.serializers={}),Object.keys(e).forEach(function(r){var n=e[r];if("function"!=typeof n)throw new TypeError(v('invalid serializer for "%s" field: must be a function',r));t.serializers[r]=n})},p.prototype.child=function(e,t){return new this.constructor(this,e||{},t)},p.prototype.level=function(e){if(void 0===e)return this._level;for(var t=u(e),r=this.streams.length,n=0;r>n;n++)this.streams[n].level=t;this._level=t},p.prototype.levels=function(e,t){if(void 0===e)return this.streams.map(function(e){return e.level});var r;if("number"==typeof e){if(r=this.streams[e],void 0===r)throw new Error("invalid stream index: "+e)}else{for(var n=this.streams.length,i=0;n>i;i++){var o=this.streams[i];if(o.name===e){r=o;break}}if(!r)throw new Error(v('no stream with name "%s"',e))}if(void 0===t)return r.level;var s=u(t);r.level=s,s<this._level&&(this._level=s)},p.prototype._applySerializers=function(e,t){var r=this;Object.keys(this.serializers).forEach(function(n){if(!(void 0===e[n]||t&&t[n]))try{e[n]=r.serializers[n](e[n])}catch(i){s(v('bunyan: ERROR: Exception thrown from the "%s" Bunyan serializer. This should never happen. This is a bugin that serializer function.\n%s',n,i.stack||i)),e[n]=v('(Error in Bunyan log "%s" serializer broke field. See stderr for details.)',n)}})},p.prototype._emit=function(e,t){var r;if(void 0===this.haveNonRawStreams)for(this.haveNonRawStreams=!1,r=0;r<this.streams.length;r++)if(!this.streams[r].raw){this.haveNonRawStreams=!0;break}var n;if(t||this.haveNonRawStreams)try{n=JSON.stringify(e,d())+"\n"}catch(i){var a=i.stack.split(/\n/g,2).join("\n");s('bunyan: ERROR: Exception in `JSON.stringify(rec)`. You can install the "safe-json-stringify" module to have Bunyan fallback to safer stringification. Record:\n'+o(v("%s\n%s",e,i.stack)),a),n=v("(Exception in JSON.stringify(rec): %j. See stderr for details.)\n",i.message)}if(t)return n;var l=e.level;for(r=0;r<this.streams.length;r++){var c=this.streams[r];c.level<=l&&c.stream.write(c.raw?e:n)}return n},p.prototype.trace=h(b),p.prototype.debug=h(w),p.prototype.info=h(x),p.prototype.warn=h(_),p.prototype.error=h(E),p.prototype.fatal=h(P),p.stdSerializers={},p.stdSerializers.err=function(e){if(!e||!e.stack)return e;var t={message:e.message,name:e.name,stack:f(e),code:e.code,signal:e.signal};return t},t.exports=p,t.exports.TRACE=b,t.exports.DEBUG=w,t.exports.INFO=x,t.exports.WARN=_,t.exports.ERROR=E,t.exports.FATAL=P,t.exports.resolveLevel=u,t.exports.levelFromName=S,t.exports.nameFromLevel=k,t.exports.VERSION=g,t.exports.LOG_VERSION=m,t.exports.createLogger=function(e){return new p(e)},t.exports.safeCycles=d,t.exports.ConsoleFormattedStream=c,t.exports.ConsoleRawStream=l},{}],2:[function(e,t,r){t.exports=function(){"use strict";function e(e,t,r){s.value=r,a(e,t,s),s.value=null}function t(t,r,n){var i;c.call(t,r)?i=t[r]:e(t,r,i=[]),l.call(i,n)<0&&i.push(n)}function r(e,t,r){var n,i,o;if(c.call(e,t))for(r.target=e,n=e[t].slice(0),o=0;o<n.length;o++)i=n[o],"function"==typeof i?i.call(e,r):"function"==typeof i.handleEvent&&i.handleEvent(r)}function n(e,t,r){var n,i;c.call(e,t)&&(n=e[t],i=l.call(n,r),i>-1&&(n.splice(i,1),n.length||delete e[t]))}var i="@@",o={},s={configurable:!0,value:null},a=Object.defineProperty||function(e,t,r){e[t]=r.value},l=[].indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},c=o.hasOwnProperty;return e(o,"addEventListener",function(e,r){t(this,i+e,r)}),e(o,"dispatchEvent",function(e){r(this,i+e.type,e)}),e(o,"removeEventListener",function(e,t){n(this,i+e,t)}),o}()},{}],3:[function(e,t,r){"use strict";var n=e("handlebars/dist/handlebars.min");t.exports={range:function(e,t,r){var i="";e=parseInt(e),t=parseInt(t);var o;r.data&&(o=n.createFrame(r.data));for(var s=e;t>=s;s++)o&&(o.index=s),i+=r.fn({from:e,to:t},{data:o});return i},withPreference:function(e,t){if(this.preferences){var r=this.preferences.filter(function(t){return t.name===e})[0];return t.fn(r)}},getPreferenceValue:function(e){if(this.preferences){var t=this.preferences.filter(function(t){return t.name===e})[0];return t?t.value:null}return null},add:function(e,t){return Math.floor(parseFloat(e)+parseFloat(t))},subtract:function(e,t){return Math.floor(parseFloat(e)-parseFloat(t))},multiply:function(e,t){return Math.floor(parseFloat(e)*parseFloat(t))},divide:function(e,t){return Math.floor(parseFloat(e)/parseFloat(t))},mod:function(e,t){return Math.floor(parseFloat(e)%parseFloat(t))},equal:function(e,t){return e===t},hasViewHint:function(){for(var e=Array.prototype.slice.call(arguments),t=e[e.length-1],r=e.slice(0,e.length-1),n=0;n<r.length;n++)if(this.viewhints&&this.viewhints.indexOf(r[n])>=0)return t.fn(this);return t.inverse(this)},getViewHint:function(e){var t={designmode:["designModeOnly"],role:["admin","manager","user","none"],input:["text-input","checkbox","select-one"],order:[]};if(!this.viewhints||!this.viewhints.length||!t[e])return null;var r=this.viewhints.filter(function(r){return-1!==t[e].indexOf(r)||r.slice(0,e.length)===e})[0];if(r&&"order"===e){var n=r.split("-");n=2===n.length?n[1]:null;var i=parseFloat(n);isNaN(i)||(n=i),r=n}return r=r||("input"===e?"text-input":null),"designmode"===e&&(r=!!r),r},or:function(){return Array.prototype.slice.call(arguments,0,arguments.length-1).some(function(e){return!!e})},and:function(){return Array.prototype.slice.call(arguments,0,arguments.length-1).every(function(e){return!!e})},not:function(e){return!e},getConfig:function(e,t){var r=t.data;return r.cxpConfig?r.cxpConfig[e]:void 0},allowViewmode:function(e,t){var r="none",n=this.viewmodes||[],i=e.toLowerCase(),o=n[0]||r,s=!1,a=i!==r&&o!==r&&n.indexOf(i)>-1&&i!==o;if(a){var l=[["windowed","maximized"],["windowed","minimized"],["windowed","fullscreen"],["maximized","minimized"],["maximized","fullscreen"]];s=l.some(function(e){return e.indexOf(i)>-1&&e.indexOf(o)>-1})}return a&&s?t.fn(this):t.inverse(this)},hasViewmode:function(e,t){var r=this.viewmodes||[],n=e?e.toLowerCase():"";return r.indexOf(n)>-1?t.fn(this):t.inverse(this)},currentViewmode:function(){return this.viewmodes&&this.viewmodes.length?this.viewmodes[0]:"none"},allowEdit:function(e){if(!this.preferences||this.preferences.length<=0)return e.inverse(this);var t=this.preferences.some(function(e){return e.viewhints&&e.viewhints.length>0});return t?e.fn(this):e.inverse(this)}}},{"handlebars/dist/handlebars.min":27}],4:[function(e,t,r){"use strict";e("./lib/locales"),r=t.exports=e("./lib/handlebars-intl")},{"./lib/handlebars-intl":6,"./lib/locales":124}],5:[function(e,t,r){"use strict";r["default"]={locale:"en",pluralRuleFunction:function(e,t){var r=String(e).split("."),n=!r[1],i=Number(r[0])==e,o=i&&r[0].slice(-1),s=i&&r[0].slice(-2);return t?1==o&&11!=s?"one":2==o&&12!=s?"two":3==o&&13!=s?"few":"other":1==e&&n?"one":"other"},fields:{year:{displayName:"Year",relative:{0:"this year",1:"next year","-1":"last year"},relativeTime:{future:{one:"in {0} year",other:"in {0} years"},past:{one:"{0} year ago",other:"{0} years ago"}}},month:{displayName:"Month",relative:{0:"this month",1:"next month","-1":"last month"},relativeTime:{future:{one:"in {0} month",other:"in {0} months"},past:{one:"{0} month ago",other:"{0} months ago"}}},day:{displayName:"Day",relative:{0:"today",1:"tomorrow","-1":"yesterday"},relativeTime:{future:{one:"in {0} day",other:"in {0} days"},past:{one:"{0} day ago",other:"{0} days ago"}}},hour:{displayName:"Hour",relativeTime:{future:{one:"in {0} hour",other:"in {0} hours"},past:{one:"{0} hour ago",other:"{0} hours ago"}}},minute:{displayName:"Minute",relativeTime:{future:{one:"in {0} minute",other:"in {0} minutes"},past:{one:"{0} minute ago",other:"{0} minutes ago"}}},second:{displayName:"Second",relative:{0:"now"},relativeTime:{future:{one:"in {0} second",other:"in {0} seconds"},past:{one:"{0} second ago",other:"{0} seconds ago"}}}}}},{}],6:[function(e,t,r){"use strict";function n(e){i["default"].__addLocaleData(e),o["default"].__addLocaleData(e)}r.__addLocaleData=n;var i=e("intl-messageformat"),o=e("intl-relativeformat"),s=e("./helpers.js"),a=e("./en.js");n(a["default"]),r.registerWith=s.registerWith},{"./en.js":5,"./helpers.js":7,"intl-messageformat":12,"intl-relativeformat":21}],7:[function(e,t,r){"use strict";function n(e){function t(e,t){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("{{"+e+"}} is deprecated, use: {{"+t.name+"}}"),t.apply(this,arguments)}}function r(e){if(!e.fn)throw new Error("{{#intl}} must be invoked as a block helper");var t=b(e.data),r=a.extend({},t.intl,e.hash);return t.intl=r,e.fn(this,{data:t})}function n(e,t){var r,n,i,o=t.data&&t.data.intl,s=e.split(".");try{for(i=0,n=s.length;n>i;i++)r=o=o[s[i]]}finally{if(void 0===r)throw new ReferenceError("Could not find Intl object: "+e)}return r}function i(e,t,r){e=new Date(e),g(e,"A date or timestamp must be provided to {{formatDate}}"),r||(r=t,t=null);var n=r.data.intl&&r.data.intl.locales,i=v("date",t,r);return c(n,i).format(e)}function o(e,t,r){e=new Date(e),g(e,"A date or timestamp must be provided to {{formatTime}}"),r||(r=t,t=null);var n=r.data.intl&&r.data.intl.locales,i=v("time",t,r);return c(n,i).format(e)}function s(e,t,r){e=new Date(e),g(e,"A date or timestamp must be provided to {{formatRelative}}"),r||(r=t,t=null);var n=r.data.intl&&r.data.intl.locales,i=v("relative",t,r),o=r.hash.now;return delete i.now,p(n,i).format(e,{now:o})}function h(e,t,r){m(e,"A number must be provided to {{formatNumber}}"),r||(r=t,t=null);var n=r.data.intl&&r.data.intl.locales,i=v("number",t,r);return l(n,i).format(e)}function f(e,t){t||(t=e,e=null);var r=t.hash;if(!e&&"string"!=typeof e&&!r.intlName)throw new ReferenceError("{{formatMessage}} must be provided a message or intlName");var i=t.data.intl||{},o=i.locales,s=i.formats;return!e&&r.intlName&&(e=n(r.intlName,t)),"function"==typeof e?e(r):("string"==typeof e&&(e=u(e,o,s)),e.format(r))}function d(){var e,t,r=[].slice.call(arguments).pop(),n=r.hash;for(e in n)n.hasOwnProperty(e)&&(t=n[e],"string"==typeof t&&(n[e]=w(t)));return new y(String(f.apply(this,arguments)))}function g(e,t){if(!isFinite(e))throw new TypeError(t)}function m(e,t){if("number"!=typeof e)throw new TypeError(t)}function v(e,t,r){var i,o=r.hash;return t?("string"==typeof t&&(i=n("formats."+e+"."+t,r)),i=a.extend({},i,o)):i=o,i}var y=e.SafeString,b=e.createFrame,w=e.Utils.escapeExpression,x={intl:r,intlGet:n,formatDate:i,formatTime:o,formatRelative:s,formatNumber:h,formatMessage:f,formatHTMLMessage:d,intlDate:t("intlDate",i),intlTime:t("intlTime",o),intlNumber:t("intlNumber",h),intlMessage:t("intlMessage",f),intlHTMLMessage:t("intlHTMLMessage",d)};for(var _ in x)x.hasOwnProperty(_)&&e.registerHelper(_,x[_])}var i=e("intl-messageformat"),o=e("intl-relativeformat"),s=e("intl-format-cache"),a=e("./utils.js"),l=s["default"](Intl.NumberFormat),c=s["default"](Intl.DateTimeFormat),u=s["default"](i["default"]),p=s["default"](o["default"]);r.registerWith=n},{"./utils.js":8,"intl-format-cache":9,"intl-messageformat":12,"intl-relativeformat":21}],8:[function(e,t,r){"use strict";function n(e){var t,r,n,i,o=Array.prototype.slice.call(arguments,1);for(t=0,r=o.length;r>t;t+=1)if(n=o[t])for(i in n)n.hasOwnProperty(i)&&(e[i]=n[i]);return e}r.extend=n},{}],9:[function(e,t,r){"use strict";r=t.exports=e("./lib/memoizer")["default"],r["default"]=r},{"./lib/memoizer":11}],10:[function(e,t,r){"use strict";var n=Function.prototype.bind||function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,n=function(){},i=function(){return r.apply(this instanceof n?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(n.prototype=this.prototype),i.prototype=new n,i},i=Object.prototype.hasOwnProperty,o=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),s=(!o&&!Object.prototype.__defineGetter__,o?Object.defineProperty:function(e,t,r){"get"in r&&e.__defineGetter__?e.__defineGetter__(t,r.get):(!i.call(e,t)||"value"in r)&&(e[t]=r.value)}),a=Object.create||function(e,t){function r(){}var n,o;r.prototype=e,n=new r;for(o in t)i.call(t,o)&&s(n,o,t[o]);return n};r.bind=n,r.defineProperty=s,r.objCreate=a},{}],11:[function(e,t,r){"use strict";function n(e){var t=s.objCreate(null);return function(){var r=Array.prototype.slice.call(arguments),n=i(r),o=n&&t[n];return o||(o=new(s.bind.apply(e,[null].concat(r))),n&&(t[n]=o)),o}}function i(e){if("undefined"!=typeof JSON){var t,r,n,i=[];for(t=0,r=e.length;r>t;t+=1)n=e[t],n&&"object"==typeof n?i.push(o(n)):i.push(n);return JSON.stringify(i)}}function o(e){var t,r,n,i,o=[],s=[];for(t in e)e.hasOwnProperty(t)&&s.push(t);var a=s.sort();for(r=0,n=a.length;n>r;r+=1)t=a[r],i={},i[t]=e[t],o[r]=i;return o}var s=e("./es5");r["default"]=n},{"./es5":10}],12:[function(e,t,r){"use strict";var n=e("./lib/main")["default"];e("./lib/locales"),r=t.exports=n,r["default"]=r},{"./lib/locales":124,"./lib/main":17}],13:[function(e,t,r){"use strict";function n(e,t,r){this.locales=e,this.formats=t,this.pluralFn=r}function i(e){this.id=e}function o(e,t,r,n,i){this.id=e,this.useOrdinal=t,this.offset=r,this.options=n,this.pluralFn=i}function s(e,t,r,n){this.id=e,this.offset=t,this.numberFormat=r,this.string=n}function a(e,t){this.id=e,this.options=t}r["default"]=n,n.prototype.compile=function(e){return this.pluralStack=[],this.currentPlural=null,this.pluralNumberFormat=null,this.compileMessage(e)},n.prototype.compileMessage=function(e){if(!e||"messageFormatPattern"!==e.type)throw new Error('Message AST is not of type: "messageFormatPattern"');var t,r,n,i=e.elements,o=[];for(t=0,r=i.length;r>t;t+=1)switch(n=i[t],n.type){case"messageTextElement":o.push(this.compileMessageText(n));break;case"argumentElement":o.push(this.compileArgument(n));break;default:throw new Error("Message element does not have a valid type")}return o},n.prototype.compileMessageText=function(e){return this.currentPlural&&/(^|[^\\])#/g.test(e.value)?(this.pluralNumberFormat||(this.pluralNumberFormat=new Intl.NumberFormat(this.locales)),new s(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,e.value)):e.value.replace(/\\#/g,"#")},n.prototype.compileArgument=function(e){var t=e.format;if(!t)return new i(e.id);var r,n=this.formats,s=this.locales,l=this.pluralFn;switch(t.type){case"numberFormat":return r=n.number[t.style],{id:e.id,format:new Intl.NumberFormat(s,r).format};case"dateFormat":return r=n.date[t.style],{id:e.id,format:new Intl.DateTimeFormat(s,r).format};case"timeFormat":return r=n.time[t.style],{id:e.id,format:new Intl.DateTimeFormat(s,r).format};case"pluralFormat":return r=this.compileOptions(e),new o(e.id,t.ordinal,t.offset,r,l);case"selectFormat":return r=this.compileOptions(e),new a(e.id,r);default:throw new Error("Message element does not have a valid format type")}},n.prototype.compileOptions=function(e){var t=e.format,r=t.options,n={};this.pluralStack.push(this.currentPlural),this.currentPlural="pluralFormat"===t.type?e:null;var i,o,s;for(i=0,o=r.length;o>i;i+=1)s=r[i],n[s.selector]=this.compileMessage(s.value);return this.currentPlural=this.pluralStack.pop(),n},i.prototype.format=function(e){return e?"string"==typeof e?e:String(e):""},o.prototype.getOption=function(e){var t=this.options,r=t["="+e]||t[this.pluralFn(e-this.offset,this.useOrdinal)];return r||t.other},s.prototype.format=function(e){var t=this.numberFormat.format(e-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+t).replace(/\\#/g,"#")},a.prototype.getOption=function(e){var t=this.options;return t[e]||t.other}},{}],14:[function(e,t,r){"use strict";function n(e,t,r){var i="string"==typeof e?n.__parse(e):e;if(!i||"messageFormatPattern"!==i.type)throw new TypeError("A message must be provided as a String or AST.");r=this._mergeFormats(n.formats,r),o.defineProperty(this,"_locale",{value:this._resolveLocale(t)});var s=this._findPluralRuleFunction(this._locale),a=this._compilePattern(i,t,r,s),l=this;this.format=function(e){return l._format(a,e)}}var i=e("./utils"),o=e("./es5"),s=e("./compiler"),a=e("intl-messageformat-parser");r["default"]=n,o.defineProperty(n,"formats",{enumerable:!0,value:{number:{currency:{style:"currency"},percent:{style:"percent"}},date:{"short":{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},"long":{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{"short":{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},"long":{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}}}),o.defineProperty(n,"__localeData__",{value:o.objCreate(null)}),o.defineProperty(n,"__addLocaleData",{value:function(e){if(!e||!e.locale)throw new Error("Locale data provided to IntlMessageFormat is missing a `locale` property");n.__localeData__[e.locale.toLowerCase()]=e}}),o.defineProperty(n,"__parse",{value:a["default"].parse}),o.defineProperty(n,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),n.prototype.resolvedOptions=function(){return{locale:this._locale}},n.prototype._compilePattern=function(e,t,r,n){var i=new s["default"](t,r,n);return i.compile(e)},n.prototype._findPluralRuleFunction=function(e){for(var t=n.__localeData__,r=t[e.toLowerCase()];r;){if(r.pluralRuleFunction)return r.pluralRuleFunction;r=r.parentLocale&&t[r.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlMessageFormat is missing a `pluralRuleFunction` for :"+e)},n.prototype._format=function(e,t){var r,n,o,s,a,l="";for(r=0,n=e.length;n>r;r+=1)if(o=e[r],"string"!=typeof o){if(s=o.id,!t||!i.hop.call(t,s))throw new Error("A value must be provided for: "+s);a=t[s],l+=o.options?this._format(o.getOption(a),t):o.format(a)}else l+=o;return l},n.prototype._mergeFormats=function(e,t){var r,n,s={};for(r in e)i.hop.call(e,r)&&(s[r]=n=o.objCreate(e[r]),t&&i.hop.call(t,r)&&i.extend(n,t[r]));return s},n.prototype._resolveLocale=function(e){"string"==typeof e&&(e=[e]),e=(e||[]).concat(n.defaultLocale);var t,r,i,o,s=n.__localeData__;for(t=0,r=e.length;r>t;t+=1)for(i=e[t].toLowerCase().split("-");i.length;){if(o=s[i.join("-")])return o.locale;i.pop()}var a=e.pop();throw new Error("No locale data has been added to IntlMessageFormat for: "+e.join(", ")+", or the default locale: "+a)}},{"./compiler":13,"./es5":16,"./utils":18,"intl-messageformat-parser":19}],15:[function(e,t,r){"use strict";r["default"]={locale:"en",pluralRuleFunction:function(e,t){var r=String(e).split("."),n=!r[1],i=Number(r[0])==e,o=i&&r[0].slice(-1),s=i&&r[0].slice(-2);return t?1==o&&11!=s?"one":2==o&&12!=s?"two":3==o&&13!=s?"few":"other":1==e&&n?"one":"other"}}},{}],16:[function(e,t,r){"use strict";var n=e("./utils"),i=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),o=(!i&&!Object.prototype.__defineGetter__,i?Object.defineProperty:function(e,t,r){"get"in r&&e.__defineGetter__?e.__defineGetter__(t,r.get):(!n.hop.call(e,t)||"value"in r)&&(e[t]=r.value)}),s=Object.create||function(e,t){function r(){}var i,s;r.prototype=e,i=new r;for(s in t)n.hop.call(t,s)&&o(i,s,t[s]);return i};r.defineProperty=o,r.objCreate=s},{"./utils":18}],17:[function(e,t,r){"use strict";var n=e("./core"),i=e("./en");n["default"].__addLocaleData(i["default"]),n["default"].defaultLocale="en",r["default"]=n["default"]},{"./core":14,"./en":15}],18:[function(e,t,r){"use strict";function n(e){var t,r,n,o,s=Array.prototype.slice.call(arguments,1);for(t=0,r=s.length;r>t;t+=1)if(n=s[t])for(o in n)i.call(n,o)&&(e[o]=n[o]);return e}r.extend=n;var i=Object.prototype.hasOwnProperty;r.hop=i},{}],19:[function(e,t,r){"use strict";r=t.exports=e("./lib/parser")["default"],r["default"]=r},{"./lib/parser":20}],20:[function(e,t,r){"use strict";r["default"]=function(){function e(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function t(e,t,r,n,i,o){this.message=e,this.expected=t,this.found=r,this.offset=n,this.line=i,this.column=o,this.name="SyntaxError"}function r(e){function r(t){function r(t,r,n){var i,o;for(i=r;n>i;i++)o=e.charAt(i),"\n"===o?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return Ve!==t&&(Ve>t&&(Ve=0,Ke={line:1,column:1,seenCR:!1}),r(Ke,Ve,t),Ve=t),Ke}function n(e){Ge>qe||(qe>Ge&&(Ge=qe,Je=[]),Je.push(e))}function i(n,i,o){function s(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function a(e,t){function r(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+t(e)})}var n,i,o,s=new Array(e.length);for(o=0;o<e.length;o++)s[o]=e[o].description;return n=e.length>1?s.slice(0,-1).join(", ")+" or "+s[e.length-1]:s[0],i=t?'"'+r(t)+'"':"end of input","Expected "+n+" but "+i+" found."}var l=r(o),c=o<e.length?e.charAt(o):null;return null!==i&&s(i),new t(null!==n?n:a(i,c),i,c,o,l.line,l.column)}function o(){var e;return e=s()}function s(){var e,t,r;for(e=qe,t=[],r=a();r!==O;)t.push(r),r=a();return t!==O&&(We=e,t=I(t)),e=t}function a(){var e;return e=c(),e===O&&(e=p()),e}function l(){var t,r,n,i,o,s;if(t=qe,r=[],n=qe,i=_(),i!==O?(o=A(),o!==O?(s=_(),s!==O?(i=[i,o,s],n=i):(qe=n,n=R)):(qe=n,n=R)):(qe=n,n=R),n!==O)for(;n!==O;)r.push(n),n=qe,i=_(),i!==O?(o=A(),o!==O?(s=_(),s!==O?(i=[i,o,s],n=i):(qe=n,n=R)):(qe=n,n=R)):(qe=n,n=R);else r=R;return r!==O&&(We=t,r=T(r)),t=r,t===O&&(t=qe,r=x(),r!==O&&(r=e.substring(t,qe)),t=r),t}function c(){var e,t;return e=qe,t=l(),t!==O&&(We=e,t=F(t)),e=t}function u(){var t,r,i;if(t=S(),t===O){if(t=qe,r=[],M.test(e.charAt(qe))?(i=e.charAt(qe),qe++):(i=O,0===Qe&&n(D)),i!==O)for(;i!==O;)r.push(i),M.test(e.charAt(qe))?(i=e.charAt(qe),qe++):(i=O,0===Qe&&n(D));else r=R;r!==O&&(r=e.substring(t,qe)),t=r}return t}function p(){var t,r,i,o,s,a,l,c,p;return t=qe,123===e.charCodeAt(qe)?(r=H,qe++):(r=O,0===Qe&&n(B)),r!==O?(i=_(),i!==O?(o=u(),o!==O?(s=_(),s!==O?(a=qe,44===e.charCodeAt(qe)?(l=z,qe++):(l=O,0===Qe&&n($)),l!==O?(c=_(),c!==O?(p=h(),p!==O?(l=[l,c,p],a=l):(qe=a,a=R)):(qe=a,a=R)):(qe=a,a=R),a===O&&(a=U),a!==O?(l=_(),l!==O?(125===e.charCodeAt(qe)?(c=q,qe++):(c=O,0===Qe&&n(W)),c!==O?(We=t,r=V(o,a),t=r):(qe=t,t=R)):(qe=t,t=R)):(qe=t,t=R)):(qe=t,t=R)):(qe=t,t=R)):(qe=t,t=R)):(qe=t,t=R),t}function h(){var e;return e=f(),e===O&&(e=d(),e===O&&(e=g(),e===O&&(e=m()))),e}function f(){var t,r,i,o,s,a,l;return t=qe,e.substr(qe,6)===K?(r=K,qe+=6):(r=O,0===Qe&&n(G)),r===O&&(e.substr(qe,4)===J?(r=J,qe+=4):(r=O,0===Qe&&n(Q)),r===O&&(e.substr(qe,4)===X?(r=X,qe+=4):(r=O,0===Qe&&n(Y)))),r!==O?(i=_(),i!==O?(o=qe,44===e.charCodeAt(qe)?(s=z,qe++):(s=O,0===Qe&&n($)),s!==O?(a=_(),a!==O?(l=A(),l!==O?(s=[s,a,l],o=s):(qe=o,o=R)):(qe=o,o=R)):(qe=o,o=R),o===O&&(o=U),o!==O?(We=t,r=Z(r,o),t=r):(qe=t,t=R)):(qe=t,t=R)):(qe=t,t=R),t}function d(){var t,r,i,o,s,a;return t=qe,e.substr(qe,6)===ee?(r=ee,qe+=6):(r=O,0===Qe&&n(te)),r!==O?(i=_(),i!==O?(44===e.charCodeAt(qe)?(o=z,qe++):(o=O,0===Qe&&n($)),o!==O?(s=_(),s!==O?(a=w(),a!==O?(We=t,r=re(a),t=r):(qe=t,t=R)):(qe=t,t=R)):(qe=t,t=R)):(qe=t,t=R)):(qe=t,t=R),t}function g(){var t,r,i,o,s,a;return t=qe,e.substr(qe,13)===ne?(r=ne,qe+=13):(r=O,0===Qe&&n(ie)),r!==O?(i=_(),i!==O?(44===e.charCodeAt(qe)?(o=z,qe++):(o=O,0===Qe&&n($)),o!==O?(s=_(),s!==O?(a=w(),a!==O?(We=t,r=oe(a),t=r):(qe=t,t=R)):(qe=t,t=R)):(qe=t,t=R)):(qe=t,t=R)):(qe=t,t=R),t}function m(){var t,r,i,o,s,a,l;if(t=qe,e.substr(qe,6)===se?(r=se,qe+=6):(r=O,0===Qe&&n(ae)),r!==O)if(i=_(),i!==O)if(44===e.charCodeAt(qe)?(o=z,qe++):(o=O,0===Qe&&n($)),o!==O)if(s=_(),s!==O){if(a=[],l=y(),l!==O)for(;l!==O;)a.push(l),l=y();else a=R;a!==O?(We=t,r=le(a),t=r):(qe=t,t=R)}else qe=t,t=R;else qe=t,t=R;else qe=t,t=R;else qe=t,t=R;return t}function v(){var t,r,i,o;return t=qe,r=qe,61===e.charCodeAt(qe)?(i=ce,qe++):(i=O,0===Qe&&n(ue)),i!==O?(o=S(),o!==O?(i=[i,o],r=i):(qe=r,r=R)):(qe=r,r=R),r!==O&&(r=e.substring(t,qe)),t=r,t===O&&(t=A()),t}function y(){var t,r,i,o,a,l,c,u,p;return t=qe,r=_(),r!==O?(i=v(),i!==O?(o=_(),o!==O?(123===e.charCodeAt(qe)?(a=H,qe++):(a=O,0===Qe&&n(B)),a!==O?(l=_(),l!==O?(c=s(),c!==O?(u=_(),u!==O?(125===e.charCodeAt(qe)?(p=q,qe++):(p=O,0===Qe&&n(W)),p!==O?(We=t,r=pe(i,c),t=r):(qe=t,t=R)):(qe=t,t=R)):(qe=t,t=R)):(qe=t,t=R)):(qe=t,t=R)):(qe=t,t=R)):(qe=t,t=R)):(qe=t,t=R),t}function b(){var t,r,i,o;return t=qe,e.substr(qe,7)===he?(r=he,qe+=7):(r=O,0===Qe&&n(fe)),r!==O?(i=_(),i!==O?(o=S(),o!==O?(We=t,r=de(o),t=r):(qe=t,t=R)):(qe=t,t=R)):(qe=t,t=R),t}function w(){var e,t,r,n,i;if(e=qe,t=b(),t===O&&(t=U),t!==O)if(r=_(),r!==O){if(n=[],i=y(),i!==O)for(;i!==O;)n.push(i),i=y();else n=R;n!==O?(We=e,t=ge(t,n),e=t):(qe=e,e=R)}else qe=e,e=R;else qe=e,e=R;return e}function x(){var t,r;if(Qe++,t=[],ve.test(e.charAt(qe))?(r=e.charAt(qe),qe++):(r=O,0===Qe&&n(ye)),r!==O)for(;r!==O;)t.push(r),ve.test(e.charAt(qe))?(r=e.charAt(qe),qe++):(r=O,0===Qe&&n(ye));else t=R;return Qe--,t===O&&(r=O,0===Qe&&n(me)),t}function _(){var t,r,i;for(Qe++,t=qe,r=[],i=x();i!==O;)r.push(i),i=x();return r!==O&&(r=e.substring(t,qe)),t=r,Qe--,t===O&&(r=O,0===Qe&&n(be)),t}function E(){var t;return we.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=O,0===Qe&&n(xe)),t}function P(){var t;return _e.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=O,0===Qe&&n(Ee)),t}function S(){var t,r,i,o,s,a;if(t=qe,48===e.charCodeAt(qe)?(r=Pe,
qe++):(r=O,0===Qe&&n(Se)),r===O){if(r=qe,i=qe,ke.test(e.charAt(qe))?(o=e.charAt(qe),qe++):(o=O,0===Qe&&n(Ae)),o!==O){for(s=[],a=E();a!==O;)s.push(a),a=E();s!==O?(o=[o,s],i=o):(qe=i,i=R)}else qe=i,i=R;i!==O&&(i=e.substring(r,qe)),r=i}return r!==O&&(We=t,r=Ce(r)),t=r}function k(){var t,r,i,o,s,a,l,c;return je.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=O,0===Qe&&n(Oe)),t===O&&(t=qe,e.substr(qe,2)===Le?(r=Le,qe+=2):(r=O,0===Qe&&n(Ne)),r!==O&&(We=t,r=Ie()),t=r,t===O&&(t=qe,e.substr(qe,2)===Re?(r=Re,qe+=2):(r=O,0===Qe&&n(Te)),r!==O&&(We=t,r=Fe()),t=r,t===O&&(t=qe,e.substr(qe,2)===Me?(r=Me,qe+=2):(r=O,0===Qe&&n(De)),r!==O&&(We=t,r=He()),t=r,t===O&&(t=qe,e.substr(qe,2)===Be?(r=Be,qe+=2):(r=O,0===Qe&&n(Ue)),r!==O?(i=qe,o=qe,s=P(),s!==O?(a=P(),a!==O?(l=P(),l!==O?(c=P(),c!==O?(s=[s,a,l,c],o=s):(qe=o,o=R)):(qe=o,o=R)):(qe=o,o=R)):(qe=o,o=R),o!==O&&(o=e.substring(i,qe)),i=o,i!==O?(We=t,r=ze(i),t=r):(qe=t,t=R)):(qe=t,t=R))))),t}function A(){var e,t,r;if(e=qe,t=[],r=k(),r!==O)for(;r!==O;)t.push(r),r=k();else t=R;return t!==O&&(We=e,t=$e(t)),e=t}var C,j=arguments.length>1?arguments[1]:{},O={},L={start:o},N=o,I=function(e){return{type:"messageFormatPattern",elements:e}},R=O,T=function(e){var t,r,n,i,o,s="";for(t=0,n=e.length;n>t;t+=1)for(i=e[t],r=0,o=i.length;o>r;r+=1)s+=i[r];return s},F=function(e){return{type:"messageTextElement",value:e}},M=/^[^ \t\n\r,.+={}#]/,D={type:"class",value:"[^ \\t\\n\\r,.+={}#]",description:"[^ \\t\\n\\r,.+={}#]"},H="{",B={type:"literal",value:"{",description:'"{"'},U=null,z=",",$={type:"literal",value:",",description:'","'},q="}",W={type:"literal",value:"}",description:'"}"'},V=function(e,t){return{type:"argumentElement",id:e,format:t&&t[2]}},K="number",G={type:"literal",value:"number",description:'"number"'},J="date",Q={type:"literal",value:"date",description:'"date"'},X="time",Y={type:"literal",value:"time",description:'"time"'},Z=function(e,t){return{type:e+"Format",style:t&&t[2]}},ee="plural",te={type:"literal",value:"plural",description:'"plural"'},re=function(e){return{type:e.type,ordinal:!1,offset:e.offset||0,options:e.options}},ne="selectordinal",ie={type:"literal",value:"selectordinal",description:'"selectordinal"'},oe=function(e){return{type:e.type,ordinal:!0,offset:e.offset||0,options:e.options}},se="select",ae={type:"literal",value:"select",description:'"select"'},le=function(e){return{type:"selectFormat",options:e}},ce="=",ue={type:"literal",value:"=",description:'"="'},pe=function(e,t){return{type:"optionalFormatPattern",selector:e,value:t}},he="offset:",fe={type:"literal",value:"offset:",description:'"offset:"'},de=function(e){return e},ge=function(e,t){return{type:"pluralFormat",offset:e,options:t}},me={type:"other",description:"whitespace"},ve=/^[ \t\n\r]/,ye={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},be={type:"other",description:"optionalWhitespace"},we=/^[0-9]/,xe={type:"class",value:"[0-9]",description:"[0-9]"},_e=/^[0-9a-f]/i,Ee={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},Pe="0",Se={type:"literal",value:"0",description:'"0"'},ke=/^[1-9]/,Ae={type:"class",value:"[1-9]",description:"[1-9]"},Ce=function(e){return parseInt(e,10)},je=/^[^{}\\\0-\x1F \t\n\r]/,Oe={type:"class",value:"[^{}\\\\\\0-\\x1F \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F \\t\\n\\r]"},Le="\\#",Ne={type:"literal",value:"\\#",description:'"\\\\#"'},Ie=function(){return"\\#"},Re="\\{",Te={type:"literal",value:"\\{",description:'"\\\\{"'},Fe=function(){return"{"},Me="\\}",De={type:"literal",value:"\\}",description:'"\\\\}"'},He=function(){return"}"},Be="\\u",Ue={type:"literal",value:"\\u",description:'"\\\\u"'},ze=function(e){return String.fromCharCode(parseInt(e,16))},$e=function(e){return e.join("")},qe=0,We=0,Ve=0,Ke={line:1,column:1,seenCR:!1},Ge=0,Je=[],Qe=0;if("startRule"in j){if(!(j.startRule in L))throw new Error("Can't start parsing from rule \""+j.startRule+'".');N=L[j.startRule]}if(C=N(),C!==O&&qe===e.length)return C;throw C!==O&&qe<e.length&&n({type:"end",description:"end of input"}),i(null,Je,Ge)}return e(t,Error),{SyntaxError:t,parse:r}}()},{}],21:[function(e,t,r){"use strict";var n=e("./lib/main")["default"];e("./lib/locales"),r=t.exports=n,r["default"]=r},{"./lib/locales":124,"./lib/main":26}],22:[function(e,t,r){"use strict";function n(e,t){t=t||{},s.isArray(e)&&(e=e.concat()),s.defineProperty(this,"_locale",{value:this._resolveLocale(e)}),s.defineProperty(this,"_options",{value:{style:this._resolveStyle(t.style),units:this._isValidUnits(t.units)&&t.units}}),s.defineProperty(this,"_locales",{value:e}),s.defineProperty(this,"_fields",{value:this._findFields(this._locale)}),s.defineProperty(this,"_messages",{value:s.objCreate(null)});var r=this;this.format=function(e,t){return r._format(e,t)}}var i=e("intl-messageformat"),o=e("./diff"),s=e("./es5");r["default"]=n;var a=["second","minute","hour","day","month","year"],l=["best fit","numeric"];s.defineProperty(n,"__localeData__",{value:s.objCreate(null)}),s.defineProperty(n,"__addLocaleData",{value:function(e){if(!e||!e.locale)throw new Error("Locale data provided to IntlRelativeFormat is missing a `locale` property value");n.__localeData__[e.locale.toLowerCase()]=e,i["default"].__addLocaleData(e)}}),s.defineProperty(n,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),s.defineProperty(n,"thresholds",{enumerable:!0,value:{second:45,minute:45,hour:22,day:26,month:11}}),n.prototype.resolvedOptions=function(){return{locale:this._locale,style:this._options.style,units:this._options.units}},n.prototype._compileMessage=function(e){var t,r=this._locales,n=(this._locale,this._fields[e]),o=n.relativeTime,s="",a="";for(t in o.future)o.future.hasOwnProperty(t)&&(s+=" "+t+" {"+o.future[t].replace("{0}","#")+"}");for(t in o.past)o.past.hasOwnProperty(t)&&(a+=" "+t+" {"+o.past[t].replace("{0}","#")+"}");var l="{when, select, future {{0, plural, "+s+"}}past {{0, plural, "+a+"}}}";return new i["default"](l,r)},n.prototype._getMessage=function(e){var t=this._messages;return t[e]||(t[e]=this._compileMessage(e)),t[e]},n.prototype._getRelativeUnits=function(e,t){var r=this._fields[t];return r.relative?r.relative[e]:void 0},n.prototype._findFields=function(e){for(var t=n.__localeData__,r=t[e.toLowerCase()];r;){if(r.fields)return r.fields;r=r.parentLocale&&t[r.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlRelativeFormat is missing `fields` for :"+e)},n.prototype._format=function(e,t){var r=t&&void 0!==t.now?t.now:s.dateNow();if(void 0===e&&(e=r),!isFinite(r))throw new RangeError("The `now` option provided to IntlRelativeFormat#format() is not in valid range.");if(!isFinite(e))throw new RangeError("The date value provided to IntlRelativeFormat#format() is not in valid range.");var n=o["default"](r,e),i=this._options.units||this._selectUnits(n),a=n[i];if("numeric"!==this._options.style){var l=this._getRelativeUnits(a,i);if(l)return l}return this._getMessage(i).format({0:Math.abs(a),when:0>a?"past":"future"})},n.prototype._isValidUnits=function(e){if(!e||s.arrIndexOf.call(a,e)>=0)return!0;if("string"==typeof e){var t=/s$/.test(e)&&e.substr(0,e.length-1);if(t&&s.arrIndexOf.call(a,t)>=0)throw new Error('"'+e+'" is not a valid IntlRelativeFormat `units` value, did you mean: '+t)}throw new Error('"'+e+'" is not a valid IntlRelativeFormat `units` value, it must be one of: "'+a.join('", "')+'"')},n.prototype._resolveLocale=function(e){"string"==typeof e&&(e=[e]),e=(e||[]).concat(n.defaultLocale);var t,r,i,o,s=n.__localeData__;for(t=0,r=e.length;r>t;t+=1)for(i=e[t].toLowerCase().split("-");i.length;){if(o=s[i.join("-")])return o.locale;i.pop()}var a=e.pop();throw new Error("No locale data has been added to IntlRelativeFormat for: "+e.join(", ")+", or the default locale: "+a)},n.prototype._resolveStyle=function(e){if(!e)return l[0];if(s.arrIndexOf.call(l,e)>=0)return e;throw new Error('"'+e+'" is not a valid IntlRelativeFormat `style` value, it must be one of: "'+l.join('", "')+'"')},n.prototype._selectUnits=function(e){var t,r,i;for(t=0,r=a.length;r>t&&(i=a[t],!(Math.abs(e[i])<n.thresholds[i]));t+=1);return i}},{"./diff":23,"./es5":25,"intl-messageformat":12}],23:[function(e,t,r){"use strict";function n(e){return 400*e/146097}var i=Math.round;r["default"]=function(e,t){e=+e,t=+t;var r=i(t-e),o=i(r/1e3),s=i(o/60),a=i(s/60),l=i(a/24),c=i(l/7),u=n(l),p=i(12*u),h=i(u);return{millisecond:r,second:o,minute:s,hour:a,day:l,week:c,month:p,year:h}}},{}],24:[function(e,t,r){arguments[4][5][0].apply(r,arguments)},{dup:5}],25:[function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),s=(!o&&!Object.prototype.__defineGetter__,o?Object.defineProperty:function(e,t,r){"get"in r&&e.__defineGetter__?e.__defineGetter__(t,r.get):(!n.call(e,t)||"value"in r)&&(e[t]=r.value)}),a=Object.create||function(e,t){function r(){}var i,o;r.prototype=e,i=new r;for(o in t)n.call(t,o)&&s(i,o,t[o]);return i},l=Array.prototype.indexOf||function(e,t){var r=this;if(!r.length)return-1;for(var n=t||0,i=r.length;i>n;n++)if(r[n]===e)return n;return-1},c=Array.isArray||function(e){return"[object Array]"===i.call(e)},u=Date.now||function(){return(new Date).getTime()};r.defineProperty=s,r.objCreate=a,r.arrIndexOf=l,r.isArray=c,r.dateNow=u},{}],26:[function(e,t,r){arguments[4][17][0].apply(r,arguments)},{"./core":22,"./en":24,dup:17}],27:[function(e,t,r){!function(e,n){"object"==typeof r&&"object"==typeof t?t.exports=n():"function"==typeof define&&define.amd?define(n):"object"==typeof r?r.Handlebars=n():e.Handlebars=n()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(){var e=v();return e.compile=function(t,r){return u.compile(t,r,e)},e.precompile=function(t,r){return u.precompile(t,r,e)},e.AST=l["default"],e.Compiler=u.Compiler,e.JavaScriptCompiler=h["default"],e.Parser=c.parser,e.parse=c.parse,e}var i=r(8)["default"];t.__esModule=!0;var o=r(1),s=i(o),a=r(2),l=i(a),c=r(3),u=r(4),p=r(5),h=i(p),f=r(6),d=i(f),g=r(7),m=i(g),v=s["default"].create,y=n();y.create=n,m["default"](y),y.Visitor=d["default"],y["default"]=y,t["default"]=y,e.exports=t["default"]},function(e,t,r){"use strict";function n(){var e=new s.HandlebarsEnvironment;return h.extend(e,s),e.SafeString=l["default"],e.Exception=u["default"],e.Utils=h,e.escapeExpression=h.escapeExpression,e.VM=d,e.template=function(t){return d.template(t,e)},e}var i=r(8)["default"];t.__esModule=!0;var o=r(9),s=i(o),a=r(10),l=i(a),c=r(11),u=i(c),p=r(12),h=i(p),f=r(13),d=i(f),g=r(7),m=i(g),v=n();v.create=n,m["default"](v),v["default"]=v,t["default"]=v,e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0;var r={Program:function(e,t,r,n){this.loc=n,this.type="Program",this.body=e,this.blockParams=t,this.strip=r},MustacheStatement:function(e,t,r,n,i,o){this.loc=o,this.type="MustacheStatement",this.path=e,this.params=t||[],this.hash=r,this.escaped=n,this.strip=i},BlockStatement:function(e,t,r,n,i,o,s,a,l){this.loc=l,this.type="BlockStatement",this.path=e,this.params=t||[],this.hash=r,this.program=n,this.inverse=i,this.openStrip=o,this.inverseStrip=s,this.closeStrip=a},PartialStatement:function(e,t,r,n,i){this.loc=i,this.type="PartialStatement",this.name=e,this.params=t||[],this.hash=r,this.indent="",this.strip=n},ContentStatement:function(e,t){this.loc=t,this.type="ContentStatement",this.original=this.value=e},CommentStatement:function(e,t,r){this.loc=r,this.type="CommentStatement",this.value=e,this.strip=t},SubExpression:function(e,t,r,n){this.loc=n,this.type="SubExpression",this.path=e,this.params=t||[],this.hash=r},PathExpression:function(e,t,r,n,i){this.loc=i,this.type="PathExpression",this.data=e,this.original=n,this.parts=r,this.depth=t},StringLiteral:function(e,t){this.loc=t,this.type="StringLiteral",this.original=this.value=e},NumberLiteral:function(e,t){this.loc=t,this.type="NumberLiteral",this.original=this.value=Number(e)},BooleanLiteral:function(e,t){this.loc=t,this.type="BooleanLiteral",this.original=this.value="true"===e},UndefinedLiteral:function(e){this.loc=e,this.type="UndefinedLiteral",this.original=this.value=void 0},NullLiteral:function(e){this.loc=e,this.type="NullLiteral",this.original=this.value=null},Hash:function(e,t){this.loc=t,this.type="Hash",this.pairs=e},HashPair:function(e,t,r){this.loc=r,this.type="HashPair",this.key=e,this.value=t},helpers:{helperExpression:function(e){return!("SubExpression"!==e.type&&!e.params.length&&!e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!r.helpers.scopedId(e)&&!e.depth}}};t["default"]=r,e.exports=t["default"]},function(e,t,r){"use strict";function n(e,t){if("Program"===e.type)return e;s["default"].yy=d,d.locInfo=function(e){return new d.SourceLocation(t&&t.srcName,e)};var r=new u["default"];return r.accept(s["default"].parse(e))}var i=r(8)["default"];t.__esModule=!0,t.parse=n;var o=r(14),s=i(o),a=r(2),l=i(a),c=r(15),u=i(c),p=r(16),h=i(p),f=r(12);t.parser=s["default"];var d={};f.extend(d,h,l["default"])},function(e,t,r){"use strict";function n(){}function i(e,t,r){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new u["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var n=r.parse(e,t),i=(new r.Compiler).compile(n,t);return(new r.JavaScriptCompiler).compile(i,t)}function o(e,t,r){function n(){var t=r.parse(e,o),n=(new r.Compiler).compile(t,o),i=(new r.JavaScriptCompiler).compile(n,o,void 0,!0);return r.template(i)}function i(e,t){return s||(s=n()),s.call(this,e,t)}var o=void 0===arguments[1]?{}:arguments[1];if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new u["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);"data"in o||(o.data=!0),o.compat&&(o.useDepths=!0);var s=void 0;return i._setup=function(e){return s||(s=n()),s._setup(e)},i._child=function(e,t,r,i){return s||(s=n()),s._child(e,t,r,i)},i}function s(e,t){if(e===t)return!0;if(p.isArray(e)&&p.isArray(t)&&e.length===t.length){for(var r=0;r<e.length;r++)if(!s(e[r],t[r]))return!1;return!0}}function a(e){if(!e.path.parts){var t=e.path;e.path=new f["default"].PathExpression(!1,0,[t.original+""],t.original+"",t.loc)}}var l=r(8)["default"];t.__esModule=!0,t.Compiler=n,t.precompile=i,t.compile=o;var c=r(11),u=l(c),p=r(12),h=r(2),f=l(h),d=[].slice;n.prototype={compiler:n,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var r=0;t>r;r++){var n=this.opcodes[r],i=e.opcodes[r];if(n.opcode!==i.opcode||!s(n.args,i.args))return!1}t=this.children.length;for(var r=0;t>r;r++)if(!this.children[r].equals(e.children[r]))return!1;return!0},guid:0,compile:function(e,t){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[];var r=t.knownHelpers;if(t.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},r)for(var n in r)n in r&&(t.knownHelpers[n]=r[n]);return this.accept(e)},compileProgram:function(e){var t=new this.compiler,r=t.compile(e,this.options),n=this.guid++;return this.usePartial=this.usePartial||r.usePartial,this.children[n]=r,this.useDepths=this.useDepths||r.useDepths,n},accept:function(e){this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,r=t.length,n=0;r>n;n++)this.accept(t[n]);return this.options.blockParams.shift(),this.isSimple=1===r,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){a(e);var t=e.program,r=e.inverse;t=t&&this.compileProgram(t),r=r&&this.compileProgram(r);var n=this.classifySexpr(e);"helper"===n?this.helperSexpr(e,t,r):"simple"===n?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,r),this.opcode("pushProgram",t),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},PartialStatement:function(e){this.usePartial=!0;var t=e.params;if(t.length>1)throw new u["default"]("Unsupported number of partial arguments: "+t.length,e);t.length||t.push({type:"PathExpression",parts:[],depth:0});var r=e.name.original,n="SubExpression"===e.name.type;n&&this.accept(e.name),this.setupFullMustacheParams(e,void 0,void 0,!0);var i=e.indent||"";this.options.preventIndent&&i&&(this.opcode("appendContent",i),i=""),this.opcode("invokePartial",n,r,i),this.opcode("append")},MustacheStatement:function(e){this.SubExpression(e),this.opcode(e.escaped&&!this.options.noEscape?"appendEscaped":"append")},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){a(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,r){var n=e.path,i=n.parts[0],o=null!=t||null!=r;this.opcode("getContext",n.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",r),this.accept(n),this.opcode("invokeAmbiguous",i,o)},simpleSexpr:function(e){this.accept(e.path),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,r){var n=this.setupFullMustacheParams(e,t,r),i=e.path,o=i.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",n.length,o);else{if(this.options.knownHelpersOnly)throw new u["default"]("You specified knownHelpersOnly, but used the unknown helper "+o,e);i.falsy=!0,this.accept(i),this.opcode("invokeHelper",n.length,i.original,f["default"].helpers.simpleId(i))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],r=f["default"].helpers.scopedId(e),n=!e.depth&&!r&&this.blockParamIndex(t);n?this.opcode("lookupBlockParam",n,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts)):this.opcode("lookupOnContext",e.parts,e.falsy,r):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,r=0,n=t.length;for(this.opcode("pushHash");n>r;r++)this.pushParam(t[r].value);for(;r--;)this.opcode("assignToHash",t[r].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:d.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=f["default"].helpers.simpleId(e.path),r=t&&!!this.blockParamIndex(e.path.parts[0]),n=!r&&f["default"].helpers.helperExpression(e),i=!r&&(n||t);if(i&&!n){var o=e.path.parts[0],s=this.options;s.knownHelpers[o]?n=!0:s.knownHelpersOnly&&(i=!1)}return n?"helper":i?"ambiguous":"simple"},pushParams:function(e){for(var t=0,r=e.length;r>t;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var r=void 0;if(!e.parts||f["default"].helpers.scopedId(e)||e.depth||(r=this.blockParamIndex(e.parts[0])),r){var n=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",r,n)}else t=e.original||t,t.replace&&(t=t.replace(/^\.\//g,"").replace(/^\.$/g,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,r,n){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",r),e.hash?this.accept(e.hash):this.opcode("emptyHash",n),i},blockParamIndex:function(e){for(var t=0,r=this.options.blockParams.length;r>t;t++){var n=this.options.blockParams[t],i=n&&p.indexOf(n,e);if(n&&i>=0)return[t,i]}}}},function(e,t,r){"use strict";function n(e){this.value=e}function i(){}function o(e,t,r,n){var i=t.popStack(),o=0,s=r.length;for(e&&s--;s>o;o++)i=t.nameLookup(i,r[o],n);return e?[t.aliasable("this.strict"),"(",i,", ",t.quotedString(r[o]),")"]:i}var s=r(8)["default"];t.__esModule=!0;var a=r(9),l=r(11),c=s(l),u=r(12),p=r(17),h=s(p);i.prototype={nameLookup:function(e,t){return i.isValidJavaScriptVariableName(t)?[e,".",t]:[e,"['",t,"']"]},depthedLookup:function(e){return[this.aliasable("this.lookup"),'(depths, "',e,'")']},compilerInfo:function(){var e=a.COMPILER_REVISION,t=a.REVISION_CHANGES[e];return[e,t]},appendToBuffer:function(e,t,r){return u.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:r?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},compile:function(e,t,r,n){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!r,this.context=r||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var i=e.opcodes,o=void 0,s=void 0,a=void 0,l=void 0;for(a=0,l=i.length;l>a;a++)o=i[a],this.source.currentLocation=o.loc,s=s||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=s,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new c["default"]("Compile completed with content left on stack");var u=this.createFunctionContext(n);if(this.isChild)return u;var p={compiler:this.compilerInfo(),main:u},h=this.context.programs;for(a=0,l=h.length;l>a;a++)h[a]&&(p[a]=h[a]);return this.environment.usePartial&&(p.usePartial=!0),this.options.data&&(p.useData=!0),this.useDepths&&(p.useDepths=!0),this.useBlockParams&&(p.useBlockParams=!0),this.options.compat&&(p.compat=!0),n?p.compilerOptions=this.options:(p.compiler=JSON.stringify(p.compiler),this.source.currentLocation={start:{line:1,column:0}},p=this.objectLiteral(p),t.srcName?(p=p.toStringWithSourceMap({file:t.destName}),p.map=p.map&&p.map.toString()):p=p.toString()),p},preamble:function(){this.lastContext=0,this.source=new h["default"](this.options.srcName)},createFunctionContext:function(e){var t="",r=this.stackVars.concat(this.registers.list);r.length>0&&(t+=", "+r.join(", "));var n=0;for(var i in this.aliases){var o=this.aliases[i];this.aliases.hasOwnProperty(i)&&o.children&&o.referenceCount>1&&(t+=", alias"+ ++n+"="+i,o.children[0]="alias"+n)}var s=["depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&s.push("blockParams"),this.useDepths&&s.push("depths");var a=this.mergeSource(t);return e?(s.push(a),Function.apply(this,s)):this.source.wrap(["function(",s.join(","),") {\n  ",a,"}"])},mergeSource:function(e){var t=this.environment.isSimple,r=!this.forceBuffer,n=void 0,i=void 0,o=void 0,s=void 0;return this.source.each(function(e){e.appendToBuffer?(o?e.prepend("  + "):o=e,s=e):(o&&(i?o.prepend("buffer += "):n=!0,s.add(";"),o=s=void 0),i=!0,t||(r=!1))}),r?o?(o.prepend("return "),s.add(";")):i||this.source.push('return "";'):(e+=", buffer = "+(n?"":this.initializeBuffer()),o?(o.prepend("return buffer + "),s.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(n?"":";\n")),this.source.merge()},blockValue:function(e){var t=this.aliasable("helpers.blockHelperMissing"),r=[this.contextName(0)];this.setupHelperArgs(e,0,r);var n=this.popStack();r.splice(1,0,n),this.push(this.source.functionCall(t,"call",r))},ambiguousBlockValue:function(){var e=this.aliasable("helpers.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var r=this.topStack();t.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("this.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,r){var n=0;r||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[n++])),this.resolvePath("context",e,n,t)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t){this.pushStackLiteral(e?"this.data(data, "+e+")":"data"),this.resolvePath("data",t,0,!0)},resolvePath:function(e,t,r,n){var i=this;if(this.options.strict||this.options.assumeObjects)return void this.push(o(this.options.strict,this,t,e));for(var s=t.length;s>r;r++)this.replaceStack(function(o){var s=i.nameLookup(o,t[r],e);return n?[" && ",s]:[" != null ? ",s," : ",o]})},resolvePossibleLambda:function(){this.push([this.aliasable("this.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){this.pushStackLiteral(null!=e?this.programExpression(e):null)},invokeHelper:function(e,t,r){var n=this.popStack(),i=this.setupHelper(e,t),o=r?[i.name," || "]:"",s=["("].concat(o,n);this.options.strict||s.push(" || ",this.aliasable("helpers.helperMissing")),s.push(")"),this.push(this.source.functionCall(s,"call",i.callParams))},invokeKnownHelper:function(e,t){var r=this.setupHelper(e,t);this.push(this.source.functionCall(r.name,"call",r.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var r=this.popStack();this.emptyHash();var n=this.setupHelper(0,e,t),i=this.lastHelper=this.nameLookup("helpers",e,"helper"),o=["(","(helper = ",i," || ",r,")"];this.options.strict||(o[0]="(helper = ",o.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",o,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(e,t,r){var n=[],i=this.setupParams(t,1,n,!1);e&&(t=this.popStack(),delete i.name),r&&(i.indent=JSON.stringify(r)),i.helpers="helpers",i.partials="partials",n.unshift(e?t:this.nameLookup("partials",t,"partial")),this.options.compat&&(i.depths="depths"),i=this.objectLiteral(i),n.push(i),this.push(this.source.functionCall("this.invokePartial","",n))},assignToHash:function(e){var t=this.popStack(),r=void 0,n=void 0,i=void 0;this.trackIds&&(i=this.popStack()),this.stringParams&&(n=this.popStack(),r=this.popStack());var o=this.hash;r&&(o.contexts[e]=r),n&&(o.types[e]=n),i&&(o.ids[e]=i),o.values[e]=t},pushId:function(e,t,r){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):"PathExpression"===e?this.pushString(t):this.pushStackLiteral("SubExpression"===e?"true":"null")},compiler:i,compileChildren:function(e,t){for(var r=e.children,n=void 0,i=void 0,o=0,s=r.length;s>o;o++){n=r[o],i=new this.compiler;var a=this.matchExistingProgram(n);null==a?(this.context.programs.push(""),a=this.context.programs.length,n.index=a,n.name="program"+a,this.context.programs[a]=i.compile(n,t,this.context,!this.precompile),this.context.environments[a]=n,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams):(n.index=a,n.name="program"+a,this.useDepths=this.useDepths||n.useDepths,this.useBlockParams=this.useBlockParams||n.useBlockParams)}},matchExistingProgram:function(e){for(var t=0,r=this.context.environments.length;r>t;t++){var n=this.context.environments[t];if(n&&n.equals(e))return t}},programExpression:function(e){var t=this.environment.children[e],r=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths"),"this.program("+r.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof n||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new n(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],r=void 0,i=void 0,o=void 0;if(!this.isInline())throw new c["default"]("replaceStack on non-inline");var s=this.popStack(!0);if(s instanceof n)r=[s.value],t=["(",r],o=!0;else{i=!0;var a=this.incrStack();t=["((",this.push(a)," = ",s,")"],r=this.topStack()}var l=e.call(this,r);o||this.popStack(),i&&this.stackSlot--,this.push(t.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,r=e.length;r>t;t++){var i=e[t];if(i instanceof n)this.compileStack.push(i);else{var o=this.incrStack();this.pushSource([o," = ",i,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),r=(t?this.inlineStack:this.compileStack).pop();if(!e&&r instanceof n)return r.value;if(!t){if(!this.stackSlot)throw new c["default"]("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof n?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):(t=this.aliases[e]=this.source.wrap(e),t.aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,r){var n=[],i=this.setupHelperArgs(t,e,n,r),o=this.nameLookup("helpers",t,"helper");return{params:n,paramsInit:i,name:o,callParams:[this.contextName(0)].concat(n)}},setupParams:function(e,t,r){var n={},i=[],o=[],s=[],a=void 0;n.name=this.quotedString(e),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),
this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var l=this.popStack(),c=this.popStack();(c||l)&&(n.fn=c||"this.noop",n.inverse=l||"this.noop");for(var u=t;u--;)a=this.popStack(),r[u]=a,this.trackIds&&(s[u]=this.popStack()),this.stringParams&&(o[u]=this.popStack(),i[u]=this.popStack());return this.trackIds&&(n.ids=this.source.generateArray(s)),this.stringParams&&(n.types=this.source.generateArray(o),n.contexts=this.source.generateArray(i)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(e,t,r,n){var i=this.setupParams(e,t,r,!0);return i=this.objectLiteral(i),n?(this.useRegister("options"),r.push("options"),["options=",i]):(r.push(i),"")}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=i.RESERVED_WORDS={},r=0,n=e.length;n>r;r++)t[e[r]]=!0}(),i.isValidJavaScriptVariableName=function(e){return!i.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t["default"]=i,e.exports=t["default"]},function(e,t,r){"use strict";function n(){this.parents=[]}var i=r(8)["default"];t.__esModule=!0;var o=r(11),s=i(o),a=r(2),l=i(a);n.prototype={constructor:n,mutating:!1,acceptKey:function(e,t){var r=this.accept(e[t]);if(this.mutating){if(r&&(!r.type||!l["default"][r.type]))throw new s["default"]('Unexpected node type "'+r.type+'" found when accepting '+t+" on "+e.type);e[t]=r}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new s["default"](e.type+" requires "+t)},acceptArray:function(e){for(var t=0,r=e.length;r>t;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,r--)},accept:function(e){if(e){this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:t!==!1?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")},BlockStatement:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash"),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")},PartialStatement:function(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")},PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t["default"]=n,e.exports=t["default"]},function(e,t){(function(r){"use strict";t.__esModule=!0,t["default"]=function(e){var t="undefined"!=typeof r?r:window,n=t.Handlebars;e.noConflict=function(){t.Handlebars===e&&(t.Handlebars=n)}},e.exports=t["default"]}).call(t,function(){return this}())},function(e,t){"use strict";t["default"]=function(e){return e&&e.__esModule?e:{"default":e}},t.__esModule=!0},function(e,t,r){"use strict";function n(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new u["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')}),e.registerHelper("blockHelperMissing",function(t,r){var n=r.inverse,i=r.fn;if(t===!0)return i(this);if(t===!1||null==t)return n(this);if(d(t))return t.length>0?(r.ids&&(r.ids=[r.name]),e.helpers.each(t,r)):n(this);if(r.data&&r.ids){var s=o(r.data);s.contextPath=l.appendContextPath(r.data.contextPath,r.name),r={data:s}}return i(t,r)}),e.registerHelper("each",function(e,t){function r(t,r,i){c&&(c.key=t,c.index=r,c.first=0===r,c.last=!!i,p&&(c.contextPath=p+t)),a+=n(e[t],{data:c,blockParams:l.blockParams([e[t],t],[p+t,null])})}if(!t)throw new u["default"]("Must pass iterator to #each");var n=t.fn,i=t.inverse,s=0,a="",c=void 0,p=void 0;if(t.data&&t.ids&&(p=l.appendContextPath(t.data.contextPath,t.ids[0])+"."),g(e)&&(e=e.call(this)),t.data&&(c=o(t.data)),e&&"object"==typeof e)if(d(e))for(var h=e.length;h>s;s++)r(s,s,s===e.length-1);else{var f=void 0;for(var m in e)e.hasOwnProperty(m)&&(f&&r(f,s-1),f=m,s++);f&&r(f,s-1,!0)}return 0===s&&(a=i(this)),a}),e.registerHelper("if",function(e,t){return g(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||l.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,r){return e.helpers["if"].call(this,t,{fn:r.inverse,inverse:r.fn,hash:r.hash})}),e.registerHelper("with",function(e,t){g(e)&&(e=e.call(this));var r=t.fn;if(l.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var n=o(t.data);n.contextPath=l.appendContextPath(t.data.contextPath,t.ids[0]),t={data:n}}return r(e,t)}),e.registerHelper("log",function(t,r){var n=r.data&&null!=r.data.level?parseInt(r.data.level,10):1;e.log(n,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}function o(e){var t=l.extend({},e);return t._parent=e,t}var s=r(8)["default"];t.__esModule=!0,t.HandlebarsEnvironment=n,t.createFrame=o;var a=r(12),l=s(a),c=r(11),u=s(c),p="3.0.1";t.VERSION=p;var h=6;t.COMPILER_REVISION=h;var f={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};t.REVISION_CHANGES=f;var d=l.isArray,g=l.isFunction,m=l.toString,v="[object Object]";n.prototype={constructor:n,logger:y,log:b,registerHelper:function(e,t){if(m.call(e)===v){if(t)throw new u["default"]("Arg not supported with multiple helpers");l.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(m.call(e)===v)l.extend(this.partials,e);else{if("undefined"==typeof t)throw new u["default"]("Attempting to register a partial as undefined");this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]}};var y={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(e,t){if("undefined"!=typeof console&&y.level<=e){var r=y.methodMap[e];(console[r]||console.log).call(console,t)}}};t.logger=y;var b=y.log;t.log=b},function(e,t){"use strict";function r(e){this.string=e}t.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},t["default"]=r,e.exports=t["default"]},function(e,t){"use strict";function r(e,t){var i=t&&t.loc,o=void 0,s=void 0;i&&(o=i.start.line,s=i.start.column,e+=" - "+o+":"+s);for(var a=Error.prototype.constructor.call(this,e),l=0;l<n.length;l++)this[n[l]]=a[n[l]];Error.captureStackTrace&&Error.captureStackTrace(this,r),i&&(this.lineNumber=o,this.column=s)}t.__esModule=!0;var n=["description","fileName","lineNumber","message","name","number","stack"];r.prototype=new Error,t["default"]=r,e.exports=t["default"]},function(e,t){"use strict";function r(e){return c[e]}function n(e){for(var t=1;t<arguments.length;t++)for(var r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&(e[r]=arguments[t][r]);return e}function i(e,t){for(var r=0,n=e.length;n>r;r++)if(e[r]===t)return r;return-1}function o(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return p.test(e)?e.replace(u,r):e}function s(e){return e||0===e?!(!d(e)||0!==e.length):!0}function a(e,t){return e.path=t,e}function l(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=n,t.indexOf=i,t.escapeExpression=o,t.isEmpty=s,t.blockParams=a,t.appendContextPath=l;var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,p=/[&<>"'`]/,h=Object.prototype.toString;t.toString=h;var f=function(e){return"function"==typeof e};f(/x/)&&(t.isFunction=f=function(e){return"function"==typeof e&&"[object Function]"===h.call(e)});var f;t.isFunction=f;var d=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===h.call(e):!1};t.isArray=d},function(e,t,r){"use strict";function n(e){var t=e&&e[0]||1,r=g.COMPILER_REVISION;if(t!==r){if(r>t){var n=g.REVISION_CHANGES[r],i=g.REVISION_CHANGES[t];throw new d["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+i+").")}throw new d["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function i(e,t){function r(r,n,i){i.hash&&(n=h.extend({},n,i.hash)),r=t.VM.resolvePartial.call(this,r,n,i);var o=t.VM.invokePartial.call(this,r,n,i);if(null==o&&t.compile&&(i.partials[i.name]=t.compile(r,e.compilerOptions,t),o=i.partials[i.name](n,i)),null!=o){if(i.indent){for(var s=o.split("\n"),a=0,l=s.length;l>a&&(s[a]||a+1!==l);a++)s[a]=i.indent+s[a];o=s.join("\n")}return o}throw new d["default"]("The partial "+i.name+" could not be compiled when running in runtime-only mode")}function n(t){var r=void 0===arguments[1]?{}:arguments[1],o=r.data;n._setup(r),!r.partial&&e.useData&&(o=c(t,o));var s=void 0,a=e.useBlockParams?[]:void 0;return e.useDepths&&(s=r.depths?[t].concat(r.depths):[t]),e.main.call(i,t,i.helpers,i.partials,o,a,s)}if(!t)throw new d["default"]("No environment passed to template");if(!e||!e.main)throw new d["default"]("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var i={strict:function(e,t){if(!(t in e))throw new d["default"]('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var r=e.length,n=0;r>n;n++)if(e[n]&&null!=e[n][t])return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:h.escapeExpression,invokePartial:r,fn:function(t){return e[t]},programs:[],program:function(e,t,r,n,i){var s=this.programs[e],a=this.fn(e);return t||i||n||r?s=o(this,e,a,t,r,n,i):s||(s=this.programs[e]=o(this,e,a)),s},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var r=e||t;return e&&t&&e!==t&&(r=h.extend({},t,e)),r},noop:t.VM.noop,compilerInfo:e.compiler};return n.isTop=!0,n._setup=function(r){r.partial?(i.helpers=r.helpers,i.partials=r.partials):(i.helpers=i.merge(r.helpers,t.helpers),e.usePartial&&(i.partials=i.merge(r.partials,t.partials)))},n._child=function(t,r,n,s){if(e.useBlockParams&&!n)throw new d["default"]("must pass block params");if(e.useDepths&&!s)throw new d["default"]("must pass parent depths");return o(i,t,e[t],r,0,n,s)},n}function o(e,t,r,n,i,o,s){function a(t){var i=void 0===arguments[1]?{}:arguments[1];return r.call(e,t,e.helpers,e.partials,i.data||n,o&&[i.blockParams].concat(o),s&&[t].concat(s))}return a.program=t,a.depth=s?s.length:0,a.blockParams=i||0,a}function s(e,t,r){return e?e.call||r.name||(r.name=e,e=r.partials[e]):e=r.partials[r.name],e}function a(e,t,r){if(r.partial=!0,void 0===e)throw new d["default"]("The partial "+r.name+" could not be found");return e instanceof Function?e(t,r):void 0}function l(){return""}function c(e,t){return t&&"root"in t||(t=t?g.createFrame(t):{},t.root=e),t}var u=r(8)["default"];t.__esModule=!0,t.checkRevision=n,t.template=i,t.wrapProgram=o,t.resolvePartial=s,t.invokePartial=a,t.noop=l;var p=r(12),h=u(p),f=r(11),d=u(f),g=r(9)},function(e,t){"use strict";t.__esModule=!0;var r=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,content:12,COMMENT:13,CONTENT:14,openRawBlock:15,END_RAW_BLOCK:16,OPEN_RAW_BLOCK:17,helperName:18,openRawBlock_repetition0:19,openRawBlock_option0:20,CLOSE_RAW_BLOCK:21,openBlock:22,block_option0:23,closeBlock:24,openInverse:25,block_option1:26,OPEN_BLOCK:27,openBlock_repetition0:28,openBlock_option0:29,openBlock_option1:30,CLOSE:31,OPEN_INVERSE:32,openInverse_repetition0:33,openInverse_option0:34,openInverse_option1:35,openInverseChain:36,OPEN_INVERSE_CHAIN:37,openInverseChain_repetition0:38,openInverseChain_option0:39,openInverseChain_option1:40,inverseAndProgram:41,INVERSE:42,inverseChain:43,inverseChain_option0:44,OPEN_ENDBLOCK:45,OPEN:46,mustache_repetition0:47,mustache_option0:48,OPEN_UNESCAPED:49,mustache_repetition1:50,mustache_option1:51,CLOSE_UNESCAPED:52,OPEN_PARTIAL:53,partialName:54,partial_repetition0:55,partial_option0:56,param:57,sexpr:58,OPEN_SEXPR:59,sexpr_repetition0:60,sexpr_option0:61,CLOSE_SEXPR:62,hash:63,hash_repetition_plus0:64,hashSegment:65,ID:66,EQUALS:67,blockParams:68,OPEN_BLOCK_PARAMS:69,blockParams_repetition_plus0:70,CLOSE_BLOCK_PARAMS:71,path:72,dataName:73,STRING:74,NUMBER:75,BOOLEAN:76,UNDEFINED:77,NULL:78,DATA:79,pathSegments:80,SEP:81,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",13:"COMMENT",14:"CONTENT",16:"END_RAW_BLOCK",17:"OPEN_RAW_BLOCK",21:"CLOSE_RAW_BLOCK",27:"OPEN_BLOCK",31:"CLOSE",32:"OPEN_INVERSE",37:"OPEN_INVERSE_CHAIN",42:"INVERSE",45:"OPEN_ENDBLOCK",46:"OPEN",49:"OPEN_UNESCAPED",52:"CLOSE_UNESCAPED",53:"OPEN_PARTIAL",59:"OPEN_SEXPR",62:"CLOSE_SEXPR",66:"ID",67:"EQUALS",69:"OPEN_BLOCK_PARAMS",71:"CLOSE_BLOCK_PARAMS",74:"STRING",75:"NUMBER",76:"BOOLEAN",77:"UNDEFINED",78:"NULL",79:"DATA",81:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[12,1],[10,3],[15,5],[9,4],[9,4],[22,6],[25,6],[36,6],[41,2],[43,3],[43,1],[24,3],[8,5],[8,5],[11,5],[57,1],[57,1],[58,5],[63,1],[65,3],[68,3],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[54,1],[54,1],[73,2],[72,1],[80,3],[80,1],[6,0],[6,2],[19,0],[19,2],[20,0],[20,1],[23,0],[23,1],[26,0],[26,1],[28,0],[28,2],[29,0],[29,1],[30,0],[30,1],[33,0],[33,2],[34,0],[34,1],[35,0],[35,1],[38,0],[38,2],[39,0],[39,1],[40,0],[40,1],[44,0],[44,1],[47,0],[47,2],[48,0],[48,1],[50,0],[50,2],[51,0],[51,1],[55,0],[55,2],[56,0],[56,1],[60,0],[60,2],[61,0],[61,1],[64,1],[64,2],[70,1],[70,2]],performAction:function(e,t,r,n,i,o){var s=o.length-1;switch(i){case 1:return o[s-1];case 2:this.$=new n.Program(o[s],null,{},n.locInfo(this._$));break;case 3:this.$=o[s];break;case 4:this.$=o[s];break;case 5:this.$=o[s];break;case 6:this.$=o[s];break;case 7:this.$=o[s];break;case 8:this.$=new n.CommentStatement(n.stripComment(o[s]),n.stripFlags(o[s],o[s]),n.locInfo(this._$));break;case 9:this.$=new n.ContentStatement(o[s],n.locInfo(this._$));break;case 10:this.$=n.prepareRawBlock(o[s-2],o[s-1],o[s],this._$);break;case 11:this.$={path:o[s-3],params:o[s-2],hash:o[s-1]};break;case 12:this.$=n.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!1,this._$);break;case 13:this.$=n.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!0,this._$);break;case 14:this.$={path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 15:this.$={path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 16:this.$={path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 17:this.$={strip:n.stripFlags(o[s-1],o[s-1]),program:o[s]};break;case 18:var a=n.prepareBlock(o[s-2],o[s-1],o[s],o[s],!1,this._$),l=new n.Program([a],null,{},n.locInfo(this._$));l.chained=!0,this.$={strip:o[s-2].strip,program:l,chain:!0};break;case 19:this.$=o[s];break;case 20:this.$={path:o[s-1],strip:n.stripFlags(o[s-2],o[s])};break;case 21:this.$=n.prepareMustache(o[s-3],o[s-2],o[s-1],o[s-4],n.stripFlags(o[s-4],o[s]),this._$);break;case 22:this.$=n.prepareMustache(o[s-3],o[s-2],o[s-1],o[s-4],n.stripFlags(o[s-4],o[s]),this._$);break;case 23:this.$=new n.PartialStatement(o[s-3],o[s-2],o[s-1],n.stripFlags(o[s-4],o[s]),n.locInfo(this._$));break;case 24:this.$=o[s];break;case 25:this.$=o[s];break;case 26:this.$=new n.SubExpression(o[s-3],o[s-2],o[s-1],n.locInfo(this._$));break;case 27:this.$=new n.Hash(o[s],n.locInfo(this._$));break;case 28:this.$=new n.HashPair(n.id(o[s-2]),o[s],n.locInfo(this._$));break;case 29:this.$=n.id(o[s-1]);break;case 30:this.$=o[s];break;case 31:this.$=o[s];break;case 32:this.$=new n.StringLiteral(o[s],n.locInfo(this._$));break;case 33:this.$=new n.NumberLiteral(o[s],n.locInfo(this._$));break;case 34:this.$=new n.BooleanLiteral(o[s],n.locInfo(this._$));break;case 35:this.$=new n.UndefinedLiteral(n.locInfo(this._$));break;case 36:this.$=new n.NullLiteral(n.locInfo(this._$));break;case 37:this.$=o[s];break;case 38:this.$=o[s];break;case 39:this.$=n.preparePath(!0,o[s],this._$);break;case 40:this.$=n.preparePath(!1,o[s],this._$);break;case 41:o[s-2].push({part:n.id(o[s]),original:o[s],separator:o[s-1]}),this.$=o[s-2];break;case 42:this.$=[{part:n.id(o[s]),original:o[s]}];break;case 43:this.$=[];break;case 44:o[s-1].push(o[s]);break;case 45:this.$=[];break;case 46:o[s-1].push(o[s]);break;case 53:this.$=[];break;case 54:o[s-1].push(o[s]);break;case 59:this.$=[];break;case 60:o[s-1].push(o[s]);break;case 65:this.$=[];break;case 66:o[s-1].push(o[s]);break;case 73:this.$=[];break;case 74:o[s-1].push(o[s]);break;case 77:this.$=[];break;case 78:o[s-1].push(o[s]);break;case 81:this.$=[];break;case 82:o[s-1].push(o[s]);break;case 85:this.$=[];break;case 86:o[s-1].push(o[s]);break;case 89:this.$=[o[s]];break;case 90:o[s-1].push(o[s]);break;case 91:this.$=[o[s]];break;case 92:o[s-1].push(o[s])}},table:[{3:1,4:2,5:[2,43],6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],46:[2,43],49:[2,43],53:[2,43]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:[1,11],14:[1,18],15:16,17:[1,21],22:14,25:15,27:[1,19],32:[1,20],37:[2,2],42:[2,2],45:[2,2],46:[1,12],49:[1,13],53:[1,17]},{1:[2,1]},{5:[2,44],13:[2,44],14:[2,44],17:[2,44],27:[2,44],32:[2,44],37:[2,44],42:[2,44],45:[2,44],46:[2,44],49:[2,44],53:[2,44]},{5:[2,3],13:[2,3],14:[2,3],17:[2,3],27:[2,3],32:[2,3],37:[2,3],42:[2,3],45:[2,3],46:[2,3],49:[2,3],53:[2,3]},{5:[2,4],13:[2,4],14:[2,4],17:[2,4],27:[2,4],32:[2,4],37:[2,4],42:[2,4],45:[2,4],46:[2,4],49:[2,4],53:[2,4]},{5:[2,5],13:[2,5],14:[2,5],17:[2,5],27:[2,5],32:[2,5],37:[2,5],42:[2,5],45:[2,5],46:[2,5],49:[2,5],53:[2,5]},{5:[2,6],13:[2,6],14:[2,6],17:[2,6],27:[2,6],32:[2,6],37:[2,6],42:[2,6],45:[2,6],46:[2,6],49:[2,6],53:[2,6]},{5:[2,7],13:[2,7],14:[2,7],17:[2,7],27:[2,7],32:[2,7],37:[2,7],42:[2,7],45:[2,7],46:[2,7],49:[2,7],53:[2,7]},{5:[2,8],13:[2,8],14:[2,8],17:[2,8],27:[2,8],32:[2,8],37:[2,8],42:[2,8],45:[2,8],46:[2,8],49:[2,8],53:[2,8]},{18:22,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:33,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:34,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{4:35,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{12:36,14:[1,18]},{18:38,54:37,58:39,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,9],13:[2,9],14:[2,9],16:[2,9],17:[2,9],27:[2,9],32:[2,9],37:[2,9],42:[2,9],45:[2,9],46:[2,9],49:[2,9],53:[2,9]},{18:41,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:42,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:43,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[2,73],47:44,59:[2,73],66:[2,73],74:[2,73],75:[2,73],76:[2,73],77:[2,73],78:[2,73],79:[2,73]},{21:[2,30],31:[2,30],52:[2,30],59:[2,30],62:[2,30],66:[2,30],69:[2,30],74:[2,30],75:[2,30],76:[2,30],77:[2,30],78:[2,30],79:[2,30]},{21:[2,31],31:[2,31],52:[2,31],59:[2,31],62:[2,31],66:[2,31],69:[2,31],74:[2,31],75:[2,31],76:[2,31],77:[2,31],78:[2,31],79:[2,31]},{21:[2,32],31:[2,32],52:[2,32],59:[2,32],62:[2,32],66:[2,32],69:[2,32],74:[2,32],75:[2,32],76:[2,32],77:[2,32],78:[2,32],79:[2,32]},{21:[2,33],31:[2,33],52:[2,33],59:[2,33],62:[2,33],66:[2,33],69:[2,33],74:[2,33],75:[2,33],76:[2,33],77:[2,33],78:[2,33],79:[2,33]},{21:[2,34],31:[2,34],52:[2,34],59:[2,34],62:[2,34],66:[2,34],69:[2,34],74:[2,34],75:[2,34],76:[2,34],77:[2,34],78:[2,34],79:[2,34]},{21:[2,35],31:[2,35],52:[2,35],59:[2,35],62:[2,35],66:[2,35],69:[2,35],74:[2,35],75:[2,35],76:[2,35],77:[2,35],78:[2,35],79:[2,35]},{21:[2,36],31:[2,36],52:[2,36],59:[2,36],62:[2,36],66:[2,36],69:[2,36],74:[2,36],75:[2,36],76:[2,36],77:[2,36],78:[2,36],79:[2,36]},{21:[2,40],31:[2,40],52:[2,40],59:[2,40],62:[2,40],66:[2,40],69:[2,40],74:[2,40],75:[2,40],76:[2,40],77:[2,40],78:[2,40],79:[2,40],81:[1,45]},{66:[1,32],80:46},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{50:47,52:[2,77],59:[2,77],66:[2,77],74:[2,77],75:[2,77],76:[2,77],77:[2,77],78:[2,77],79:[2,77]},{23:48,36:50,37:[1,52],41:51,42:[1,53],43:49,45:[2,49]},{26:54,41:55,42:[1,53],45:[2,51]},{16:[1,56]},{31:[2,81],55:57,59:[2,81],66:[2,81],74:[2,81],75:[2,81],76:[2,81],77:[2,81],78:[2,81],79:[2,81]},{31:[2,37],59:[2,37],66:[2,37],74:[2,37],75:[2,37],76:[2,37],77:[2,37],78:[2,37],79:[2,37]},{31:[2,38],59:[2,38],66:[2,38],74:[2,38],75:[2,38],76:[2,38],77:[2,38],78:[2,38],79:[2,38]},{18:58,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{28:59,31:[2,53],59:[2,53],66:[2,53],69:[2,53],74:[2,53],75:[2,53],76:[2,53],77:[2,53],78:[2,53],79:[2,53]},{31:[2,59],33:60,59:[2,59],66:[2,59],69:[2,59],74:[2,59],75:[2,59],76:[2,59],77:[2,59],78:[2,59],79:[2,59]},{19:61,21:[2,45],59:[2,45],66:[2,45],74:[2,45],75:[2,45],76:[2,45],77:[2,45],78:[2,45],79:[2,45]},{18:65,31:[2,75],48:62,57:63,58:66,59:[1,40],63:64,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{66:[1,70]},{21:[2,39],31:[2,39],52:[2,39],59:[2,39],62:[2,39],66:[2,39],69:[2,39],74:[2,39],75:[2,39],76:[2,39],77:[2,39],78:[2,39],79:[2,39],81:[1,45]},{18:65,51:71,52:[2,79],57:72,58:66,59:[1,40],63:73,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{24:74,45:[1,75]},{45:[2,50]},{4:76,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{45:[2,19]},{18:77,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:78,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{24:79,45:[1,75]},{45:[2,52]},{5:[2,10],13:[2,10],14:[2,10],17:[2,10],27:[2,10],32:[2,10],37:[2,10],42:[2,10],45:[2,10],46:[2,10],49:[2,10],53:[2,10]},{18:65,31:[2,83],56:80,57:81,58:66,59:[1,40],63:82,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{59:[2,85],60:83,62:[2,85],66:[2,85],74:[2,85],75:[2,85],76:[2,85],77:[2,85],78:[2,85],79:[2,85]},{18:65,29:84,31:[2,55],57:85,58:66,59:[1,40],63:86,64:67,65:68,66:[1,69],69:[2,55],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,31:[2,61],34:87,57:88,58:66,59:[1,40],63:89,64:67,65:68,66:[1,69],69:[2,61],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,20:90,21:[2,47],57:91,58:66,59:[1,40],63:92,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[1,93]},{31:[2,74],59:[2,74],66:[2,74],74:[2,74],75:[2,74],76:[2,74],77:[2,74],78:[2,74],79:[2,74]},{31:[2,76]},{21:[2,24],31:[2,24],52:[2,24],59:[2,24],62:[2,24],66:[2,24],69:[2,24],74:[2,24],75:[2,24],76:[2,24],77:[2,24],78:[2,24],79:[2,24]},{21:[2,25],31:[2,25],52:[2,25],59:[2,25],62:[2,25],66:[2,25],69:[2,25],74:[2,25],75:[2,25],76:[2,25],77:[2,25],78:[2,25],79:[2,25]},{21:[2,27],31:[2,27],52:[2,27],62:[2,27],65:94,66:[1,95],69:[2,27]},{21:[2,89],31:[2,89],52:[2,89],62:[2,89],66:[2,89],69:[2,89]},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],67:[1,96],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{21:[2,41],31:[2,41],52:[2,41],59:[2,41],62:[2,41],66:[2,41],69:[2,41],74:[2,41],75:[2,41],76:[2,41],77:[2,41],78:[2,41],79:[2,41],81:[2,41]},{52:[1,97]},{52:[2,78],59:[2,78],66:[2,78],74:[2,78],75:[2,78],76:[2,78],77:[2,78],78:[2,78],79:[2,78]},{52:[2,80]},{5:[2,12],13:[2,12],14:[2,12],17:[2,12],27:[2,12],32:[2,12],37:[2,12],42:[2,12],45:[2,12],46:[2,12],49:[2,12],53:[2,12]},{18:98,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{36:50,37:[1,52],41:51,42:[1,53],43:100,44:99,45:[2,71]},{31:[2,65],38:101,59:[2,65],66:[2,65],69:[2,65],74:[2,65],75:[2,65],76:[2,65],77:[2,65],78:[2,65],79:[2,65]},{45:[2,17]},{5:[2,13],13:[2,13],14:[2,13],17:[2,13],27:[2,13],32:[2,13],37:[2,13],42:[2,13],45:[2,13],46:[2,13],49:[2,13],53:[2,13]},{31:[1,102]},{31:[2,82],59:[2,82],66:[2,82],74:[2,82],75:[2,82],76:[2,82],77:[2,82],78:[2,82],79:[2,82]},{31:[2,84]},{18:65,57:104,58:66,59:[1,40],61:103,62:[2,87],63:105,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{30:106,31:[2,57],68:107,69:[1,108]},{31:[2,54],59:[2,54],66:[2,54],69:[2,54],74:[2,54],75:[2,54],76:[2,54],77:[2,54],78:[2,54],79:[2,54]},{31:[2,56],69:[2,56]},{31:[2,63],35:109,68:110,69:[1,108]},{31:[2,60],59:[2,60],66:[2,60],69:[2,60],74:[2,60],75:[2,60],76:[2,60],77:[2,60],78:[2,60],79:[2,60]},{31:[2,62],69:[2,62]},{21:[1,111]},{21:[2,46],59:[2,46],66:[2,46],74:[2,46],75:[2,46],76:[2,46],77:[2,46],78:[2,46],79:[2,46]},{21:[2,48]},{5:[2,21],13:[2,21],14:[2,21],17:[2,21],27:[2,21],32:[2,21],37:[2,21],42:[2,21],45:[2,21],46:[2,21],49:[2,21],53:[2,21]},{21:[2,90],31:[2,90],52:[2,90],62:[2,90],66:[2,90],69:[2,90]},{67:[1,96]},{18:65,57:112,58:66,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,22],13:[2,22],14:[2,22],17:[2,22],27:[2,22],32:[2,22],37:[2,22],42:[2,22],45:[2,22],46:[2,22],49:[2,22],53:[2,22]},{31:[1,113]},{45:[2,18]},{45:[2,72]},{18:65,31:[2,67],39:114,57:115,58:66,59:[1,40],63:116,64:67,65:68,66:[1,69],69:[2,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,23],13:[2,23],14:[2,23],17:[2,23],27:[2,23],32:[2,23],37:[2,23],42:[2,23],45:[2,23],46:[2,23],49:[2,23],53:[2,23]},{62:[1,117]},{59:[2,86],62:[2,86],66:[2,86],74:[2,86],75:[2,86],76:[2,86],77:[2,86],78:[2,86],79:[2,86]},{62:[2,88]},{31:[1,118]},{31:[2,58]},{66:[1,120],70:119},{31:[1,121]},{31:[2,64]},{14:[2,11]},{21:[2,28],31:[2,28],52:[2,28],62:[2,28],66:[2,28],69:[2,28]},{5:[2,20],13:[2,20],14:[2,20],17:[2,20],27:[2,20],32:[2,20],37:[2,20],42:[2,20],45:[2,20],46:[2,20],49:[2,20],53:[2,20]},{31:[2,69],40:122,68:123,69:[1,108]},{31:[2,66],59:[2,66],66:[2,66],69:[2,66],74:[2,66],75:[2,66],76:[2,66],77:[2,66],78:[2,66],79:[2,66]},{31:[2,68],69:[2,68]},{21:[2,26],31:[2,26],52:[2,26],59:[2,26],62:[2,26],66:[2,26],69:[2,26],74:[2,26],75:[2,26],76:[2,26],77:[2,26],78:[2,26],79:[2,26]},{13:[2,14],14:[2,14],17:[2,14],27:[2,14],32:[2,14],37:[2,14],42:[2,14],45:[2,14],46:[2,14],49:[2,14],53:[2,14]},{66:[1,125],71:[1,124]},{66:[2,91],71:[2,91]},{13:[2,15],14:[2,15],17:[2,15],27:[2,15],32:[2,15],42:[2,15],45:[2,15],46:[2,15],49:[2,15],53:[2,15]},{31:[1,126]},{31:[2,70]},{31:[2,29]},{66:[2,92],71:[2,92]},{13:[2,16],14:[2,16],17:[2,16],27:[2,16],32:[2,16],37:[2,16],42:[2,16],45:[2,16],46:[2,16],49:[2,16],53:[2,16]}],defaultActions:{4:[2,1],49:[2,50],51:[2,19],55:[2,52],64:[2,76],73:[2,80],78:[2,17],82:[2,84],92:[2,48],99:[2,18],100:[2,72],105:[2,88],107:[2,58],110:[2,64],111:[2,11],123:[2,70],124:[2,29]},parseError:function(e){throw new Error(e)},parse:function(e){function t(){var e;return e=r.lexer.lex()||1,"number"!=typeof e&&(e=r.symbols_[e]||e),e}var r=this,n=[0],i=[null],o=[],s=this.table,a="",l=0,c=0,u=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var p=this.lexer.yylloc;o.push(p);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var f,d,g,m,v,y,b,w,x,_={};;){if(g=n[n.length-1],this.defaultActions[g]?m=this.defaultActions[g]:((null===f||"undefined"==typeof f)&&(f=t()),m=s[g]&&s[g][f]),"undefined"==typeof m||!m.length||!m[0]){var E="";if(!u){x=[];for(y in s[g])this.terminals_[y]&&y>2&&x.push("'"+this.terminals_[y]+"'");E=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[f]||f)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==f?"end of input":"'"+(this.terminals_[f]||f)+"'"),this.parseError(E,{text:this.lexer.match,token:this.terminals_[f]||f,line:this.lexer.yylineno,loc:p,expected:x})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+f);switch(m[0]){case 1:n.push(f),i.push(this.lexer.yytext),o.push(this.lexer.yylloc),n.push(m[1]),f=null,d?(f=d,d=null):(c=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,p=this.lexer.yylloc,u>0&&u--);break;case 2:if(b=this.productions_[m[1]][1],_.$=i[i.length-b],_._$={first_line:o[o.length-(b||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(b||1)].first_column,last_column:o[o.length-1].last_column},h&&(_._$.range=[o[o.length-(b||1)].range[0],o[o.length-1].range[1]]),v=this.performAction.call(_,a,c,l,this.yy,m[1],i,o),"undefined"!=typeof v)return v;b&&(n=n.slice(0,-1*b*2),i=i.slice(0,-1*b),o=o.slice(0,-1*b)),n.push(this.productions_[m[1]][0]),i.push(_.$),o.push(_._$),w=s[n[n.length-2]][n[n.length-1]],n.push(w);break;case 3:return!0}}return!0}},r=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,r,n,i;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),s=0;s<o.length&&(r=this._input.match(this.rules[o[s]]),!r||t&&!(r[0].length>t[0].length)||(t=r,n=s,this.options.flex));s++);return t?(i=t[0].match(/(?:\r\n?|\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,
last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,r,n){function i(e,r){return t.yytext=t.yytext.substr(e,t.yyleng-r)}switch(r){case 0:if("\\\\"===t.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return t.yytext=t.yytext.substr(5,t.yyleng-9),this.popState(),16;case 4:return 14;case 5:return this.popState(),13;case 6:return 59;case 7:return 62;case 8:return 17;case 9:return this.popState(),this.begin("raw"),21;case 10:return 53;case 11:return 27;case 12:return 45;case 13:return this.popState(),42;case 14:return this.popState(),42;case 15:return 32;case 16:return 37;case 17:return 49;case 18:return 46;case 19:this.unput(t.yytext),this.popState(),this.begin("com");break;case 20:return this.popState(),13;case 21:return 46;case 22:return 67;case 23:return 66;case 24:return 66;case 25:return 81;case 26:break;case 27:return this.popState(),52;case 28:return this.popState(),31;case 29:return t.yytext=i(1,2).replace(/\\"/g,'"'),74;case 30:return t.yytext=i(1,2).replace(/\\'/g,"'"),74;case 31:return 79;case 32:return 76;case 33:return 76;case 34:return 77;case 35:return 78;case 36:return 75;case 37:return 69;case 38:return 71;case 39:return 66;case 40:return 66;case 41:return"INVALID";case 42:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,42],inclusive:!0}},e}();return t.lexer=r,e.prototype=t,t.Parser=e,new e}();t["default"]=r,e.exports=t["default"]},function(e,t,r){"use strict";function n(){}function i(e,t,r){void 0===t&&(t=e.length);var n=e[t-1],i=e[t-2];return n?"ContentStatement"===n.type?(i||!r?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:r}function o(e,t,r){void 0===t&&(t=-1);var n=e[t+1],i=e[t+2];return n?"ContentStatement"===n.type?(i||!r?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:r}function s(e,t,r){var n=e[null==t?0:t+1];if(n&&"ContentStatement"===n.type&&(r||!n.rightStripped)){var i=n.value;n.value=n.value.replace(r?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==i}}function a(e,t,r){var n=e[null==t?e.length-1:t-1];if(n&&"ContentStatement"===n.type&&(r||!n.leftStripped)){var i=n.value;return n.value=n.value.replace(r?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==i,n.leftStripped}}var l=r(8)["default"];t.__esModule=!0;var c=r(6),u=l(c);n.prototype=new u["default"],n.prototype.Program=function(e){var t=!this.isRootSeen;this.isRootSeen=!0;for(var r=e.body,n=0,l=r.length;l>n;n++){var c=r[n],u=this.accept(c);if(u){var p=i(r,n,t),h=o(r,n,t),f=u.openStandalone&&p,d=u.closeStandalone&&h,g=u.inlineStandalone&&p&&h;u.close&&s(r,n,!0),u.open&&a(r,n,!0),g&&(s(r,n),a(r,n)&&"PartialStatement"===c.type&&(c.indent=/([ \t]+$)/.exec(r[n-1].original)[1])),f&&(s((c.program||c.inverse).body),a(r,n)),d&&(s(r,n),a((c.inverse||c.program).body))}}return e},n.prototype.BlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,r=e.program&&e.inverse,n=r,l=r;if(r&&r.chained)for(n=r.body[0].program;l.chained;)l=l.body[l.body.length-1].program;var c={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:o(t.body),closeStandalone:i((n||t).body)};if(e.openStrip.close&&s(t.body,null,!0),r){var u=e.inverseStrip;u.open&&a(t.body,null,!0),u.close&&s(n.body,null,!0),e.closeStrip.open&&a(l.body,null,!0),i(t.body)&&o(n.body)&&(a(t.body),s(n.body))}else e.closeStrip.open&&a(t.body,null,!0);return c},n.prototype.MustacheStatement=function(e){return e.strip},n.prototype.PartialStatement=n.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t["default"]=n,e.exports=t["default"]},function(e,t,r){"use strict";function n(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}}function i(e){return/^\[.*\]$/.test(e)?e.substr(1,e.length-2):e}function o(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}}function s(e){return e.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function a(e,t,r){r=this.locInfo(r);for(var n=e?"@":"",i=[],o=0,s="",a=0,l=t.length;l>a;a++){var c=t[a].part,u=t[a].original!==c;if(n+=(t[a].separator||"")+c,u||".."!==c&&"."!==c&&"this"!==c)i.push(c);else{if(i.length>0)throw new f["default"]("Invalid path: "+n,{loc:r});".."===c&&(o++,s+="../")}}return new this.PathExpression(e,o,i,n,r)}function l(e,t,r,n,i,o){var s=n.charAt(3)||n.charAt(2),a="{"!==s&&"&"!==s;return new this.MustacheStatement(e,t,r,a,i,this.locInfo(o))}function c(e,t,r,n){if(e.path.original!==r){var i={loc:e.path.loc};throw new f["default"](e.path.original+" doesn't match "+r,i)}n=this.locInfo(n);var o=new this.Program([t],null,{},n);return new this.BlockStatement(e.path,e.params,e.hash,o,void 0,{},{},{},n)}function u(e,t,r,n,i,o){if(n&&n.path&&e.path.original!==n.path.original){var s={loc:e.path.loc};throw new f["default"](e.path.original+" doesn't match "+n.path.original,s)}t.blockParams=e.blockParams;var a=void 0,l=void 0;return r&&(r.chain&&(r.program.body[0].closeStrip=n.strip),l=r.strip,a=r.program),i&&(i=a,a=t,t=i),new this.BlockStatement(e.path,e.params,e.hash,t,a,e.strip,l,n&&n.strip,this.locInfo(o))}var p=r(8)["default"];t.__esModule=!0,t.SourceLocation=n,t.id=i,t.stripFlags=o,t.stripComment=s,t.preparePath=a,t.prepareMustache=l,t.prepareRawBlock=c,t.prepareBlock=u;var h=r(11),f=p(h)},function(e,t,r){"use strict";function n(e,t,r){if(o.isArray(e)){for(var n=[],i=0,s=e.length;s>i;i++)n.push(t.wrap(e[i],r));return n}return"boolean"==typeof e||"number"==typeof e?e+"":e}function i(e){this.srcFile=e,this.source=[]}t.__esModule=!0;var o=r(12),s=void 0;try{}catch(a){}s||(s=function(e,t,r,n){this.src="",n&&this.add(n)},s.prototype={add:function(e){o.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){o.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),i.prototype={prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each(function(t){e.add(["  ",t,"\n"])}),e},each:function(e){for(var t=0,r=this.source.length;r>t;t++)e(this.source[t])},empty:function(){var e=void 0===arguments[0]?this.currentLocation||{start:{}}:arguments[0];return new s(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof s?e:(e=n(e,this,t),new s(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,r){return r=this.generateList(r),this.wrap([e,t?"."+t+"(":"(",r,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=[];for(var r in e)if(e.hasOwnProperty(r)){var i=n(e[r],this);"undefined"!==i&&t.push([this.quotedString(r),":",i])}var o=this.generateList(t);return o.prepend("{"),o.add("}"),o},generateList:function(e,t){for(var r=this.empty(t),i=0,o=e.length;o>i;i++)i&&r.add(","),r.add(n(e[i],this,t));return r},generateArray:function(e,t){var r=this.generateList(e,t);return r.prepend("["),r.add("]"),r}},t["default"]=i,e.exports=t["default"]}])})},{}],28:[function(e,t,r){function n(e,t){if("function"!=typeof e)throw new TypeError(i);return t=o(void 0===t?e.length-1:+t||0,0),function(){for(var r=arguments,n=-1,i=o(r.length-t,0),s=Array(i);++n<i;)s[n]=r[t+n];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,r[0],s);case 2:return e.call(this,r[0],r[1],s)}var a=Array(t+1);for(n=-1;++n<t;)a[n]=r[n];return a[t]=s,e.apply(this,a)}}var i="Expected a function",o=Math.max;t.exports=n},{}],29:[function(e,t,r){(function(r){function n(e){var t=e?e.length:0;for(this.data={hash:a(null),set:new s};t--;)this.push(e[t])}var i=e("./cachePush"),o=e("./getNative"),s=o(r,"Set"),a=o(Object,"create");n.prototype.push=i,t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cachePush":51,"./getNative":56}],30:[function(e,t,r){function n(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}t.exports=n},{}],31:[function(e,t,r){function n(e,t){for(var r=-1,n=e.length;++r<n&&t(e[r],r,e)!==!1;);return e}t.exports=n},{}],32:[function(e,t,r){function n(e,t){for(var r=-1,n=e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}t.exports=n},{}],33:[function(e,t,r){function n(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}t.exports=n},{}],34:[function(e,t,r){function n(e,t,r){for(var n=-1,o=i(t),s=o.length;++n<s;){var a=o[n],l=e[a],c=r(l,t[a],a,e,t);(c===c?c===l:l!==l)&&(void 0!==l||a in e)||(e[a]=c)}return e}var i=e("../object/keys");t.exports=n},{"../object/keys":80}],35:[function(e,t,r){function n(e,t){return null==t?e:i(t,o(t),e)}var i=e("./baseCopy"),o=e("../object/keys");t.exports=n},{"../object/keys":80,"./baseCopy":37}],36:[function(e,t,r){function n(e,t,r,d,g,m,v){var b;if(r&&(b=g?r(e,d,g):r(e)),void 0!==b)return b;if(!h(e))return e;var w=p(e);if(w){if(b=l(e),!t)return i(e,b)}else{var _=D.call(e),E=_==y;if(_!=x&&_!=f&&(!E||g))return F[_]?c(e,_,t):g?e:{};if(b=u(E?{}:e),!t)return s(b,e)}m||(m=[]),v||(v=[]);for(var P=m.length;P--;)if(m[P]==e)return v[P];return m.push(e),v.push(b),(w?o:a)(e,function(i,o){b[o]=n(i,t,r,o,e,m,v)}),b}var i=e("./arrayCopy"),o=e("./arrayEach"),s=e("./baseAssign"),a=e("./baseForOwn"),l=e("./initCloneArray"),c=e("./initCloneByTag"),u=e("./initCloneObject"),p=e("../lang/isArray"),h=e("../lang/isObject"),f="[object Arguments]",d="[object Array]",g="[object Boolean]",m="[object Date]",v="[object Error]",y="[object Function]",b="[object Map]",w="[object Number]",x="[object Object]",_="[object RegExp]",E="[object Set]",P="[object String]",S="[object WeakMap]",k="[object ArrayBuffer]",A="[object Float32Array]",C="[object Float64Array]",j="[object Int8Array]",O="[object Int16Array]",L="[object Int32Array]",N="[object Uint8Array]",I="[object Uint8ClampedArray]",R="[object Uint16Array]",T="[object Uint32Array]",F={};F[f]=F[d]=F[k]=F[g]=F[m]=F[A]=F[C]=F[j]=F[O]=F[L]=F[w]=F[x]=F[_]=F[P]=F[N]=F[I]=F[R]=F[T]=!0,F[v]=F[y]=F[b]=F[E]=F[S]=!1;var M=Object.prototype,D=M.toString;t.exports=n},{"../lang/isArray":72,"../lang/isObject":75,"./arrayCopy":30,"./arrayEach":31,"./baseAssign":35,"./baseForOwn":42,"./initCloneArray":58,"./initCloneByTag":59,"./initCloneObject":60}],37:[function(e,t,r){function n(e,t,r){r||(r={});for(var n=-1,i=t.length;++n<i;){var o=t[n];r[o]=e[o]}return r}t.exports=n},{}],38:[function(e,t,r){function n(e,t){var r=e?e.length:0,n=[];if(!r)return n;var l=-1,c=i,u=!0,p=u&&t.length>=a?s(t):null,h=t.length;p&&(c=o,u=!1,t=p);e:for(;++l<r;){var f=e[l];if(u&&f===f){for(var d=h;d--;)if(t[d]===f)continue e;n.push(f)}else c(t,f,0)<0&&n.push(f)}return n}var i=e("./baseIndexOf"),o=e("./cacheIndexOf"),s=e("./createCache"),a=200;t.exports=n},{"./baseIndexOf":43,"./cacheIndexOf":50,"./createCache":54}],39:[function(e,t,r){function n(e,t,r,c){c||(c=[]);for(var u=-1,p=e.length;++u<p;){var h=e[u];l(h)&&a(h)&&(r||s(h)||o(h))?t?n(h,t,r,c):i(c,h):r||(c[c.length]=h)}return c}var i=e("./arrayPush"),o=e("../lang/isArguments"),s=e("../lang/isArray"),a=e("./isArrayLike"),l=e("./isObjectLike");t.exports=n},{"../lang/isArguments":71,"../lang/isArray":72,"./arrayPush":33,"./isArrayLike":61,"./isObjectLike":65}],40:[function(e,t,r){var n=e("./createBaseFor"),i=n();t.exports=i},{"./createBaseFor":53}],41:[function(e,t,r){function n(e,t){return i(e,t,o)}var i=e("./baseFor"),o=e("../object/keysIn");t.exports=n},{"../object/keysIn":81,"./baseFor":40}],42:[function(e,t,r){function n(e,t){return i(e,t,o)}var i=e("./baseFor"),o=e("../object/keys");t.exports=n},{"../object/keys":80,"./baseFor":40}],43:[function(e,t,r){function n(e,t,r){if(t!==t)return i(e,r);for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}var i=e("./indexOfNaN");t.exports=n},{"./indexOfNaN":57}],44:[function(e,t,r){function n(e,t,r,h,f){if(!l(e))return e;var d=a(t)&&(s(t)||u(t)),g=d?void 0:p(t);return i(g||t,function(i,s){if(g&&(s=i,i=t[s]),c(i))h||(h=[]),f||(f=[]),o(e,t,s,n,r,h,f);else{var a=e[s],l=r?r(a,i,s,e,t):void 0,u=void 0===l;u&&(l=i),void 0===l&&(!d||s in e)||!u&&(l===l?l===a:a!==a)||(e[s]=l)}}),e}var i=e("./arrayEach"),o=e("./baseMergeDeep"),s=e("../lang/isArray"),a=e("./isArrayLike"),l=e("../lang/isObject"),c=e("./isObjectLike"),u=e("../lang/isTypedArray"),p=e("../object/keys");t.exports=n},{"../lang/isArray":72,"../lang/isObject":75,"../lang/isTypedArray":77,"../object/keys":80,"./arrayEach":31,"./baseMergeDeep":45,"./isArrayLike":61,"./isObjectLike":65}],45:[function(e,t,r){function n(e,t,r,n,p,h,f){for(var d=h.length,g=t[r];d--;)if(h[d]==g)return void(e[r]=f[d]);var m=e[r],v=p?p(m,g,r,e,t):void 0,y=void 0===v;y&&(v=g,a(g)&&(s(g)||c(g))?v=s(m)?m:a(m)?i(m):[]:l(g)||o(g)?v=o(m)?u(m):l(m)?m:{}:y=!1),h.push(g),f.push(v),y?e[r]=n(v,g,p,h,f):(v===v?v!==m:m===m)&&(e[r]=v)}var i=e("./arrayCopy"),o=e("../lang/isArguments"),s=e("../lang/isArray"),a=e("./isArrayLike"),l=e("../lang/isPlainObject"),c=e("../lang/isTypedArray"),u=e("../lang/toPlainObject");t.exports=n},{"../lang/isArguments":71,"../lang/isArray":72,"../lang/isPlainObject":76,"../lang/isTypedArray":77,"../lang/toPlainObject":78,"./arrayCopy":30,"./isArrayLike":61}],46:[function(e,t,r){function n(e){return function(t){return null==t?void 0:t[e]}}t.exports=n},{}],47:[function(e,t,r){function n(e){return null==e?"":e+""}t.exports=n},{}],48:[function(e,t,r){function n(e,t,r){if("function"!=typeof e)return i;if(void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,o){return e.call(t,r,n,i,o)};case 5:return function(r,n,i,o,s){return e.call(t,r,n,i,o,s)}}return function(){return e.apply(t,arguments)}}var i=e("../utility/identity");t.exports=n},{"../utility/identity":86}],49:[function(e,t,r){(function(e){function r(e){var t=new n(e.byteLength),r=new i(t);return r.set(new i(e)),t}var n=e.ArrayBuffer,i=e.Uint8Array;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],50:[function(e,t,r){function n(e,t){var r=e.data,n="string"==typeof t||i(t)?r.set.has(t):r.hash[t];return n?0:-1}var i=e("../lang/isObject");t.exports=n},{"../lang/isObject":75}],51:[function(e,t,r){function n(e){var t=this.data;"string"==typeof e||i(e)?t.set.add(e):t.hash[e]=!0}var i=e("../lang/isObject");t.exports=n},{"../lang/isObject":75}],52:[function(e,t,r){function n(e){return s(function(t,r){var n=-1,s=null==t?0:r.length,a=s>2?r[s-2]:void 0,l=s>2?r[2]:void 0,c=s>1?r[s-1]:void 0;for("function"==typeof a?(a=i(a,c,5),s-=2):(a="function"==typeof c?c:void 0,s-=a?1:0),l&&o(r[0],r[1],l)&&(a=3>s?void 0:a,s=1);++n<s;){var u=r[n];u&&e(t,u,a)}return t})}var i=e("./bindCallback"),o=e("./isIterateeCall"),s=e("../function/restParam");t.exports=n},{"../function/restParam":28,"./bindCallback":48,"./isIterateeCall":63}],53:[function(e,t,r){function n(e){return function(t,r,n){for(var o=i(t),s=n(t),a=s.length,l=e?a:-1;e?l--:++l<a;){var c=s[l];if(r(o[c],c,o)===!1)break}return t}}var i=e("./toObject");t.exports=n},{"./toObject":69}],54:[function(e,t,r){(function(r){function n(e){return a&&s?new i(e):null}var i=e("./SetCache"),o=e("./getNative"),s=o(r,"Set"),a=o(Object,"create");t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./SetCache":29,"./getNative":56}],55:[function(e,t,r){var n=e("./baseProperty"),i=n("length");t.exports=i},{"./baseProperty":46}],56:[function(e,t,r){function n(e,t){var r=null==e?void 0:e[t];return i(r)?r:void 0}var i=e("../lang/isNative");t.exports=n},{"../lang/isNative":74}],57:[function(e,t,r){function n(e,t,r){for(var n=e.length,i=t+(r?0:-1);r?i--:++i<n;){var o=e[i];if(o!==o)return i}return-1}t.exports=n},{}],58:[function(e,t,r){function n(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&o.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var i=Object.prototype,o=i.hasOwnProperty;t.exports=n},{}],59:[function(e,t,r){function n(e,t,r){var n=e.constructor;switch(t){case u:return i(e);case o:case s:return new n(+e);case p:case h:case f:case d:case g:case m:case v:case y:case b:var x=e.buffer;return new n(r?i(x):x,e.byteOffset,e.length);case a:case c:return new n(e);case l:var _=new n(e.source,w.exec(e));_.lastIndex=e.lastIndex}return _}var i=e("./bufferClone"),o="[object Boolean]",s="[object Date]",a="[object Number]",l="[object RegExp]",c="[object String]",u="[object ArrayBuffer]",p="[object Float32Array]",h="[object Float64Array]",f="[object Int8Array]",d="[object Int16Array]",g="[object Int32Array]",m="[object Uint8Array]",v="[object Uint8ClampedArray]",y="[object Uint16Array]",b="[object Uint32Array]",w=/\w*$/;t.exports=n},{"./bufferClone":49}],60:[function(e,t,r){function n(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}t.exports=n},{}],61:[function(e,t,r){function n(e){return null!=e&&o(i(e))}var i=e("./getLength"),o=e("./isLength");t.exports=n},{"./getLength":55,"./isLength":64}],62:[function(e,t,r){function n(e,t){return e="number"==typeof e||i.test(e)?+e:-1,t=null==t?o:t,e>-1&&e%1==0&&t>e}var i=/^\d+$/,o=9007199254740991;t.exports=n},{}],63:[function(e,t,r){function n(e,t,r){if(!s(r))return!1;var n=typeof t;if("number"==n?i(r)&&o(t,r.length):"string"==n&&t in r){var a=r[t];return e===e?e===a:a!==a}return!1}var i=e("./isArrayLike"),o=e("./isIndex"),s=e("../lang/isObject");t.exports=n},{"../lang/isObject":75,"./isArrayLike":61,"./isIndex":62}],64:[function(e,t,r){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&i>=e}var i=9007199254740991;t.exports=n},{}],65:[function(e,t,r){function n(e){return!!e&&"object"==typeof e}t.exports=n},{}],66:[function(e,t,r){function n(e,t){e=i(e);for(var r=-1,n=t.length,o={};++r<n;){var s=t[r];s in e&&(o[s]=e[s])}return o}var i=e("./toObject");t.exports=n},{"./toObject":69}],67:[function(e,t,r){function n(e,t){var r={};return i(e,function(e,n,i){t(e,n,i)&&(r[n]=e)}),r}var i=e("./baseForIn");t.exports=n},{"./baseForIn":41}],68:[function(e,t,r){function n(e){for(var t=l(e),r=t.length,n=r&&e.length,c=!!n&&a(n)&&(o(e)||i(e)),p=-1,h=[];++p<r;){var f=t[p];(c&&s(f,n)||u.call(e,f))&&h.push(f)}return h}var i=e("../lang/isArguments"),o=e("../lang/isArray"),s=e("./isIndex"),a=e("./isLength"),l=e("../object/keysIn"),c=Object.prototype,u=c.hasOwnProperty;t.exports=n},{"../lang/isArguments":71,"../lang/isArray":72,"../object/keysIn":81,"./isIndex":62,"./isLength":64}],69:[function(e,t,r){function n(e){return i(e)?e:Object(e)}var i=e("../lang/isObject");t.exports=n},{"../lang/isObject":75}],70:[function(e,t,r){function n(e,t,r){return"function"==typeof t?i(e,!0,o(t,r,1)):i(e,!0)}var i=e("../internal/baseClone"),o=e("../internal/bindCallback");t.exports=n},{"../internal/baseClone":36,"../internal/bindCallback":48}],71:[function(e,t,r){function n(e){return o(e)&&i(e)&&a.call(e,"callee")&&!l.call(e,"callee")}var i=e("../internal/isArrayLike"),o=e("../internal/isObjectLike"),s=Object.prototype,a=s.hasOwnProperty,l=s.propertyIsEnumerable;t.exports=n},{"../internal/isArrayLike":61,"../internal/isObjectLike":65}],72:[function(e,t,r){var n=e("../internal/getNative"),i=e("../internal/isLength"),o=e("../internal/isObjectLike"),s="[object Array]",a=Object.prototype,l=a.toString,c=n(Array,"isArray"),u=c||function(e){return o(e)&&i(e.length)&&l.call(e)==s};t.exports=u},{"../internal/getNative":56,"../internal/isLength":64,"../internal/isObjectLike":65}],73:[function(e,t,r){function n(e){return i(e)&&a.call(e)==o}var i=e("./isObject"),o="[object Function]",s=Object.prototype,a=s.toString;t.exports=n},{"./isObject":75}],74:[function(e,t,r){function n(e){return null==e?!1:i(e)?u.test(l.call(e)):o(e)&&s.test(e)}var i=e("./isFunction"),o=e("../internal/isObjectLike"),s=/^\[object .+?Constructor\]$/,a=Object.prototype,l=Function.prototype.toString,c=a.hasOwnProperty,u=RegExp("^"+l.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},{"../internal/isObjectLike":65,"./isFunction":73}],75:[function(e,t,r){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=n},{}],76:[function(e,t,r){function n(e){var t;if(!s(e)||u.call(e)!=a||o(e)||!c.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var r;return i(e,function(e,t){r=t}),void 0===r||c.call(e,r)}var i=e("../internal/baseForIn"),o=e("./isArguments"),s=e("../internal/isObjectLike"),a="[object Object]",l=Object.prototype,c=l.hasOwnProperty,u=l.toString;t.exports=n},{"../internal/baseForIn":41,"../internal/isObjectLike":65,"./isArguments":71}],77:[function(e,t,r){function n(e){return o(e)&&i(e.length)&&!!j[L.call(e)]}var i=e("../internal/isLength"),o=e("../internal/isObjectLike"),s="[object Arguments]",a="[object Array]",l="[object Boolean]",c="[object Date]",u="[object Error]",p="[object Function]",h="[object Map]",f="[object Number]",d="[object Object]",g="[object RegExp]",m="[object Set]",v="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",w="[object Float32Array]",x="[object Float64Array]",_="[object Int8Array]",E="[object Int16Array]",P="[object Int32Array]",S="[object Uint8Array]",k="[object Uint8ClampedArray]",A="[object Uint16Array]",C="[object Uint32Array]",j={};j[w]=j[x]=j[_]=j[E]=j[P]=j[S]=j[k]=j[A]=j[C]=!0,j[s]=j[a]=j[b]=j[l]=j[c]=j[u]=j[p]=j[h]=j[f]=j[d]=j[g]=j[m]=j[v]=j[y]=!1;var O=Object.prototype,L=O.toString;t.exports=n},{"../internal/isLength":64,"../internal/isObjectLike":65}],78:[function(e,t,r){function n(e){return i(e,o(e))}var i=e("../internal/baseCopy"),o=e("../object/keysIn");t.exports=n},{"../internal/baseCopy":37,"../object/keysIn":81}],79:[function(e,t,r){var n=e("../internal/assignWith"),i=e("../internal/baseAssign"),o=e("../internal/createAssigner"),s=o(function(e,t,r){return r?n(e,t,r):i(e,t)});t.exports=s},{"../internal/assignWith":34,"../internal/baseAssign":35,"../internal/createAssigner":52}],80:[function(e,t,r){var n=e("../internal/getNative"),i=e("../internal/isArrayLike"),o=e("../lang/isObject"),s=e("../internal/shimKeys"),a=n(Object,"keys"),l=a?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&i(e)?s(e):o(e)?a(e):[]}:s;t.exports=l},{"../internal/getNative":56,"../internal/isArrayLike":61,"../internal/shimKeys":68,"../lang/isObject":75}],81:[function(e,t,r){function n(e){if(null==e)return[];l(e)||(e=Object(e));var t=e.length;t=t&&a(t)&&(o(e)||i(e))&&t||0;for(var r=e.constructor,n=-1,c="function"==typeof r&&r.prototype===e,p=Array(t),h=t>0;++n<t;)p[n]=n+"";for(var f in e)h&&s(f,t)||"constructor"==f&&(c||!u.call(e,f))||p.push(f);return p}var i=e("../lang/isArguments"),o=e("../lang/isArray"),s=e("../internal/isIndex"),a=e("../internal/isLength"),l=e("../lang/isObject"),c=Object.prototype,u=c.hasOwnProperty;t.exports=n},{"../internal/isIndex":62,"../internal/isLength":64,"../lang/isArguments":71,"../lang/isArray":72,"../lang/isObject":75}],82:[function(e,t,r){var n=e("../internal/baseMerge"),i=e("../internal/createAssigner"),o=i(n);t.exports=o},{"../internal/baseMerge":44,"../internal/createAssigner":52}],83:[function(e,t,r){var n=e("../internal/arrayMap"),i=e("../internal/baseDifference"),o=e("../internal/baseFlatten"),s=e("../internal/bindCallback"),a=e("./keysIn"),l=e("../internal/pickByArray"),c=e("../internal/pickByCallback"),u=e("../function/restParam"),p=u(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=n(o(t),String);return l(e,i(a(e),t))}var r=s(t[0],t[1],3);return c(e,function(e,t,n){return!r(e,t,n)})});t.exports=p},{"../function/restParam":28,"../internal/arrayMap":32,"../internal/baseDifference":38,"../internal/baseFlatten":39,"../internal/bindCallback":48,"../internal/pickByArray":66,"../internal/pickByCallback":67,"./keysIn":81}],84:[function(e,t,r){function n(e,t,r){e=i(e),t+="";var n=e.length;return r=void 0===r?n:o(0>r?0:+r||0,n),r-=t.length,r>=0&&e.indexOf(t,r)==r}var i=e("../internal/baseToString"),o=Math.min;t.exports=n},{"../internal/baseToString":47}],85:[function(e,t,r){function n(e,t,r){return e=i(e),r=null==r?0:o(0>r?0:+r||0,e.length),e.lastIndexOf(t,r)==r}var i=e("../internal/baseToString"),o=Math.min;t.exports=n},{"../internal/baseToString":47}],86:[function(e,t,r){function n(e){return e}t.exports=n},{}],87:[function(e,t,r){(function(e){function r(e,t){"use strict";var r={isRejected:function(){return!e},isFulfilled:function(){return e}};return r.isResolved=r.isFulfilled,e?Object.defineProperty(r,"value",{enumerable:!0,value:t}):Object.defineProperty(r,"reason",{enumerable:!0,value:t}),r}function n(e){"use strict";return e.prototype.spread=function(t){return this.then(function(t){return e.all(t)}).then(function(e){return t.apply(null,e)})},e.prototype.delay=function(t){return this.then(function(r){return new e(function(e){setTimeout(function(){e(r)},t)})})},e.delay=function(e,t){return void 0===t&&(t=e,e=void 0),this.resolve(e).delay(t)},e.prototype["finally"]=function(t){var r=function(){},n=new e(function(e){var r;try{r=t()}finally{e(r)}}).then(r,r);return this.then(function(e){return n.then(function(){return e})},function(e){return n.then(function(){throw e})})},e.prototype.reflect=function(){return this.then(function(e){return r(!0,e)},function(e){return r(!1,e)})},e.settleAll=function(t){var r=Array.isArray(t)?t:[t];return this.all(r.map(function(t){return e.resolve(t).reflect()}))},e.prototype.done=function(){this["catch"](function(e){a(function(){throw e})})},e}function i(e,t){"use strict";t.forEach(function(t){e.prototype[t]=function(){var r=this.__instance,n=r[t].apply(r,l(arguments));return e.resolve(n)}})}function o(e,t,r){"use strict";r.forEach(function(r){e[r]=function(){var n=t[r].apply(t,l(arguments));return e.resolve(n)}})}function s(e){"use strict";var t=function(t){var r=new e(t);Object.defineProperty(this,"__instance",{value:r})};return t.resolve=function(e){var t=this;return e&&e.__instance&&"object"==typeof e.__instance?e:new t(function(t){t(e)})},o(t,e,["all","reject","race"]),i(t,["then","catch"]),n(t)}var a=function(){"use strict";return a?a:"[object process]"==={}.toString.call(e.process)?e.process.nextTick.bind(e.process):function(e){setTimeout(e,0)}}(),l=function(){"use strict";var e=Array.prototype.slice;return function(t){return t?e.call(t):[]}}();t.exports=function(t){"use strict";var r=t||e.Promise;if(!r)throw new Error("No Promise implementation found.");if("function"!=typeof r)throw new TypeError("Not supported. The argument provided is not a constructor.");return s(r)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],88:[function(e,t,r){"use strict";var n=e("../util/util"),i=e("../util/logger-factory"),o=e("browser-bunyan"),s=e("./default-widget-model"),a=function(){this.log=i.getLogger()};a.prototype.combine=function(e){var t=this.log,r=n.cloneDeep(s);return e.forEach(function(e){n.merge(r,n.omit(e,["preferences","viewmodes"])),n.isArray(e.viewmodes)&&e.viewmodes.forEach(function(e){r.viewmodes.indexOf(e)<0&&r.viewmodes.push(e)}),n.isArray(e.preferences)&&e.preferences.forEach(function(e){for(var t=!1,i=0;i<r.preferences.length&&!t;i++)r.preferences[i].name===e.name&&(n.merge(r.preferences[i],e),t=!0);t||r.preferences.push(n.cloneDeep(e))})}),t.debug("Aggregated model created."),t.level()<=o.TRACE&&t.trace("Aggregated model is this:\n %s",JSON.stringify(r,null,"	")),r},t.exports=a},{"../util/logger-factory":121,"../util/util":123,"./default-widget-model":91,"browser-bunyan":1}],89:[function(e,t,r){"use strict";var n=function(e){};n.prototype.parse=function(e){throw new Error("ConfigParser#parse must be overridden.")},t.exports=n},{}],90:[function(e,t,r){"use strict";var n=function(e){};n.prototype.read=function(e){throw new Error("ConfigReader#read must be overridden.")},t.exports=n},{}],91:[function(e,t,r){"use strict";var n={id:null,version:null,height:null,width:null,viewmodes:[],name:null,shortName:null,description:null,author:null,authorHref:null,authorEmail:null,preferences:[],license:null,licenseHref:null,icons:[],content:{src:"index.html",type:"text/html",encoding:"UTF-8"},features:[]};t.exports=n},{}],92:[function(e,t,r){"use strict";var n=e("./widget-renderer"),i=e("../util/logger-factory"),o=e("../util/util"),s=e("promise-extensions")(Promise),a=e("../util/model-expression-interpreter"),l=function(){this.preprocessorMap={},this.log=i.getLogger()};l.prototype=Object.create(n.prototype),l.prototype.render=function(e,t,r){var n=this;try{t.preferences.forEach(function(e){Object.defineProperty(t.preferences,e.name,{value:e,writable:!1,enumerable:!1,configurable:!0})});var i=Object.keys(t.datasources||{}).map(function(e){var r=t.datasources[e],i=o.assign({},t),s=new a(i);return r.params=r.params.map(function(e){return{name:e.name,value:s.run(e.value)}}),n._fetchDatasource(r)}),l=s.all(i),c=t.preferences.filter(function(e){return"messages"===e.name})[0],u=c&&c.value,p=u?this._fetchJson(u):{},h=this.fetchStartFile(e,t,r);return s.all([h,l,p]).spread(function(e,r,i){var a=r.reduce(function(e,t){return e[t.name]=t.data,e},{}),l=o.assign({},t,{datasources:a});return s.resolve(n.preprocess(t,e,l,i))}).then(function(e){return s.resolve(n.process(t,r,e))})}catch(f){return s.reject(f)}},l.prototype._fetchJson=function(t){var r=o.isUrlForFile(t)?e("../util/fetch-file"):fetch;
return r(t).then(function(e){return e.json()})},l.prototype._fetchDatasource=function(e){var t=this._buildDatasourceUrl(e);return this._fetchJson(t).then(function(t){return{name:e.name,data:t}})},l.prototype._buildDatasourceUrl=function(e){var t=e.uri,r=e.params,n=t,i=t.indexOf("?")>=0,o="";return r&&r.length>0&&(o=r.map(function(e){return encodeURIComponent(e.name)+"="+encodeURIComponent(e.value)}).join("&"),n+=(i?"&":"?")+o),n},l.prototype.fetchStartFile=function(e,t,r){throw new Error("PreprocessingRenderer#fetchStartFile must be overridden.")},l.prototype.preprocess=function(e,t,r,n){var i=e.content.type;if(t&&this.preprocessorMap.hasOwnProperty(i)){var o=this.preprocessorMap[i];return this.log.debug("Applying preprocessor for [%s] for [%s (%s)] ",o.name,e.content.src,i),o.process(e,t,r,n)}return t},l.prototype.process=function(e,t,r,n){throw new Error("PreprocessingRenderer#process must be overridden.")},l.prototype.addPreprocessor=function(e,t){if(this.preprocessorMap.hasOwnProperty(e)){var r=this.preprocessorMap[e].name;this.log.warn("Overriding a previously added preprocessor [%s] for the mime type [%s]",r,e)}t.name=t.name||"Anonymous preprocessor",this.log.debug("Adding the preprocessor [%s] for start files with the mime type [%s]",t.name,e),this.preprocessorMap[e]=t},t.exports=l},{"../util/fetch-file":119,"../util/logger-factory":121,"../util/model-expression-interpreter":122,"../util/util":123,"./widget-renderer":98,"promise-extensions":87}],93:[function(e,t,r){"use strict";var n=e("promise-extensions")(Promise),i=e("../util/util"),o=e("../util/logger-factory"),s=e("./widget-renderer"),a=e("./config-reader"),l=e("./config-parser"),c=e("./widget-storage"),u=e("./widget-instance-factory"),p=e("./widget-feature-augmenter"),h=e("./config-aggregator"),f=e("./widget-error"),d={POST_READ:"postRead",PRE_RENDER:"preRender",POST_RENDER:"postRender"},g={html:"text/html",hbs:"text/x-handlebars-template",handlebars:"text/x-handlebars-template","soy.js":"application/x-soy","hbs.js":"application/x-handlebars-template"},m=function(e){this.config=e,this.locale=this.config.locale||null,this.plugins=[],this.features=[],this.widgetInstanceFactory=new u,this.widgetFeatureAugmenter=new p,this.log=o.getLogger();var t=v(this.config);if(t.warnings.length&&this.log.warn(t.warnings.join("\n")),t.errors.length){var r="Problems with widget config:\n	"+t.errors.join("	\n");throw new f(r)}};m.prototype.start=function(){var e=(new Date).getTime(),t=this.log,r=this.config,o=this.locale,s=this.plugins,a=this.features,l=r.initialModel||{},c=r.widgetPath,u=r.configFile||"config.xml";""===c&&(c=".");var p=this.widgetInstanceFactory,m=this.widgetFeatureAugmenter;t.info("Starting widget @ %s...",c),t.info("Entering READ phase.");var v=Promise.resolve({});return r.reader&&(v=v.then(function(){var e=(i.endsWith(c,"/")?c:c+"/")+u;return r.reader.read(e)})),r.parser&&(v=v.then(function(e){return r.parser.parse(e)})),n.all([l,v]).then(function(e){t.debug("Aggregating models...");var r=new h({log:t});return r.combine(e)}).then(function(e){return e.content.type&&e.content.type!==g.html||(e.content.type=b(e),t.debug("The start file type was inferred as [%s]",e.content.type)),t.info("Invoking plugins for POST READ phase..."),y(s,t,d.POST_READ,[e])}).spread(function(e){t.info("Widget config read for: %s (%s).",e.id,e.name),t.info("Entering INSTANCE CREATION phase...");var n=r.renderer,s=r.storage;e.id=e.id||i.randomId(),s.init(e.name,e.preferences,e.type),t.debug("Widget storage initialized.");var l=p.makeWidget(e,s,n,o);return t.debug("Widget instance created."),m.addFeaturesToWidget(l,a,e),t.debug("%s feature(s) added to widget.",a.length),[l,n,e]}).spread(function(e,r,n){t.info("Invoking plugins for PRE RENDER phase...");var i=y(s,t,d.PRE_RENDER,[e,r,n]);return i}).spread(function(e,r,n){t.info("Entering RENDERING phase...");var i=r.render(c,n,e);return[e,r,n,i]}).spread(function(e,r,n){t.info("Invoking plugins for POST RENDER phase...");var i=y(s,t,d.POST_RENDER,[e,r,n]);return i}).spread(function(r,n,i){var o={},s=(new Date).getTime();return o.time=s-e,o.id=i.id,o.message="Widget rendering for ["+i.name+"] completed in "+o.time+"ms.",o.areaNodes="function"==typeof n.getAreaNodes?n.getAreaNodes():null,t.info(o.message),o})["catch"](function(e){throw t.error(e),new f(e,"An error occurred whilst starting the widget.")})},m.prototype.addFeature=function(e){return this.log.info("Adding feature for widget, %s",e.name||"[Anonymous feature]"),"object"==typeof e&&this.features.push(e),this},m.prototype.addPlugin=function(e){return this.log.info("Adding plugin for widget, %s",e.name||"[Anonymous plugin]"),"object"==typeof e&&this.plugins.push(e),this},m.prototype.destroy=function(){this.plugins.forEach(function(e){"function"==typeof e.destroy&&e.destroy()}),this.config.renderer.destroy()};var v=function(e){var t={warnings:[],errors:[]};return"string"!=typeof e.widgetPath?t.errors.push("You must supply a valid widget path"):e.widgetPath.indexOf("config.xml")>=0&&t.errors.push("Please supply the base path of your widget, not its config.xml path"),e.initialModel||e.reader||t.warnings.push("No initial model or widget reader was provided. Can't get any config"),e.reader&&!e.parser&&t.warnings.push("A widget reader was provided, but not a widget config parser"),!e.reader||e.reader instanceof a||t.warnings.push("The configured widget reader might not be a valid ConfigReader instance"),!e.parser||e.parser instanceof l||t.warnings.push("The configured widget parser might not be a valid ConfigParser instance"),e.storage?e.storage instanceof c||t.warnings.push("The configured widget storage might not be a valid WidgetStorage instance"):t.errors.push("No widget storage is configured"),e.renderer?e.renderer instanceof s||t.warnings.push("The configured widget renderer might not be a valid WidgetRenderer instance"):t.errors.push("No widget renderer is configured"),t},y=function(e,t,r,i){var o=n.all(i);return e.filter(function(e){return"function"==typeof e[r]}).forEach(function(e){var n,i=e.name||"Anonymous plugin";o=o.then(function(t){n=t;var i=e[r].apply(e,t);return[i,t]}).spread(function(e,t){return void 0===e?t:[e].concat(t.slice(1))})["catch"](function(e){var o="Failed to invoke plugin ["+i+"] for ["+r+"]";return t.error(e,o),n})}),o},b=function(e){var t=e.content.src.match(/\.([A-z0-9]+)$/);return t&&t[1]&&g[t[1]]||e.content.type};t.exports=m},{"../util/logger-factory":121,"../util/util":123,"./config-aggregator":88,"./config-parser":89,"./config-reader":90,"./widget-error":95,"./widget-feature-augmenter":96,"./widget-instance-factory":97,"./widget-renderer":98,"./widget-storage":99,"promise-extensions":87}],94:[function(e,t,r){"use strict";t.exports={STARTFILE_NOT_FOUND:"STARTFILE_NOT_FOUND"}},{}],95:[function(e,t,r){function n(e){var t,r,i,o,s;return this instanceof n?(e instanceof Error||"object"==typeof e?t=Array.prototype.slice.call(arguments,1):(t=Array.prototype.slice.call(arguments,0),e=void 0),e&&e.strict||(t=t.map(function(e){return null===e?"null":void 0===e?"undefined":e})),s=t.length>0?t.join("; "):"",this.jse_shortmsg=s,this.jse_summary=s,e&&(i=e.cause,i&&e.cause instanceof Error||(i=e),i&&i instanceof Error&&(this.jse_cause=i,this.jse_summary+=": "+i.message)),this.message=this.jse_summary,Error.call(this,this.jse_summary),Error.captureStackTrace&&(o=e?e.constructorOpt:void 0,o=o||arguments.callee,Error.captureStackTrace(this,o)),this):(t=Array.prototype.slice.call(arguments,0),r=Object.create(n.prototype),n.apply(r,arguments),r)}n.prototype=Error.prototype,n.prototype.name="Widget Error",n.prototype.toString=function(){var e=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e+=": "+this.message),e},n.prototype.cause=function(){return this.jse_cause},n.prototype.hasCode=function(e){if(!e)return!1;var t="[object Array]"!==Object.prototype.toString.call(e)?[e]:e;if(0===t.length)return!1;for(var r=this,n=!1;r;){if(r.code&&t.indexOf(r.code)>-1){n=!0;break}r=r.cause()}return n},t.exports=n},{}],96:[function(e,t,r){"use strict";var n=e("./widget-error"),i=function(){};i.prototype.addFeaturesToWidget=function(e,t,r){function i(e,t){for(var r=0;r<t.length;r++)if(e===t[r].name)return t[r];return null}t=t||[];var o={};if(r.features&&r.features.length)for(var s=0;s<r.features.length;s++){var a=r.features[s],l=i(a.name,t);if(l)"function"==typeof l._init&&l._init(a.params,e,r),Object.defineProperty(o,l.name,{enumerable:!0,value:l});else if(a.required){var c="Unable to render widget. A required feature is not available ("+a.name+")";throw new n(c)}}return Object.defineProperty(e,"features",{enumerable:!1,value:o}),e},t.exports=i},{"./widget-error":95}],97:[function(e,t,r){"use strict";var n=e("../util/util"),i=["author","version","id","authorEmail","authorHref","locale"],o=["description","name","shortName"],s=function(){};s.prototype.makeWidget=function(e,t,r,s){var a={};return i.forEach(function(t){Object.defineProperty(a,t,{enumerable:!0,value:"undefined"!=typeof e[t]?e[t]:""})}),o.forEach(function(t){var r=null;if(s&&e._lang){var i=n.getDescendantLocales(s),o=i.map(function(t){return e._lang[t]}),l=function(e){var r;if(e.length){var n=e.pop();if(n&&(r=n[t]),"string"!=typeof r)return l(e)}return r};r=l(o)}if("string"!=typeof r&&"string"==typeof e[t])r=e[t];else if("string"!=typeof r&&e.defaultlocale){var c=e._lang[e.defaultlocale];c&&(r=c[t])}Object.defineProperty(a,t,{enumerable:!0,value:"string"==typeof r?r:""})}),Object.defineProperty(a,"width",{enumerable:!0,get:function(){return r.getWidth()}}),Object.defineProperty(a,"height",{enumerable:!0,get:function(){return r.getHeight()}}),Object.defineProperty(a,"preferences",{enumerable:!1,value:t}),a},t.exports=s},{"../util/util":123}],98:[function(e,t,r){"use strict";function n(e,t){if(i.isUrlAbsolute(t)||i.isUrlSiteRelative(e)&&i.isUrlSiteRelative(t))return t;var r=!i.endsWith(e,"/")&&!i.startsWith(t,"/");return r?e+"/"+t:e+t}var i=e("../util/util"),o=function(e){};o.prototype.render=function(e,t,r){throw new Error("WidgetRenderer#render must be overridden.")},o.prototype.getWidth=function(){throw new Error("WidgetRenderer#getWidth must be overridden.")},o.prototype.getHeight=function(){throw new Error("WidgetRenderer#getHeight must be overridden.")},o.prototype.getWidgetNode=function(){throw new Error("WidgetRenderer#getWidgetNode must be overridden.")},o.prototype.getParentNode=function(){throw new Error("WidgetRenderer#getContainerNode must be overridden.")},o.prototype.setParentNode=function(){throw new Error("WidgetRenderer#setContainerNode must be overridden.")},o.prototype.getAreaNodes=function(){if(this.isContainer)throw new Error("WidgetRenderer#getAreaNodes must be overridden.")},o.prototype.destroy=function(){throw new Error("WidgetRenderer#destroy must be overriden.")},o.prototype.getType=function(){return"text/html"},o.prototype.getStartFilePaths=function(e,t){var r,i=[];return t.content&&t.content.src?(r=n(e,t.content.src),i.push(r)):(r=n(e,"index.html"),i.push(r),this.locale&&(r=n(e,"locales/"+this.locale+"/index.html"),i.push(r))),i},t.exports=o},{"../util/util":123}],99:[function(e,t,r){"use strict";function n(e){}n.prototype.init=function(e,t){throw new Error("WidgetStorage#init must be overridden.")},n.prototype.getItem=function(e){throw new Error("WidgetStorage#getItem must be overridden.")},n.prototype.setItem=function(e,t,r){throw new Error("WidgetStorage#setItem must be overridden.")},n.prototype.removeItem=function(e){throw new Error("WidgetStorage#removeItem must be overridden.")},n.prototype.clear=function(e){throw new Error("WidgetStorage#removeItem must be overridden.")},n.prototype.key=function(e){throw new Error("WidgetStorage#key must be overridden.")},t.exports=n},{}],100:[function(e,t,r){"use strict";var n=e("../core/widget-engine"),i=e("../strategies/parser/js-object-parser"),o=e("../strategies/renderer/html5-seamless-renderer"),s=e("../strategies/renderer/html5-container-renderer"),a=e("../strategies/storage/html5-local-storage"),l=e("../plugins/cxp-additions-plugin"),c=e("../strategies/renderer/preprocessors/handlebars-preprocessor"),u=e("../strategies/renderer/preprocessors/soy-preprocessor"),p=e("../util/logger-factory"),h=null,f=function(e){return h||(h=new c(e))},d=null,g=function(e){return d||(d=new u(e))},m=function(e){p.createLogger({parentLog:e.log,loggerName:"container",logLevel:e.logLevel,appendId:!0})};m.prototype.init=function(e){var t=e.widgetUrl,r=e.widgetEl,o=e.locale||null,c=e.useFolderLocalization||!1,u=e.reader||null,p=e.parser||new i,h=e.configVars||{},d=e.renderer||new s(r,{locale:o,configVars:h,useFolderLocalization:c}),m=f(h);d.addPreprocessor("text/x-handlebars-template",m),d.addPreprocessor("application/x-handlebars-template",m);var v=g(h);d.addPreprocessor("application/x-soy",v);var y=e.storage||new a;this.widgetEngine=new n({configFile:e.configFile,widgetPath:t,locale:e.locale,initialModel:e.initialModel,renderer:d,parser:p,reader:u,storage:y}),this.widgetEngine.addPlugin(new l({path:t,locale:e.locale}))},m.prototype.start=function(){return this.widgetEngine.start()},m.prototype.addPlugin=function(e){return this.widgetEngine.addPlugin(e),this},m.prototype.addFeature=function(e){return this.widgetEngine.addFeature(e),this},m.prototype.getLogger=function(){return this.log},m.prototype.destroy=function(){return this.widgetEngine.destroy()};var v=function(e){p.createLogger({parentLog:e.log,loggerName:"widget",logLevel:e.logLevel,appendId:!0})};v.prototype.init=function(e){var t=e.widgetUrl,r=e.widgetEl,s=e.locale||null,c=e.useFolderLocalization||!1,u=e.reader||null,p=e.parser||new i,h=e.configVars||{},d=e.renderer||new o(r,{locale:s,configVars:h,useFolderLocalization:c}),m=f(h);d.addPreprocessor("text/x-handlebars-template",m),d.addPreprocessor("application/x-handlebars-template",m);var v=g(h);d.addPreprocessor("application/x-soy",v);var y=e.storage||new a;this.widgetEngine=new n({configFile:e.configFile,widgetPath:t,parser:p,reader:u,renderer:d,storage:y,locale:e.locale,initialModel:e.initialModel}),this.widgetEngine.addPlugin(new l({path:t,locale:e.locale}))},v.prototype.start=function(){return this.widgetEngine.start()},v.prototype.addPlugin=function(e){return this.widgetEngine.addPlugin(e),this},v.prototype.addFeature=function(e){return this.widgetEngine.addFeature(e),this},v.prototype.getLogger=function(){return this.log},v.prototype.destroy=function(){return this.widgetEngine.destroy()},t.exports={WidgetEngine:v,ContainerEngine:m}},{"../core/widget-engine":93,"../plugins/cxp-additions-plugin":108,"../strategies/parser/js-object-parser":110,"../strategies/renderer/html5-container-renderer":111,"../strategies/renderer/html5-seamless-renderer":112,"../strategies/renderer/preprocessors/handlebars-preprocessor":113,"../strategies/renderer/preprocessors/soy-preprocessor":114,"../strategies/storage/html5-local-storage":116,"../util/logger-factory":121}],101:[function(e,t,r){"use strict";function n(e){e=e||{},this.opts=e,this.name="Backbase Format",this.portalConf=e.portalConf||{},this.contextRoot=e.contextRoot||"",this.remoteContextRoot=e.remoteContextRoot||"",this.csrfToken=e.csrfToken||null,this.makeIncludedRefsAbsolute=e.makeIncludedRefsAbsolute||!1,this.window="undefined"==typeof window?e.window:window,this.log=o.getLogger(),this.opts.log=this.log}function i(e){for(var t=e;t;){if("function"==typeof t.hasAttribute&&t.hasAttribute("data-chrome"))return t;t=t.parentNode}return null}var o=e("../util/logger-factory"),s=e("promise-extensions")(),a=e("./backbase-format/widget-handlers"),l=e("./backbase-format/legacy-widget-api"),c=e("./backbase-format/include-object"),u=Array.prototype.slice.call.bind(Array.prototype.slice);t.exports=n,n.prototype.postRead=function(e){function t(t){return e.preferences.some(function(e){return e.name===t})}return t("viewNamespace")&&e.content.config&&!e.content.src&&(e.content.type="application/x-soy",e.content.src=e.content.config),e},n.prototype.preRender=function(e,t,r){this.log.info("Backbase format plugin is running in PRE RENDER phase..."),e.preferences.getItem("src")||e.preferences.defineItem({name:"src",value:r.content.src,readonly:!1}),e.preferences.getItem("thumbnailUrl")||e.preferences.defineItem({name:"thumbnailUrl",value:r.icons[0],readonly:!1}),e.preferences.getItem("title")||e.preferences.defineItem({name:"title",value:r.title,readonly:!1});var n=l.buildWidget(e,r,this.log,this.portalConf.tags),i=n.preferences.eventTarget?n.preferences.eventTarget.indexOf(e):-1;return i>-1&&(n.preferences.eventTarget[i]=n),this.log.info("Backbase format plugin PRE RENDER done."),n},n.prototype.postRender=function(e,t,r){var n,o=this,p=this.log,h=this.window;p.info("Backbase format plugin is running in POST RENDER phase..."),l.applyPresentationApi(e,t,r,p);var f=u(e.body.getElementsByTagName("g:include")),d=f.map(function(t){return new c(t,e,r,o.opts)});return d.length?(e.includes=d,e.refreshIncludes=function(){var e=this.includes.map(function(e){return e.refresh()});return s.settleAll(e).then(function(e){var t=e.filter(function(e){return e.isRejected()}).length;t>0&&p.warn("%s includes failed to resolve.",t)})},d.forEach(function(e,t){var r=f[t];r.parentNode.replaceChild(e.htmlNode,r)}),n=e.refreshIncludes()):n=s.resolve(),n.then(function(){var t=i(e.body)||e.body;return a.handleLoad(h,e,p),a.handlePrefModified(h,e,p),a.handleMaximize(h,e,t,p),a.handleRestore(h,e,t,p),p.info("Backbase format plugin POST RENDER done."),e})}},{"../util/logger-factory":121,"./backbase-format/include-object":103,"./backbase-format/legacy-widget-api":105,"./backbase-format/widget-handlers":107,"promise-extensions":87}],102:[function(e,t,r){"use strict";function n(e,t){var r=e.replace(/\/[^\/]+$/,"");r=r.replace(/\$\(contextRoot\)/,t);var n=l.isUrlAbsolute(e)?e:r+"/"+e;return n.substring(0,n.lastIndexOf("/")+1)}function i(e,t){var r=new DOMParser,n=r.parseFromString(e,"text/html"),i=u(n.getElementsByTagName("img"));return i.forEach(function(e){var r=e.getAttribute("src");r&&l.isUrlSiteRelative(r)&&e.setAttribute("src",o(t,r))}),n.body.innerHTML}function o(e,t){var r,n;for(r=1;r<Math.min(e.length,t.length)&&(n=e.substr(-1*r,r),0!==t.indexOf(n));r++);var i=n?e.substr(0,e.length-n.length):e;return c.resolve(i,t)}function s(e,t){function r(e,t){return t=t[e.shift()],e.length>0&&t&&"object"==typeof t?r(e,t):t}var n=e.split(".");return r(n,t)}function a(e){return void 0===e||null===e||""===e}var l=e("../../util/util"),c=e("url"),u=Array.prototype.slice.call.bind(Array.prototype.slice);t.exports={getStartFileFolder:n,makeReferenceAbsolute:i,resolveExpression:s,isEmpty:a,convertToArray:u}},{"../../util/util":123,url:131}],103:[function(e,t,r){(function(r){"use strict";function n(e,t,n,i){i=i||{};var o=i.remoteContextRoot||"",l=i.contextRoot||"",c={replaceRegex:/\$\{([a-zA-Z0-9-_]+)\}/,log:i.log,startFileFolder:s.getStartFileFolder(n.content.src,l),remoteContextRoot:o,contextRoot:o||l,csrfToken:i.csrfToken,makeIncludedRefsAbsolute:i.makeIncludedRefsAbsolute};Object.defineProperty(this,"_config",{value:c}),this.widget=t,this.uri={template:e.getAttribute("src")},this.proxy="true"===e.getAttribute("proxy"),this.method=e.getAttribute("method")||"GET";var u=r.document.createElement("div");u.className="bp-g-include",this.htmlNode=u;var p=new a(n,i);this.params=p.buildParameters(this,e)}var i=e("../../util/util"),o=e("browser-bunyan"),s=e("./include-helpers"),a=e("./include-param-builder"),l=r.fetch,c=r.FormData;t.exports=n,n.prototype.setURI=function(e){e&&"string"==typeof e&&(this.uri.template=e)},n.prototype.getContentURI=function(){var e=this.uri.template;if(!e)return"";var t=this._config,r=this;return e=e.replace(t.replaceRegex,function(e,t){return r.widget.getPreference(t)}),e=e.replace("$(contextRoot)",t.contextRoot),i.isUrlDocumentRelative(e)&&(console.log("=========== ",t.startFileFolder),e=t.startFileFolder+e,t.log.debug("g:include src after resolution is [%s]",e)),e},n.prototype.refresh=function(){var e=this._config,t=e.log,r=this._getRequestParams(),n=this._resolveRequestUrl(r),i=this._getRequestOptions(r);if(t.level()<=o.DEBUG){var a=JSON.stringify(i,null,"	");t.debug("Making g:include http request to [%s] with fetch opts: [%s]",n,a)}return l(n,i).then(function(e){return t.debug("g:include request to [%s] completed with status: %s",n,e.status),e.status>=200&&e.status<300?Promise.resolve(e.text()):Promise.reject(e.statusText)})["catch"](function(e){return"Unable to resolve g:include ( "+e+" )"}).then(function(r){return t.trace("Received html response:\n%s",r),e.makeIncludedRefsAbsolute&&e.remoteContextRoot&&(r=s.makeReferenceAbsolute(r,e.remoteContextRoot)),this.htmlNode.innerHTML=r,this.htmlNode.setAttribute("data-src",n),this.htmlNode}.bind(this))},n.prototype._getRequestParams=function(){var e=[];if(this.proxy){e=this.params.filter(function(e){return"proxy"===e.destination});var t=this.getContentURI();if(t){var r=this.params.filter(function(e){return"target"===e.destination}).map(function(e){return e.toQueryString()}).filter(function(e){return!!e}).join("&"),n={name:"url",getQueryParams:function(){return[{name:this.name,value:t+(-1!==t.indexOf("?")?"&":"?")+r}]},toQueryString:function(){var e=this.getQueryParams()[0];return e.name+"="+encodeURIComponent(e.value)}};e.push(n)}}else e=this.params.filter(function(e){return"target"===e.destination});return e},n.prototype._resolveRequestUrl=function(e){var t=this.proxy?this._config.remoteContextRoot+"/proxy":this.getContentURI();if(this.method&&"POST"!==this.method.toUpperCase()){var r=e.map(function(e){return e.toQueryString()}).join("&");t+=(t.indexOf("?")>=0?"&":"?")+r}return t},n.prototype._getRequestOptions=function(e){var t=this._config,r={credentials:"same-origin"};if(this.method&&"POST"===this.method.toUpperCase()){r.method=this.method,r.headers={},r.body=this._constructFormData(e);var n=t.csrfToken;n&&(r.headers[n.name]=n.value)}return r},n.prototype._constructFormData=function(e){var t=new c;return e.reduce(function(e,t){return e.concat(t.getQueryParams())},[]).forEach(function(e){t.append(e.name,e.value)}),t},["getContentIterator","hasContent","setContent"].forEach(function(e){n.prototype[e]=function(){this._config.log.warn("%s method is no longer supported in CXP6",e)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../util/util":123,"./include-helpers":102,"./include-param-builder":104,"browser-bunyan":1}],104:[function(e,t,r){"use strict";function n(e,t){this._widgetModel=e,this._log=t.log,this._remoteContextRoot=t.remoteContextRoot||"",this._contextRoot=t.contextRoot||"",this._paramFactoryMap={"g:http-param":this._buildHttpParam,"g:http-proxy-param":this._buildHttpProxyParam,"g:http-preference-param":this._buildPreferenceParam,"g:http-preference-param-map":this._buildPreferenceParamMap}}function i(e,t,r,n){this.name={template:e.getAttribute("name")},this.value={template:e.getAttribute("value")},this.destination=n||"target",this.method=(e.getAttribute("method")||t.method||"GET").toUpperCase(),Object.defineProperty(this,"_include",{value:t}),Object.defineProperty(this,"_log",{value:r})}function o(e,t,r,n){i.call(this,e,t,r);var o=e.getAttribute("dataType")||e.getAttribute("datatype");Object.defineProperty(this,"_typeName",{value:o});var s=n.preferences||[];Object.defineProperty(this,"_prefs",{value:s.filter(function(e){return e.type===o}).map(function(e){return e.name})})}function s(e,t,r){i.call(this,e,t,r)}function a(e,t,r,n,o){var s=n?"proxy":"target";i.call(this,e,t,r,s),Object.defineProperty(this,"_replaceRegex",{value:/\$\{([a-zA-Z0-9-_]+)\}/}),Object.defineProperty(this,"_contextRoot",{value:o})}var l=e("./include-helpers");t.exports=n,n.prototype.buildParameters=function(e,t){var r=this,n=this._flattenElementTree(t).filter(function(e){var t=e.nodeName.toLowerCase();return t in r._paramFactoryMap}).map(function(t){var n=t.nodeName.toLowerCase(),i=r._paramFactoryMap[n];return i.call(r,t,e)}).filter(function(e){return!!e});return n.forEach(function(e){["getName","getValues"].forEach(function(t){e[t]=function(){this._log.warn("%s method is no longer supported in CXP6",t)}})}),n},n.prototype._flattenElementTree=function(e){for(var t=[],r=e.firstChild;r;)1===r.nodeType&&t.push(r),r=r.hasChildNodes()?r.firstChild:r.nextSibling;return t},n.prototype._buildHttpParam=function(e,t,r){var n=this._remoteContextRoot||this._contextRoot,i=new a(e,t,this._log,r,n);return i.value.template?i:null},n.prototype._buildHttpProxyParam=function(e,t){return this._buildHttpParam(e,t,!0)},n.prototype._buildPreferenceParam=function(e,t){var r=new s(e,t,this._log);return r.name.template?r:null},n.prototype._buildPreferenceParamMap=function(e,t){var r=new o(e,t,this._log,this._widgetModel);return r._typeName?r:null},i.prototype.getQueryParams=function(){return[]},i.prototype.toQueryString=function(){return this.getQueryParams().map(function(e){return e.name+"="+encodeURIComponent(e.value)}).join("&")},o.prototype=Object.create(i.prototype),o.prototype.getQueryParams=function(){var e=this._typeName,t=this;return this._prefs.map(function(r){return{name:e+"."+r,value:t._include.widget.getPreference(r)}})},s.prototype=Object.create(i.prototype),s.prototype.getQueryParams=function(){var e=this.name?this.name.template:null;if(l.isEmpty(e))return[];var t=this._include.widget.getPreference(e);return l.isEmpty(t)&&this._log.warn("Failed to resolve g:include parameter value. Parameter - [%s]",e),[{name:e,value:t}]},a.prototype=Object.create(i.prototype),a.prototype.getQueryParams=function(){var e=this.name?this.name.template:null,t=this.value?this.value.template:null,r=t,n=this._include.widget,i=this._contextRoot;if(l.isEmpty(e)||l.isEmpty(t))return[];if(t=t.replace(this._replaceRegex,function(e,t){return"contextRoot"===t?i:n.getPreference(t)}),0===t.indexOf("__WIDGET__")){var o=t.split(".").filter(function(e,t){return 0!==t}).join(".");t=l.resolveExpression(o,n),l.isEmpty(t)&&this._log.warn("Failed to resolve g:include parameter value. Parameter - [%s], unresolved value - [%s], resolved value - [%s]",e,r,t)}return[{name:e,value:t}]}},{"./include-helpers":102}],105:[function(e,t,r){(function(r,n){"use strict";function i(e,t,r,n){var i="backbaseWidget",o=u.cloneDeep(e);return o.width=e.width,o.height=e.height,o.preferences=e.preferences,o.features=e.features,o.id=t.id||Math.random().toString(36).substr(2,5),o.name=t.name,o.nodeType=1,o.nodeValue=i,o.margins={top:0,right:0,bottom:0,left:0},o.myDefinition={sUrl:t.content.src},o.nodeName=i,o.tagName=i,o.tags=u.isArray(n)?n:[],o.model=s(o,t),h(o,r),a(o),o.addEventListener&&o.dispatchEvent&&o.addEventListener("storage",function(e){r.debug("Chaining StorageEvent to Backbase 'PrefModified' event...");var t="PrefModified",n=new f(t);n.initStorageEvent(t,!1,!1,e.key,e.oldValue,e.newValue,e.url,o.preferences),n.attrName=e.key,n.prevValue=e.oldValue,o.model.dispatchEvent(n)}),o}function o(e,t,r,i){var o=e.body||t.getWidgetNode(),s=o.getAttribute("g:onload");if(s){var a=n.document.createElement("div"),l=o.parentNode,u=o.nextSibling;a.appendChild(o),a.className="bp-widget-body",u?l.insertBefore(a,u):l.appendChild(a),e.body=a}e.htmlNode=c(o),e.refreshHtml=function(){var e=this.features&&this.features.cxp;e?e.render.rerenderItem(r.id,r.name,r):i.warn('A widget is required to have "CXP" feature in order to be able to refresh its view.')}}function s(e,t){var i={jxid:"VIEW-"+t.name,localName:"Widget",name:t.name,tag:"widget",tagName:"Widget",contextItemName:e.features&&e.features.cxp&&e.features.cxp.config?e.features.cxp.config.get("portalName"):null,extendedItemName:t.extendedItemName||null,parentItemName:t.parentItemName||null,securityProfile:t.securityProfile||null,uuid:t.id||null,preferences:l(e.preferences),tags:u.isArray(t.tags)?t.tags:[],addEventListener:p.addEventListener,removeEventListener:p.removeEventListener,dispatchEvent:p.dispatchEvent};return i.save=function(e){var t=this;r.nextTick(function(){if("function"==typeof e){var r={contextItemName:t.contextItemName,name:t.name,preferences:t.preferences,tag:t.tag},i={status:204,statusText:"No Content",readyState:4};e.call(n,r,i)}})},i.getPreference=function(t){return e.preferences.getItem(t)},i.setPreference=function(t,r){e.preferences.setItem(t,r)},i}function a(e){e.getPreference=function(e){return this.preferences.getItem(e)},e.getPreferenceFromParents=e.getPreference,e.getAreaPreference=function(){return this.preferences.getItem("area")||0},e.getOrderPreference=function(){return this.preferences.getItem("order")},e.setPreference=function(e,t){this.preferences.setItem(e,t)},e.getDefinition=function(){return e.myDefinition},e.setAreaPreference=function(e){this.preferences.setItem("area",e)},e.setOrderPreference=function(e){this.preferences.setItem("order",e)}}function l(e){return e._items}function c(e){for(var t=e;t;){if("function"==typeof t.hasAttribute&&t.hasAttribute("data-chrome"))return t;t=t.parentNode}return null}var u=e("../../util/util"),p=e("event-target"),h=e("./warn-deprecated-access"),f=e("../../strategies/storage/storage-event");t.exports={buildWidget:i,applyPresentationApi:o}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../strategies/storage/storage-event":117,"../../util/util":123,"./warn-deprecated-access":106,_process:126,"event-target":2}],106:[function(e,t,r){"use strict";function n(e,t,r){return function(){var n="COMPATIBILITY: %s is a widget %s that is no longer supported in CXP6";e.warn(n,t,r?"method":"property")}}function i(e,t){var r=o.reduce(function(e,r){return e[r]={enumerable:!0,get:n(t,r),set:n(t,r)},e},{});return Object.defineProperties(e,r),s.reduce(function(e,r){return e[r]=n(t,r,!0),e},e),e}t.exports=i;var o=["attributes","childNodes","cls_custom","cnBase","firstChild","flex","htmlArea","htmlDoc","htmlFoot","htmlHead","lastChild","layout","local_listeners","localName","namespaceURI","nextSibling","node","ownerDocument","parentNode","perspective","prefix","previousSiblings"],s=["appendChild","cloneNode","createDisplay","createPerspective","destroy","disableDesignMode","dragIsTarget","enableDesignMode","getAreaOrderedChildren","getAttribute","getAttributeNS","getClassID","getCurrentPerspective","getDisplay","getDisplayEventTarget","getDisplayModel","getElementsByTagName","getElementsByTagNameNS","getHTMLArea","hasAttribute","hasAttributeNS","hasAttributes","hasChildNodes","hideDesignTools","hideDragTargets","insertBefore","insertDisplayChild","loadChildren","lookupNamespaceURI","refreshIncludes","removeAttribute","removeAttributeNS","removeChild","renderDisplay","replaceChild","setAttribute","setAttributeNS","setCurrentPerspective","showDesignTools","showDragTargets","template"]},{}],107:[function(e,t,r){"use strict";function n(e,t,r){var n="onload",i=a(n,t.body);i&&l(e,t.id,i,n,r)}function i(e,t,r){var n="onPrefModified",i=a(n,t.body);i&&t.model.addEventListener("PrefModified",function(){l(e,t.id,i,n,r)})}function o(e,t,r,n){var i="onmaximize",o=a(i,t.body);o&&r.addEventListener("click",function(r){"maximized"===r.target.getAttribute("data-cxp-viewmode")&&l(e,t.id,o,i,n)})}function s(e,t,r,n){var i="onrestore",o=a(i,t.body);o&&r.addEventListener("click",function(r){"windowed"===r.target.getAttribute("data-cxp-viewmode")&&l(e,t.id,o,i,n)})}function a(e,t){var r=t.querySelector("div[g\\:"+e+"]");return r?r.getAttribute("g:"+e):null}function l(e,t,r,n,i){try{i.debug("Executing g:%s script...",n);var o=e.widgets?"window.widgets['"+t+"']":"window.widget",s=r.replace(/(__WIDGET__|__GADGET__)/,o);e.eval("(function() {"+s+"})()")}catch(a){i.warn("g:%s failed!",n),i.error(a)}}t.exports={handleLoad:n,handleMaximize:o,handleRestore:s,handlePrefModified:i}},{}],108:[function(e,t,r){"use strict";var n=e("event-target"),i=function(){this.name="CXP Additions Plugin"};i.prototype.preRender=function(e){e.addEventListener=n.addEventListener,e.removeEventListener=n.removeEventListener,
e.dispatchEvent=n.dispatchEvent;var t=e.preferences.eventTarget=e.preferences.eventTarget||[];return-1===t.indexOf(e)&&t.push(e),e},t.exports=i},{"event-target":2}],109:[function(e,t,r){"use strict";var n=e("../util/logger-factory"),i=e("browser-bunyan"),o=function(e,t){t=t||{},this.name="Replace Config Vars",this.varMap=e,this.full=!!t.full,this.interpolateStartRegex=t.interpolateStartRegex||"\\$\\(",this.interpolateEndRegex=t.interpolateEndRegex||"\\)",this.log=n.getLogger()};o.prototype.postRead=function(e){var t=this,r=this.log;if(r.info("Replace config vars plugin is running is POST READ phase..."),t.full)r.debug("Doing full config vars replacement..."),t._traverse(e);else if(r.debug("Doing minimal config vars replacement (just widget src and icons array)..."),e.content&&e.content.src&&(e.content.src=t._replaceVars("src",e.content.src)),e.content&&e.content.config&&(e.content.config=t._replaceVars("config",e.content.config)),e.icons&&e.icons.forEach(function(e,r,n){n[r]=t._replaceVars("icons["+r+"]",e)}),e.preferences=e.preferences.map(function(e){return"messages"===e.name&&(e.value=t._replaceVars("messages",e.value)),e}),e.datasources){var n=e.datasources;t._traverse(n)}return r.info("Replace config vars plugin in POST READ is DONE."),e},o.prototype._traverse=function(e){var t=this;e._ignoreReplace||Object.keys(e).forEach(function(r){e[r]=t._replaceVars(r,e[r]),e[r]&&"object"==typeof e[r]&&t._traverse(e[r])})},o.prototype._replaceVars=function(e,t){if("string"!=typeof t)return t;var r=this,n=r.log,o=r.varMap,s=Object.keys(o);return s.forEach(function(s){var a=new RegExp(r.interpolateStartRegex+s+r.interpolateEndRegex,"g");n.level()<=i.DEBUG&&a.test(t)&&n.debug("Replacing occurences of [%s] with [%s] where [%s=%s]",a,o[s],e,t),t=t.replace(a,o[s])}),t},t.exports=o},{"../util/logger-factory":121,"browser-bunyan":1}],110:[function(e,t,r){"use strict";var n=e("../../core/config-parser"),i=function(){};i.prototype=Object.create(n.prototype),i.prototype.parse=function(e){return e},t.exports=i},{"../../core/config-parser":89}],111:[function(e,t,r){"use strict";var n=e("./html5-seamless-renderer"),i=function(e,t){n.call(this,e,t),this.isContainer=!0,this.areaMap=null};i.prototype=Object.create(n.prototype),i.prototype.getAreaNodes=function(){var e=this;if(!this.areaMap){e.areaMap={};var t=Array.prototype.slice.call(this.widgetEl.querySelectorAll("div[data-area]"));t.forEach(function(t){var r=t.getAttribute("data-area");e.areaMap[r]=t})}return this.areaMap},t.exports=i},{"./html5-seamless-renderer":112}],112:[function(e,t,r){(function(r){"use strict";var n=r.fetch,i=(r.XMLHttpRequest,e("../../core/preprocessing-widget-renderer")),o=e("../../core/widget-error"),s=e("../../core/widget-error-codes"),a=e("../../util/util"),l=e("../../util/fetch-file"),c=e("../../util/logger-factory"),u=e("browser-bunyan"),p=e("url"),h={},f=e("./util/resource-loader"),d=null,g=function(e,t){if(i.call(this),"undefined"==typeof window.DOMParser)throw new Error("DOMParser is not shimmed or a native object. This renderer will not work");t=t||{},this.widgetContainerEl=e,this.parsingFormat=t.parsingFormat||null,this.locale=t.locale||null,this.configVars=t.configVars||{},this.useFolderLocalization=t.useFolderLocalization||!1,this.log=c.getLogger(),this.widgetEl=null,this._widgetInstanceReferences=[],this._inlineScriptTags=[]};g.prototype=Object.create(i.prototype),g.prototype.fetchStartFile=function(e,t){this.path=e;var r=this.log;r.debug("Starting HTML5 seamless rendering...");var i=this.getStartFilePaths(e,t,this.locale);this.useFolderLocalization||(i=i.slice(0,1));var c=i.pop();this.startFileDir=c.substring(0,c.lastIndexOf("/")+1),r.debug("Using widget start file @ %s",c);var u=h[c];if(!u){r.debug("Requesting start file...");var p=a.isUrlForFile(c)?l:n;u=p(c,{credentials:"same-origin"}).then(function(e){if(r.debug("Start file request resolved/ Status: %s",e.status),0===e.status||200===e.status)return e.text();var t=new Error(e.statusText);throw t.code=e.status,t}).then(function(e){return r.trace("Received HTML\n: %s",e),e})["catch"](function(e){var t=new o(e,"Failed to fetch "+c);throw 404===e.code&&(t.code=s.STARTFILE_NOT_FOUND),t}),u.then(function(){h[c]=u})}return u},g.prototype.process=function(e,t,r){function n(e){return isNaN(parseInt(e))?e:e+"px"}var i=this,s=this.log,l=f(),c="/*seamless widget wrapper*/\n(function(widget) {\n",h="\n})( window.widgets['"+e.id+"'])";d||(d=new DOMParser);var g=this.parsingFormat||"text/html",m=d.parseFromString(r,g);window.widgets=window.widgets||{},window.widgets[e.id]=t,this._widgetInstanceReferences.push(e.id),Object.defineProperty(t,"baseURI",{enumerable:!0,value:this.path});var v=[],y=Array.prototype.slice.call(m.getElementsByTagName("link"));y.forEach(function(e){if("stylesheet"===e.rel&&e.getAttribute("href")){var t=e.getAttribute("href");t=i._replacePathVars(t),a.isUrlDocumentRelative(t)&&(t=p.resolve(i.startFileDir,t)),e.parentNode.removeChild(e),v.push(t)}}),s.level()<=u.DEBUG&&s.debug("Using resource loader to load %s CSS resource(s): %s ...",v.length,v.join(", ")),l.loadCss(v);var b=Array.prototype.slice.call(m.getElementsByTagName("style"));b.forEach(function(e){document.head.appendChild(e)});var w=[],x=[],_=Array.prototype.slice.call(m.getElementsByTagName("script"));_.forEach(function(e){var t=e.innerHTML;if(t)e.type&&"text/javascript"!==e.type||(s.trace("Queuing script to inline:\n%s",t),x.push(t));else{var r=e.getAttribute("src");r&&(r=i._replacePathVars(r),a.isUrlDocumentRelative(r)&&(r=p.resolve(i.startFileDir,r)),w.push(r))}}),s.level()<=u.DEBUG&&s.debug("Using resource loader to load %s JS resource(s): %s ...",w.length,w.join(", "));var E=l.loadScripts(w),P=Array.prototype.slice.call(m.getElementsByTagName("img"));P.forEach(function(e){var t=e.getAttribute("src");if(t){var r=i._replacePathVars(t);if(a.isUrlDocumentRelative(r)){var n=p.resolve(i.startFileDir,r);r=n,s.debug("Image src updated from [%s] to [%s].",t,n)}e.getAttribute("src")!==r&&(e.src=r)}});var S=document.createElement("div");S.id=e.id,S.setAttribute("data-widget",e.name),Object.defineProperty(t,"body",{enumerable:!0,writable:!0,value:S}),e.width&&(S.style.width=n(e.width),s.debug("Widget width set to %s.",S.style.width)),e.height&&(S.style.height=n(e.height),s.debug("Widget height set to %s.",S.style.height));for(var k=m.getElementsByTagName("body")[0],A=k.getAttribute("onload"),C=0;C<k.attributes.length;C++){var j=k.attributes[C];j.specified&&"onload"!==j.name&&S.setAttribute(j.name,j.value)}return S.innerHTML=k.innerHTML,this.widgetContainerEl.appendChild(S),this.widgetEl=S,E.then(function(e){if(s.debug("JS resources have loaded."),e){var t=e.filter(function(e){return e.isRejected()}).length;t>0&&s.warn("%s scripts failed to load.",t)}A&&(x.push(A),s.debug("Found onload attribute to execute [%s]",A)),s.debug("Adding %s inline script(s). (Including an onload attribute if any)...",x.length);var r=c+x.join("\n")+h,n=document.createElement("script");n.innerHTML=r,document.body.appendChild(n),i._inlineScriptTags.push(n)})["catch"](function(e){throw new o(e,"Failed to render HTML5 seamless widget")})},g.prototype.getWidgetNode=function(){return this.widgetEl||null},g.prototype.getParentNode=function(){return this.widgetContainerEl||null},g.prototype.setParentNode=function(e){this.widgetContainerEl=e},g.prototype.getWidth=function(){return this.getWidgetNode()?this.getWidgetNode().offsetWidth:"auto"},g.prototype.getHeight=function(){return this.getWidgetNode()?this.getWidgetNode().offsetHeight:"auto"},g.prototype._replacePathVars=function(e){var t=this.log,r=this.configVars;for(var n in r)if(r.hasOwnProperty(n)){var i=new RegExp("\\$\\("+n+"\\)","g");t.level()<=u.DEBUG&&i.test(e)&&t.debug("Updating resource url. Replacing %s for %s in [%s]",i,r[n],e),e=e.replace(i,r[n])}return e},g.prototype.destroy=function(){for(var e=this.widgetEl.getAttribute("data-widget"),t=this.widgetEl.parentElement,r=null;t;){var n=t.getAttribute("data-chrome");if(n===e){r=t;break}t=t.parentElement}r?r.parentElement.removeChild(r):(this.widgetEl.parentElement.removeChild(this.widgetEl),this.widgetEl=null),this._inlineScriptTags.forEach(function(e){e.parentElement.removeChild(e)}),this._inlineScriptTags=[],this._widgetInstanceReferences.forEach(function(e){delete window.widgets[e]}),this._widgetInstanceReferences=[]},g.prototype._clearCache=function(){h={}},t.exports=g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../core/preprocessing-widget-renderer":92,"../../core/widget-error":95,"../../core/widget-error-codes":94,"../../util/fetch-file":119,"../../util/logger-factory":121,"../../util/util":123,"./util/resource-loader":115,"browser-bunyan":1,url:131}],113:[function(require,module,exports){"use strict";var Handlebars=require("handlebars/dist/handlebars.min"),HandlebarsHelpers=require("handlebars-helpers"),WidgetError=require("../../../core/widget-error"),loggerFactory=require("../../../util/logger-factory"),i18n=require("../../../util/i18n");if(i18n.intlSupported)var HandlebarsIntl=require("handlebars-intl");var HandlebarsPreprocessor=function(e){this.name="Handlebars Preprocessor",this.log=loggerFactory.getLogger(),this.dataObj={cxpConfig:e||{}},this.templateCache={},this.hbs=Handlebars.create();var t=HandlebarsPreprocessor.cxpHelpers;for(var r in t)t.hasOwnProperty(r)&&this.hbs.registerHelper(r,t[r]);HandlebarsIntl?HandlebarsIntl.registerWith(this.hbs):this.log.warn("The ECMAScript Internationalization API is not supported on this platform. Some i18n related features will fail.")};HandlebarsPreprocessor.prototype.process=function(widgetModel,startFileContent,context,messageBundle){var log=this.log,errMessage,templateKey=widgetModel.content.src,template=this.templateCache[templateKey];if(!template){if(widgetModel.content.type&&"application/x-handlebars-template"===widgetModel.content.type){var precompiledTemplate=null;try{eval("precompiledTemplate = "+startFileContent),template=this.hbs.template(precompiledTemplate)}catch(err){throw errMessage="There was a problem evaluating a pre-compiled handlebars template. Ensure it was compiled using the simple option. E.g.`handlebars index.handlebars -s -f index.js`",this.log.error(err,errMessage),new WidgetError(err,errMessage)}}else{log.debug("Compiling handlebars template instance for %s",templateKey);try{template=this.hbs.compile(startFileContent)}catch(err){throw errMessage="There was a problem compiling a handlebars template",this.log.error(err,errMessage),new WidgetError(err,errMessage)}}this.templateCache[templateKey]=template}if(messageBundle){var messages=messageBundle.messages||{},formats=messageBundle.formats||{},availableLocales=Object.keys(messages),bestFitLocale=i18n.chooseBestLocale(availableLocales,widgetModel.locale);this.dataObj.intl={locales:widgetModel.locale,messages:messages[bestFitLocale]||messages[i18n.defaultLocale]||{},formats:formats}}var result=template(context,{data:this.dataObj});return log.trace("Using compiled Handlebars start file for %s:\n%s",templateKey,result),result},HandlebarsPreprocessor.prototype.registerHelper=function(e,t){this.hbs.registerHelper(e,t)},HandlebarsPreprocessor.prototype.registerPartial=function(e,t){this.hbs.registerPartial(e,t)},HandlebarsPreprocessor.cxpHelpers=HandlebarsHelpers,module.exports=HandlebarsPreprocessor},{"../../../core/widget-error":95,"../../../util/i18n":120,"../../../util/logger-factory":121,"handlebars-helpers":3,"handlebars-intl":4,"handlebars/dist/handlebars.min":27}],114:[function(require,module,exports){"use strict";function getPreference(e,t){return e.preferences.filter(function(e){return e.name===t})[0]||null}function createTemplateItemData(e){var t={};return t.name=e.name,t.children=e.children||[],t.preferences=array2Dict(e.preferences||[],"name"),t.children=t.children.map(createTemplateItemData),t}function array2Dict(e,t){return e.reduce(function(e,r){return e[r[t]]=r,e},{})}var WidgetError=require("../../../core/widget-error"),loggerFactory=require("../../../util/logger-factory"),resourceLoader=require("../util/resource-loader")(),util=require("../../../util/util"),convertToArray=Array.prototype.slice.call.bind(Array.prototype.slice),SoyPreprocessor=function(e){this.name="Soy Preprocessor",this.log=loggerFactory.getLogger(),this.configVars=e};SoyPreprocessor.prototype.process=function(widgetModel,startFileContent,context){var self=this,log=this.log;if("undefined"==typeof soy)throw new WidgetError("Soy utils are not present. Cannot use Soy start file");var parser=new DOMParser,configDoc=parser.parseFromString(startFileContent,"application/xml"),resources=configDoc.getElementsByTagName("resources")[0];if(resources=resources||configDoc.getElementsByTagName("bb:resources")[0],!resources)throw new WidgetError('"resources" element not found in config.xml');var templateName=getPreference(widgetModel,"TemplateName").value,templateScriptRegex=new RegExp("/templates/"+templateName+"/template\\.js$"),templateScriptNode=convertToArray(resources.children).filter(function(e){return templateScriptRegex.test(e.getAttribute("src"))})[0];templateScriptNode&&resources.removeChild(templateScriptNode);var templateSrc=util.replacePathVars(templateScriptNode.getAttribute("src"),this.configVars,this.log);return resourceLoader.loadScripts(templateSrc).then(function(){var startFileEl=document.createElement("div"),templateNamespace="window.templates_"+templateName,fragment=null,template=null;try{eval("template = "+templateNamespace),fragment=soy.renderAsFragment(template[templateName],{item:createTemplateItemData(context),ij:self.configVars})}catch(err){var errMessage="There was a problem evaluating a pre-compiled Soy template.";throw log.error(err,errMessage),new WidgetError(err,errMessage)}startFileEl.innerHTML=resources.innerHTML,startFileEl.appendChild(fragment);var areaNodes=convertToArray(fragment.getElementsByClassName("bp-area"));areaNodes.forEach(function(e,t){e.setAttribute("data-area",t)});var result=startFileEl.outerHTML;return log.trace("Using compiled Soy start file for %s:\n%s",templateNamespace,result),result})},module.exports=SoyPreprocessor},{"../../../core/widget-error":95,"../../../util/logger-factory":121,"../../../util/util":123,"../util/resource-loader":115}],115:[function(e,t,r){"use strict";function n(){this._initilized=!1,this._allLoadingPromises={}}var i,o=e("promise-extensions")(o);t.exports=function(){return i||(i=new n),i},n.prototype._init=function(){this._initilized||(this.head=document.getElementsByTagName("head")[0]||document.documentElement,this.asyncSupported="undefined"!=typeof document.createElement("script").async,this._prepopulateLoadedCache(),this._initilized=!0)},n.prototype._prepopulateLoadedCache=function(){var e,t,r=this,n=Array.prototype.slice.call(document.getElementsByTagName("link"));n.forEach(function(n){t=n.getAttribute("href"),e="stylesheet"===n.rel&&t,e&&(r._allLoadingPromises[t]=t)});var i=Array.prototype.slice.call(document.getElementsByTagName("script"));i.forEach(function(n){t=n.getAttribute("src"),e=!n.innerHTML&&t,!e||n.async||r._allLoadingPromises[t]||(r._allLoadingPromises[t]=o.resolve(t))})},n.prototype.loadScripts=function(e){return e instanceof Array||(e=[e]),this._init(),this.asyncSupported?this._loadScriptsAsync(e):this._loadScriptsSync(e)},n.prototype._loadScriptsAsync=function(e){var t=this,r=e.filter(function(e){return!t._allLoadingPromises[e]}).map(function(e){var r=document.createElement("script");r.src=e,r.async=!1;var n=t._createScriptPromise(r);return t._allLoadingPromises[r.src]=n,t.head.insertBefore(r,t.head.firstChild),n});return o.settleAll(r)},n.prototype._loadScriptsSync=function(e){function t(e){if(!n._allLoadingPromises[e]){var t=document.createElement("script");t.src=e,n._allLoadingPromises[e]=n._createScriptPromise(t),i.push(n._allLoadingPromises[e]),n.head.insertBefore(t,n.head.firstChild)}return n._allLoadingPromises[e]}function r(n){var o=t(e[n]);return n++,e[n]?o.then(function(){return r(n)})["catch"](function(){return r(n)}):i}var n=this,i=[];return e.length?o.settleAll(r(0)):o.resolve()},n.prototype._createScriptPromise=function(e){var t=e.src;return new o(function(r,n){e.onload=function(){r(t)},e.onerror=function(){n(t)}})},n.prototype.loadCss=function(e){e instanceof Array||(e=[e]),this._init();var t=this,r=t.head,n=[];return e.forEach(function(e){if(t._allLoadingPromises[e])n.push(t._allLoadingPromises[e]);else{var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e);var s=o.resolve(e);t._allLoadingPromises[e]=s,n.push(s);var a=Array.prototype.slice.call(r.getElementsByTagName("link")).filter(function(e){return"stylesheet"===e.rel});if(a.length){var l=a.pop();l.parentNode.insertBefore(i,l.nextSibling)}else r.insertBefore(i,r.firstChild)}}),o.all(n)}},{"promise-extensions":87}],116:[function(e,t,r){"use strict";function n(){i.call(this,window.localStorage)}var i=e("./web-storage-decorator");n.prototype=Object.create(i.prototype),t.exports=n},{"./web-storage-decorator":118}],117:[function(e,t,r){"use strict";function n(e){this.type=e}var i=e("../../util/util");n.prototype.initStorageEvent=function(e,t,r,n,i,o,s,a){this.type=e,this.canBubble=t,this.cancellable=r,this.key=n,this.oldValue=i,this.newValue=o,this.url=s,this.storageArea=a},n.prototype.toString=function(){return i.format("[object StorageEvent] (key=%s, oldValue=%s, newValue=%s, url=%s)",this.key,this.oldValue,this.newValue,this.url)},t.exports=n},{"../../util/util":123}],118:[function(e,t,r){(function(r){"use strict";function n(e){this.eventTarget=[],this.log=i.getLogger(),this._items=[],this._storage=e,this._prefix="",this._eventsEnabled=!1;var t=this;Object.defineProperty(this,"length",{enumerable:!1,configurable:!1,get:function(){return Object.keys(t._items).length}})}var i=e("../../util/logger-factory"),o=e("browser-bunyan"),s=e("../../core/widget-storage"),a=e("../../core/widget-error"),l=e("./storage-event"),c=e("../../util/util");n.prototype=Object.create(s.prototype),n.prototype.init=function(e,t){var r=this,n=this.log;this._prefix=e||"",n.debug("Initializing preference storage for widget [%s]",e),n.debug("Using internal storage [%s]",this._storage.toString()),n.level()<=o.TRACE&&n.trace("Initializing storage with the following preferences:\n %s",JSON.stringify(t)),t&&(this._items=t.map(function(e){return r.defineItem(e)})),this._eventsEnabled=!0},n.prototype.getItem=function(e){var t=this._storage.getItem(this._prefix+e);if("undefined"==typeof t||null===t){var r=this._getItemDefinition(e)||null;t=r?r.value:null}return"undefined"==typeof t&&(t=null),this.log.trace("Getting preference [%s=%s]",e,t),t},n.prototype.defineItem=function(e){var t=this,r=e.name;this._items.push(e);var n={enumerable:!0,configurable:!0,get:function(){return t.getItem(r)},set:function(e){return t.setItem(t._prefix+r,e)}};return Object.defineProperty(this,r,n),e},n.prototype.setItem=function(e,t,r){var n=this._getItemDefinition(e);if(n&&n.readonly){var i=c.format("Attempted to set readonly preference [%s=%s]",e,t);throw this.log.warn(i),new a(i)}return this.log.debug("Setting preference to storage [%s=%s]",e,t),null===t?this.removeItem(e):(this._notify(e,this.getItem(e),t),this._storage.setItem(this._prefix+e,t,r))},n.prototype.removeItem=function(e){return this._notify(e,this.getItem(e),null),this.log.debug("Removing preference from storage [%s]",e),this._storage.removeItem(this._prefix+e)},n.prototype.clear=function(){var e=this;this._notify(null,null,null),this.log.debug("Clearing preferences"),this._eventsEnabled=!1,Object.keys(this._storage).filter(function(t){return 0===t.indexOf(e._prefix)}).forEach(function(t){e.removeItem(t.substr(e.prefix.length))}),this._eventsEnabled=!0},n.prototype.key=function(e){var t=this,r=Object.keys(this._storage).filter(function(e){return 0===e.indexOf(t._prefix)}).length,n=r.length;return e>=n?null:r[e]},n.prototype.keys=function(){var e=this,t=Object.keys(this._storage).filter(function(t){return 0===t.indexOf(e._prefix)});return 0===t.length?[]:t.map(function(t){return t.slice(e._prefix.length)})},n.prototype._getItemDefinition=function(e){var t=this._items.filter(function(t){return e===t.name})[0];return t||null},n.prototype._notify=function(e,t,n){if(this._eventsEnabled){var i=this,s=c.isArray(this.eventTarget)?this.eventTarget:[this.eventTarget];s.filter(function(e){return void 0!==e&&null!==e}).forEach(function(s){if("function"!=typeof s.dispatchEvent){var a="Cannot dispatch StorageEvent for preferences. An event target was provided, but it does not implement the EventTarget interface. [%s, %s, %s]";return void i.log.warn(a,e,t,n)}var c=new l("storage");c.initStorageEvent("storage",!1,!1,e,t,n,i._prefix,i),r.nextTick(function(){i.log.level()<=o.DEBUG&&i.log.debug("Sending StorageEvent [%s] ",c),s.dispatchEvent(c)})})}},t.exports=n}).call(this,e("_process"))},{"../../core/widget-error":95,"../../core/widget-storage":99,"../../util/logger-factory":121,"../../util/util":123,"./storage-event":117,_process:126,"browser-bunyan":1}],119:[function(e,t,r){(function(e){"use strict";var r=e.XMLHttpRequest,n=e.Response;t.exports=function(e){return new Promise(function(t,i){var o=new r;o.onload=function(){t(new n(o.responseText,{status:o.status}))},o.onerror=function(){i(new Error("Local request failed for "+e))},o.open("GET",e),o.send(null)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],120:[function(e,t,r){(function(e){"use strict";var r=["ar","iw","he","dv","ha","fa","ps","ur","yi","ji"];t.exports={defaultLocale:"en",intlSupported:"undefined"!=typeof e.Intl,getDirection:function(e){return e.length>=2&&r.indexOf(e.substr(0,2))>=0?"rtl":"ltr"},chooseBestLocale:function(e,t){for(var r=t;r;){if(Array.prototype.indexOf.call(e,r)>-1)return r;var n=r.lastIndexOf("-");if(0>n)return;n>=2&&"-"===r.charAt(n-2)&&(n-=2),r=r.substring(0,n)}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],121:[function(e,t,r){"use strict";var n=e("browser-bunyan"),i=e("../util/util"),o={},s=null,a={defaultLoggerName:"logger",defaultLogLevel:"info"};a.createLogger=function(e){e=e||{};var t=e.parentLog||null,r=e.loggerName||this.defaultLoggerName,a=e.logLevel||this.defaultLogLevel,l=e.appendId||!1;l&&(r+="/"+i.randomId());var c;return c=t?t.child({childName:r}):n.createLogger({name:r,streams:[{level:a,stream:new n.ConsoleFormattedStream,type:"raw"}]}),o[r]=c,s=c,c},a.getLogger=function(e){return e&&o[e]?o[e]:s?s:a.createLogger()},t.exports=a},{"../util/util":123,"browser-bunyan":1}],122:[function(e,t,r){"use strict";function n(e){this._context=e}var i=e("../util/util");t.exports=n,n.prototype.run=function(e){var t=/\$\{([^}\s]+)}/g,r=this;return e.replace(t,function(e,t){return i.objectGet(r._context,t)})}},{"../util/util":123}],123:[function(e,t,r){"use strict";var n=e("events").EventEmitter,i=e("browser-bunyan"),o={isArray:e("lodash/lang/isArray"),cloneDeep:e("lodash/lang/cloneDeep"),merge:e("lodash/object/merge"),startsWith:e("lodash/string/startsWith"),endsWith:e("lodash/string/endsWith"),omit:e("lodash/object/omit"),assign:e("lodash/object/assign")},s={};s.parseBoolean=function(e){return("boolean"==typeof e||e instanceof Boolean)&&1==e||("string"==typeof e||e instanceof String)&&/^\s*true\s*$/i.test(e)||("number"==typeof e||e instanceof Number)&&0!=e},s.isUrlAbsolute=function(e){var t=/^https?:\/\/|file?:\/\//i;return t.test(e)},s.isUrlSiteRelative=function(e){return 0===e.indexOf("/")},s.isUrlDocumentRelative=function(e){return!(s.isUrlAbsolute(e)||s.isUrlSiteRelative(e))},s.isUrlForFile=function(e){return/^file:/.test(e)},s.merge=o.merge,s.assign=o.assign,s.omit=o.omit,s.startsWith=o.startsWith,s.endsWith=o.endsWith,s.cloneDeep=function(){try{return o.cloneDeep.apply(o,Array.prototype.slice.call(arguments))}catch(e){throw console.warn(e),e}},s.isArray=o.isArray,s.format=function(e){if(null===e)return"null";if("string"!=typeof e)return e.toString();for(var t=/%[sdj%]/g,r=1,n=arguments,i=n.length,o=String(e).replace(t,function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}}),s=n[r];i>r;s=n[++r])o+=" "+s;return o},s.getDescendantLocales=function(e){e=e.toLowerCase();for(var t,r=[],n=e.split("-");t=n.shift();){var i=r[r.length-1];r.push((i?i+"-":"")+t)}return r},s.randomId=function(){return Math.random().toString(36).substring(7)},s.replacePathVars=function(e,t,r){for(var n in t)if(t.hasOwnProperty(n)){var o=new RegExp("\\$\\("+n+"\\)","g");r.level()<=i.DEBUG&&o.test(e)&&r.debug("Updating resource url. Replacing %s for %s in [%s]",o,t[n],e),e=e.replace(o,t[n])}return e},s.makeEventTarget=function(e){return Object.defineProperty(e,"@@",{enumerable:!1,configurable:!0,writable:!1,value:new n}),e.addEventListener=function(){this["@@"].on.apply(this["@@"],Array.prototype.slice.call(arguments))},e.removeEventListener=function(){this["@@"].off.apply(this["@@"],Array.prototype.slice.call(arguments))},e.dispatchEvent=function(e){this["@@"].emit.call(this["@@"],e.type,e)},e},s.objectGet=function(e,t){for(var r="string"==typeof t?t.split("."):t,n=0,i=e,o=r.length;null!=i&&o>n;)i=i[r[n++]];return n&&n===o?i:void 0},t.exports=s},{"browser-bunyan":1,events:125,"lodash/lang/cloneDeep":70,"lodash/lang/isArray":72,"lodash/object/assign":79,"lodash/object/merge":82,"lodash/object/omit":83,"lodash/string/endsWith":84,"lodash/string/startsWith":85}],124:[function(e,t,r){},{}],125:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,o,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],a(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),l=1;n>l;l++)o[l-1]=arguments[l];r.apply(this,o)}else if(s(r)){for(n=arguments.length,o=new Array(n-1),l=1;n>l;l++)o[l-1]=arguments[l];for(c=r.slice(),n=c.length,l=0;n>l;l++)c[l].apply(this,o)}return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var r;r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,o,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],o=r.length,n=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(r)){for(a=o;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}if(0>n)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],i(r))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var r;return r=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],126:[function(e,t,r){function n(){u&&a&&(u=!1,a.length?c=a.concat(c):p=-1,c.length&&i())}function i(){if(!u){var e=setTimeout(n);u=!0;for(var t=c.length;t;){for(a=c,c=[];++p<t;)a&&a[p].run();p=-1,t=c.length}a=null,u=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function s(){}var a,l=t.exports={},c=[],u=!1,p=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new o(e,t)),1!==c.length||u||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=s,l.addListener=s,l.once=s,l.off=s,l.removeListener=s,l.removeAllListeners=s,l.emit=s,l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],127:[function(e,t,r){(function(e){!function(n){function i(e){throw new RangeError(I[e])}function o(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function s(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(N,".");var i=e.split("."),s=o(i,t).join(".");return n+s}function a(e){for(var t,r,n=[],i=0,o=e.length;o>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&o>i?(r=e.charCodeAt(i++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--)):n.push(t);return n}function l(e){return o(e,function(e){var t="";return e>65535&&(e-=65536,t+=F(e>>>10&1023|55296),e=56320|1023&e),t+=F(e)}).join("")}function c(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:_}function u(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function p(e,t,r){var n=0;for(e=r?T(e/k):e>>1,e+=T(e/t);e>R*P>>1;n+=_)e=T(e/R);return T(n+(R+1)*e/(e+S))}function h(e){var t,r,n,o,s,a,u,h,f,d,g=[],m=e.length,v=0,y=C,b=A;for(r=e.lastIndexOf(j),0>r&&(r=0),n=0;r>n;++n)e.charCodeAt(n)>=128&&i("not-basic"),g.push(e.charCodeAt(n));for(o=r>0?r+1:0;m>o;){for(s=v,a=1,u=_;o>=m&&i("invalid-input"),h=c(e.charCodeAt(o++)),(h>=_||h>T((x-v)/a))&&i("overflow"),v+=h*a,f=b>=u?E:u>=b+P?P:u-b,!(f>h);u+=_)d=_-f,a>T(x/d)&&i("overflow"),a*=d;t=g.length+1,b=p(v-s,t,0==s),T(v/t)>x-y&&i("overflow"),y+=T(v/t),v%=t,g.splice(v++,0,y)}return l(g)}function f(e){var t,r,n,o,s,l,c,h,f,d,g,m,v,y,b,w=[];for(e=a(e),m=e.length,t=C,r=0,s=A,l=0;m>l;++l)g=e[l],128>g&&w.push(F(g));for(n=o=w.length,o&&w.push(j);m>n;){for(c=x,l=0;m>l;++l)g=e[l],g>=t&&c>g&&(c=g);for(v=n+1,c-t>T((x-r)/v)&&i("overflow"),r+=(c-t)*v,t=c,l=0;m>l;++l)if(g=e[l],t>g&&++r>x&&i("overflow"),g==t){for(h=r,f=_;d=s>=f?E:f>=s+P?P:f-s,!(d>h);f+=_)b=h-d,y=_-d,w.push(F(u(d+b%y,0))),h=T(b/y);w.push(F(u(h,0))),s=p(r,v,n==o),r=0,++n}++r,++t}return w.join("")}function d(e){return s(e,function(e){
return O.test(e)?h(e.slice(4).toLowerCase()):e})}function g(e){return s(e,function(e){return L.test(e)?"xn--"+f(e):e})}var m="object"==typeof r&&r&&!r.nodeType&&r,v="object"==typeof t&&t&&!t.nodeType&&t,y="object"==typeof e&&e;y.global!==y&&y.window!==y&&y.self!==y||(n=y);var b,w,x=2147483647,_=36,E=1,P=26,S=38,k=700,A=72,C=128,j="-",O=/^xn--/,L=/[^\x20-\x7E]/,N=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=_-E,T=Math.floor,F=String.fromCharCode;if(b={version:"1.4.1",ucs2:{decode:a,encode:l},decode:h,encode:f,toASCII:g,toUnicode:d},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return b});else if(m&&v)if(t.exports==m)v.exports=b;else for(w in b)b.hasOwnProperty(w)&&(m[w]=b[w]);else n.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],128:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,o){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var c=e.length;l>0&&c>l&&(c=l);for(var u=0;c>u;++u){var p,h,f,d,g=e[u].replace(a,"%20"),m=g.indexOf(r);m>=0?(p=g.substr(0,m),h=g.substr(m+1)):(p=g,h=""),f=decodeURIComponent(p),d=decodeURIComponent(h),n(s,f)?i(s[f])?s[f].push(d):s[f]=[s[f],d]:s[f]=d}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],129:[function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,a){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(s(e),function(s){var a=encodeURIComponent(i(s))+r;return o(e[s])?n(e[s],function(e){return a+encodeURIComponent(i(e))}).join(t):a+encodeURIComponent(i(e[s]))}).join(t):a?encodeURIComponent(i(a))+r+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],130:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":128,"./encode":129}],131:[function(e,t,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,r){if(e&&c(e)&&e instanceof n)return e;var i=new n;return i.parse(e,t,r),i}function o(e){return l(e)&&(e=i(e)),e instanceof n?e.format():n.prototype.format.call(e)}function s(e,t){return i(e,!1,!0).resolve(t)}function a(e,t){return e?i(e,!1,!0).resolveObject(t):t}function l(e){return"string"==typeof e}function c(e){return"object"==typeof e&&null!==e}function u(e){return null===e}function p(e){return null==e}var h=e("punycode");r.parse=i,r.resolve=s,r.resolveObject=a,r.format=o,r.Url=n;var f=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,g=["<",">",'"',"`"," ","\r","\n","	"],m=["{","}","|","\\","^","`"].concat(g),v=["'"].concat(m),y=["%","/","?",";","#"].concat(v),b=["/","?","#"],w=255,x=/^[a-z0-9A-Z_-]{0,63}$/,_=/^([a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},P={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},k=e("querystring");n.prototype.parse=function(e,t,r){if(!l(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e;n=n.trim();var i=f.exec(n);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,n=n.substr(i.length)}if(r||i||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===n.substr(0,2);!s||i&&P[i]||(n=n.substr(2),this.slashes=!0)}if(!P[i]&&(s||i&&!S[i])){for(var a=-1,c=0;c<b.length;c++){var u=n.indexOf(b[c]);-1!==u&&(-1===a||a>u)&&(a=u)}var p,d;d=-1===a?n.lastIndexOf("@"):n.lastIndexOf("@",a),-1!==d&&(p=n.slice(0,d),n=n.slice(d+1),this.auth=decodeURIComponent(p)),a=-1;for(var c=0;c<y.length;c++){var u=n.indexOf(y[c]);-1!==u&&(-1===a||a>u)&&(a=u)}-1===a&&(a=n.length),this.host=n.slice(0,a),n=n.slice(a),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var m=this.hostname.split(/\./),c=0,A=m.length;A>c;c++){var C=m[c];if(C&&!C.match(x)){for(var j="",O=0,L=C.length;L>O;O++)j+=C.charCodeAt(O)>127?"x":C[O];if(!j.match(x)){var N=m.slice(0,c),I=m.slice(c+1),R=C.match(_);R&&(N.push(R[1]),I.unshift(R[2])),I.length&&(n="/"+I.join(".")+n),this.hostname=N.join(".");break}}}if(this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),!g){for(var T=this.hostname.split("."),F=[],c=0;c<T.length;++c){var M=T[c];F.push(M.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode(M):M)}this.hostname=F.join(".")}var D=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+D,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!E[o])for(var c=0,A=v.length;A>c;c++){var B=v[c],U=encodeURIComponent(B);U===B&&(U=escape(B)),n=n.split(B).join(U)}var z=n.indexOf("#");-1!==z&&(this.hash=n.substr(z),n=n.slice(0,z));var $=n.indexOf("?");if(-1!==$?(this.search=n.substr($),this.query=n.substr($+1),t&&(this.query=k.parse(this.query)),n=n.slice(0,$)):t&&(this.search="",this.query={}),n&&(this.pathname=n),S[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var D=this.pathname||"",M=this.search||"";this.path=D+M}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(o=k.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||S[t])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+i+r+s+n},n.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(l(e)){var t=new n;t.parse(e,!1,!0),e=t}var r=new n;if(Object.keys(this).forEach(function(e){r[e]=this[e]},this),r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(r[t]=e[t])}),S[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(e.protocol&&e.protocol!==r.protocol){if(!S[e.protocol])return Object.keys(e).forEach(function(t){r[t]=e[t]}),r.href=r.format(),r;if(r.protocol=e.protocol,e.host||P[e.protocol])r.pathname=e.pathname;else{for(var i=(e.pathname||"").split("/");i.length&&!(e.host=i.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),r.pathname=i.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var o=r.pathname||"",s=r.search||"";r.path=o+s}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var a=r.pathname&&"/"===r.pathname.charAt(0),c=e.host||e.pathname&&"/"===e.pathname.charAt(0),h=c||a||r.host&&e.pathname,f=h,d=r.pathname&&r.pathname.split("/")||[],i=e.pathname&&e.pathname.split("/")||[],g=r.protocol&&!S[r.protocol];if(g&&(r.hostname="",r.port=null,r.host&&(""===d[0]?d[0]=r.host:d.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===i[0]?i[0]=e.host:i.unshift(e.host)),e.host=null),h=h&&(""===i[0]||""===d[0])),c)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,d=i;else if(i.length)d||(d=[]),d.pop(),d=d.concat(i),r.search=e.search,r.query=e.query;else if(!p(e.search)){if(g){r.hostname=r.host=d.shift();var m=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;m&&(r.auth=m.shift(),r.host=r.hostname=m.shift())}return r.search=e.search,r.query=e.query,u(r.pathname)&&u(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!d.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var v=d.slice(-1)[0],y=(r.host||e.host)&&("."===v||".."===v)||""===v,b=0,w=d.length;w>=0;w--)v=d[w],"."==v?d.splice(w,1):".."===v?(d.splice(w,1),b++):b&&(d.splice(w,1),b--);if(!h&&!f)for(;b--;b)d.unshift("..");!h||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),y&&"/"!==d.join("/").substr(-1)&&d.push("");var x=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(g){r.hostname=r.host=x?"":d.length?d.shift():"";var m=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;m&&(r.auth=m.shift(),r.host=r.hostname=m.shift())}return h=h||r.host&&d.length,h&&!x&&d.unshift(""),d.length?r.pathname=d.join("/"):(r.pathname=null,r.path=null),u(r.pathname)&&u(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:127,querystring:130}],132:[function(e,t,r){arguments[4][1][0].apply(r,arguments)},{dup:1}],133:[function(e,t,r){arguments[4][3][0].apply(r,arguments)},{dup:3,"handlebars/dist/handlebars.min":134}],134:[function(e,t,r){arguments[4][27][0].apply(r,arguments)},{dup:27}],135:[function(e,t,r){arguments[4][28][0].apply(r,arguments)},{dup:28}],136:[function(e,t,r){arguments[4][30][0].apply(r,arguments)},{dup:30}],137:[function(e,t,r){arguments[4][31][0].apply(r,arguments)},{dup:31}],138:[function(e,t,r){arguments[4][37][0].apply(r,arguments)},{dup:37}],139:[function(e,t,r){arguments[4][40][0].apply(r,arguments)},{"./createBaseFor":146,dup:40}],140:[function(e,t,r){arguments[4][41][0].apply(r,arguments)},{"../object/keysIn":165,"./baseFor":139,dup:41}],141:[function(e,t,r){arguments[4][44][0].apply(r,arguments)},{"../lang/isArray":157,"../lang/isObject":160,"../lang/isTypedArray":162,"../object/keys":164,"./arrayEach":137,"./baseMergeDeep":142,"./isArrayLike":149,"./isObjectLike":153,dup:44}],142:[function(e,t,r){arguments[4][45][0].apply(r,arguments)},{"../lang/isArguments":156,"../lang/isArray":157,"../lang/isPlainObject":161,"../lang/isTypedArray":162,"../lang/toPlainObject":163,"./arrayCopy":136,"./isArrayLike":149,dup:45}],143:[function(e,t,r){arguments[4][46][0].apply(r,arguments)},{dup:46}],144:[function(e,t,r){arguments[4][48][0].apply(r,arguments)},{"../utility/identity":167,dup:48}],145:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{"../function/restParam":135,"./bindCallback":144,"./isIterateeCall":151,dup:52}],146:[function(e,t,r){arguments[4][53][0].apply(r,arguments)},{"./toObject":155,dup:53}],147:[function(e,t,r){arguments[4][55][0].apply(r,arguments)},{"./baseProperty":143,dup:55}],148:[function(e,t,r){arguments[4][56][0].apply(r,arguments)},{"../lang/isNative":159,dup:56}],149:[function(e,t,r){arguments[4][61][0].apply(r,arguments)},{"./getLength":147,"./isLength":152,dup:61}],150:[function(e,t,r){arguments[4][62][0].apply(r,arguments)},{dup:62}],151:[function(e,t,r){arguments[4][63][0].apply(r,arguments)},{"../lang/isObject":160,"./isArrayLike":149,"./isIndex":150,dup:63}],152:[function(e,t,r){arguments[4][64][0].apply(r,arguments)},{dup:64}],153:[function(e,t,r){arguments[4][65][0].apply(r,arguments)},{dup:65}],154:[function(e,t,r){arguments[4][68][0].apply(r,arguments)},{"../lang/isArguments":156,"../lang/isArray":157,"../object/keysIn":165,"./isIndex":150,"./isLength":152,dup:68}],155:[function(e,t,r){arguments[4][69][0].apply(r,arguments)},{"../lang/isObject":160,dup:69}],156:[function(e,t,r){arguments[4][71][0].apply(r,arguments)},{"../internal/isArrayLike":149,"../internal/isObjectLike":153,dup:71}],157:[function(e,t,r){arguments[4][72][0].apply(r,arguments)},{"../internal/getNative":148,"../internal/isLength":152,"../internal/isObjectLike":153,dup:72}],158:[function(e,t,r){arguments[4][73][0].apply(r,arguments)},{"./isObject":160,dup:73}],159:[function(e,t,r){arguments[4][74][0].apply(r,arguments)},{"../internal/isObjectLike":153,"./isFunction":158,dup:74}],160:[function(e,t,r){arguments[4][75][0].apply(r,arguments)},{dup:75}],161:[function(e,t,r){arguments[4][76][0].apply(r,arguments)},{"../internal/baseForIn":140,"../internal/isObjectLike":153,"./isArguments":156,dup:76}],162:[function(e,t,r){arguments[4][77][0].apply(r,arguments)},{"../internal/isLength":152,"../internal/isObjectLike":153,dup:77}],163:[function(e,t,r){arguments[4][78][0].apply(r,arguments)},{"../internal/baseCopy":138,"../object/keysIn":165,dup:78}],164:[function(e,t,r){arguments[4][80][0].apply(r,arguments)},{"../internal/getNative":148,"../internal/isArrayLike":149,"../internal/shimKeys":154,"../lang/isObject":160,dup:80}],165:[function(e,t,r){arguments[4][81][0].apply(r,arguments)},{"../internal/isIndex":150,"../internal/isLength":152,"../lang/isArguments":156,"../lang/isArray":157,"../lang/isObject":160,dup:81}],166:[function(e,t,r){arguments[4][82][0].apply(r,arguments)},{"../internal/baseMerge":141,"../internal/createAssigner":145,dup:82}],167:[function(e,t,r){arguments[4][86][0].apply(r,arguments)},{dup:86}],168:[function(e,t,r){arguments[4][87][0].apply(r,arguments)},{dup:87}],169:[function(e,t,r){"use strict";function n(e){return new s(e)}var i=e("./cxp-util"),o=e("browser-bunyan"),s=function(e){e=e||{};var t="cxp-web";this.log=e.log?e.log.child({childName:t}):o.createLogger({name:t||"logger",streams:Array.isArray(e.logStreams)?e.logStreams:[{level:e.logLevel||"info",stream:new o.ConsoleFormattedStream,type:"raw"}]}),this.settings={},e.contextRoot&&this.set("contextRoot",e.contextRoot),e.remoteContextRoot&&this.set("remoteContextRoot",e.remoteContextRoot)};s.prototype.util=i,s.prototype.set=function(e,t){this.settings[e]=t},s.prototype.get=function(e){return this.settings[e]},s.prototype.enable=function(e){this.settings[e]=!0},s.prototype.disable=function(e){this.settings[e]=!1},s.prototype.enabled=function(e){return this.settings[e]},s.prototype.disabled=function(e){return!this.settings[e]},s.prototype.getLogger=function(){return this.log},t.exports={Configuration:s,createInstance:n}},{"./cxp-util":170,"browser-bunyan":132}],170:[function(e,t,r){"use strict";t.exports={getPreference:function(e,t){return e.preferences?e.preferences.filter(function(e){return e.name===t})[0]||null:void 0},getPreferenceValue:function(e,t){var r=this.getPreference(e,t);return r?r.value:null}}},{}],171:[function(e,t,r){"use strict";var n=e("./render/render.js"),i=e("./configuration/configuration.js"),o=e("./model/strategies/xml-cxp-model");t.exports={getRenderer:n.createInstance,createConfiguration:i.createInstance,getModel:o.createInstance}},{"./configuration/configuration.js":169,"./model/strategies/xml-cxp-model":191,"./render/render.js":194}],172:[function(e,t,r){"use strict";function n(e,t,r,n){this.config=e,this.type=r,this._filter=n||null,this._requiredParams=this._getRequiredParams(),this._cache=t,this.logger=this.config.getLogger().child({childName:"item-collection-context"})}t.exports=n,n.prototype._getRequiredParams=function(){switch(this.type){case"link":return{depth:10,ps:50};case"page":return{depth:10};default:return null}},n.prototype.get=function(){throw new Error("Method not implemented")},n.prototype.create=function(e){throw new Error("Method not implemented")},n.prototype.filter=function(e,t,r){throw new Error("Method not implemented")}},{}],173:[function(e,t,r){"use strict";function n(e,t,r,n,i){this.config=e,this.itemName=r,this.itemType=n,this.findById=i||!1,this._requiredParams=this._getRequiredParams()||{},this._cache=t,this.logger=this.config.getLogger().child({childName:"item-collection-context"})}t.exports=n,n.prototype._getRequiredParams=function(){switch(this.itemType){case"link":case"page":return{depth:10};default:return null}},n.prototype.get=function(e){throw new Error("Method not implemented")},n.prototype.update=function(e){throw new Error("Method not implemented")},n.prototype.revert=function(){throw new Error("Method not implemented")},n.prototype.remove=function(){throw new Error("Method not implemented")}},{}],174:[function(e,t,r){"use strict";var n=["ar","iw","he","dv","ha","fa","ps","ur","yi","ji"];t.exports={defaultLocale:"en",getDirection:function(e){return n.indexOf(e)>=0?"rtl":"ltr"}}},{}],175:[function(e,t,r){"use strict";function n(){this.items={}}t.exports=n,n.prototype.update=function(e,t,r){this.items[e]||(this.items[e]={}),this.items[e][t]=r},n.prototype.get=function(e,t){return this.items[e]&&this.items[e][t]},n.prototype.remove=function(e,t){if(!this.items[e]||!this.items[e][t])return null;var r=this.items[e][t];return delete this.items[e][t],r}},{}],176:[function(e,t,r){"use strict";function n(e,t,r,n){var o=n||("order"===t?"double":"string"),s=i(e,t);s?(s.value=r,s.type!==o&&(s.type=o)):e.preferences.push({name:t,value:r,type:o})}function i(e,t){return e.preferences.filter(function(e){return e.name===t})[0]}function o(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return a[255&e]+a[e>>8&255]+a[e>>16&255]+a[e>>24&255]+"-"+a[255&t]+a[t>>8&255]+"-"+a[t>>16&15|64]+a[t>>24&255]+"-"+a[63&r|128]+a[r>>8&255]+"-"+a[r>>16&255]+a[r>>24&255]+a[255&n]+a[n>>8&255]+a[n>>16&255]+a[n>>24&255]}function s(e){return e+o()}t.exports={modifyPreference:n,getPreference:i,generateItemName:s};for(var a=[],l=0;256>l;l++)a[l]=(16>l?"0":"")+l.toString(16)},{}],177:[function(e,t,r){"use strict";function n(e){this.config=e,this.helpers=i,this._cache=new o}var i=e("../core/model-helpers"),o=e("../core/model-cache");t.exports=n,n.prototype.items=function(e){throw new Error("Method not implemented")},n.prototype.item=function(e,t){throw new Error("Method not implemented")},n.prototype.itemById=function(e,t){throw new Error("Method not implemented")}},{"../core/model-cache":175,"../core/model-helpers":176}],178:[function(e,t,r){(function(r){"use strict";function n(e){this.configuration=e;var t=e.get("remoteContextRoot");if("string"!=typeof t)throw new Error("RestApiConsumer needs remoteContextRoot variable to be set");/\/$/.test(t)===!1&&(t+="/"),this.baseUrl=t,this.logger=e.getLogger().child({childName:"rest-api-consumer"})}function i(e){return new n(e)}function o(e){return l.isObject(e)?"application/json":e&&e.indexOf("<?xml")>=0?"text/xml":"application/xml"}function s(e){return e.get("csrfToken")||null}var a=r.fetch,l=e("../../util")._;t.exports={RestApiConsumer:n,createInstance:i},n.prototype._encodeQueryParameters=function(e){var t=[];return Object.keys(e).forEach(function(r){l.isArray(e[r])?e[r].forEach(function(e){t.push(r+"[]="+encodeURIComponent(e))}):t.push(r+"="+encodeURIComponent(e[r]))}),t.join("&")},n.prototype._buildUrl=function(e,t){var r=this._encodeQueryParameters(t||{}),n=this.baseUrl+e;return r.length>0&&(n+=(e.indexOf("?")>=0?"&":"?")+r),n},n.prototype._makeRequest=function(e,t,r){var n=this,i=this._buildUrl(e,t);r=r||{},r.credentials=r.credentials||"same-origin",this.logger.debug("Making %s request to: %s",r.method,i);var o=a(i,r).then(function(e){if(e.status<200||e.status>=300){var t=new Error(e.statusText);throw t.response=e,t}return n.logger.debug("Request successful server responds %s",e.status),e});return o["catch"](function(e){n.logger.error("Request failed with: %s",e)}),o},n.prototype.get=function(e,t){return this._makeRequest(e,t,{method:"GET",headers:{Pragma:"no-cache","Cache-Control":"no-cache"}})},n.prototype.post=function(e,t){var r={};l.isObject(t)&&(t=JSON.stringify(t));var n=o(t);n&&(r["Content-Type"]=n);var i=s(this.configuration);return i&&(r[i.name]=i.value),this._makeRequest(e,{},{method:"POST",body:t,headers:r})},n.prototype.put=function(e,t){var r={};l.isObject(t)&&(t=JSON.stringify(t));var n=o(t);n&&(r["Content-Type"]=n);var i=s(this.configuration);return i&&(r[i.name]=i.value),this._makeRequest(e,{},{method:"PUT",body:t||"",headers:r})},n.prototype["delete"]=function(e,t){var r={},n=s(this.configuration);return n&&(r[n.name]=n.value),this._makeRequest(e,t,{method:"DELETE",headers:r})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../util":196}],179:[function(e,t,r){"use strict";var n=e("./xml-builder");t.exports=function(e){var t=new n;return t.beginElement("widget"),t.beginElement("properties"),e.forEach(function(e){var r={name:e.name};e.label&&(r.label=e.label),"boolean"==typeof e.localizable&&(r.localizable=e.localizable),e.viewhints&&e.viewhints.length>0&&(r.viewHint=e.viewhints.join(",")),t.beginElement("property",r),t.beginElement("value"),t.text(e.value),t.endElement("value"),t.endElement("property")}),t.endElement("properties"),t.endElement("widget"),t.toString()}},{"./xml-builder":181}],180:[function(e,t,r){"use strict";function n(e,t,r){i(e,{name:"widgetChrome",readonly:!1,value:"$(contextRoot)/static/backbase.com.2012.aurora/html/chromes/widget_none.html",viewhints:["select-one","designModeOnly","user"]}),t.content&&t.content.src&&i(e,{name:"src",readonly:!1,value:t.content.src}),t.settingsContent&&t.settingsContent.src&&i(e,{name:"settingsSrc",readonly:!1,value:t.settingsContent.src}),t.viewmodes&&t.viewmodes.length>0&&i(e,{name:"viewmodes",readonly:!1,value:t.viewmodes.join(" ")});var n={description:"Description"},o=["author","authorEmail","authorHref","license","licenseHref","shortName","description"];o.forEach(function(r){if(t[r]){var o=n[r]||r;i(e,{name:o,readonly:!1,value:t[r]})}});var s=t.icons||[];s.forEach(function(t,r){var n=0===r?"thumbnailUrl":"icon";i(e,{name:n,readonly:!1,value:t})});var a=t.preferences||[];a.forEach(function(t){i(e,t)})}function i(e,t){var r={name:t.name,readonly:t.readonly||!1};"boolean"==typeof t.manageable&&(r.manageable=t.manageable),"boolean"==typeof t.localizable&&(r.localizable=t.localizable),t.label&&(r.label=t.label),t.viewhints&&t.viewhints.length>0&&(r.viewHint=t.viewhints.join(",")),e.beginElement("property",r);var n=t.type||("order"===t.name?"double":"string");e.beginElement("value",{type:n}),e.text(t.value),e.endElement("value"),e.endElement("property")}var o=e("./xml-builder");t.exports=function(e,t){t=t||!1;var r=new o;return r.beginElement(t?"container":"widget"),e.name&&(r.beginElement("name"),r.text(e.name),r.endElement("name")),e.contextItemName&&(r.beginElement("contextItemName"),r.text(e.contextItemName),r.endElement("contextItemName")),e.extendedItemName&&(r.beginElement("extendedItemName"),r.text(e.extendedItemName),r.endElement("extendedItemName")),e.parentItemName&&(r.beginElement("parentItemName"),r.text(e.parentItemName),r.endElement("parentItemName")),"boolean"==typeof e.manageable&&(r.beginElement("manageable"),r.text(e.manageable?"true":"false"),r.endElement("manageable")),r.beginElement("properties"),n(r,e,t),r.endElement("properties"),e.tags&&e.tags.length>0&&(r.beginElement("tags"),e.tags.forEach(function(e){r.beginElement("tag",{type:e.type}),r.text(e.name),r.endElement("tag")}),r.endElement("tags")),e.id&&(r.beginElement("uuid"),r.text(e.id),r.endElement("uuid")),r.endElement(t?"container":"widget"),r.toString()}},{"./xml-builder":181}],181:[function(e,t,r){"use strict";function n(){this.xml='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'}t.exports=n,n.prototype.beginElement=function(e,t){var r="";t&&(r=Object.keys(t).reduce(function(e,r){return e+" "+r+'="'+t[r]+'"'},"")),this.xml+="<"+e+r+">"},n.prototype.endElement=function(e){this.xml+="</"+e+">"},n.prototype.text=function(e){this.xml+=e},n.prototype.toString=function(){return this.xml}},{}],182:[function(e,t,r){"use strict";function n(e,r){var n="generate"+r[0].toUpperCase()+r.substr(1);return t.exports[n](e)}function i(e){return s(e,!0)}var o=e("./widget-preferences-generator"),s=e("./widget-xml-generator");t.exports={generate:n,generateWidget:s,generateContainer:i,generateWidgetPreferences:o}},{"./widget-preferences-generator":179,"./widget-xml-generator":180}],183:[function(e,t,r){"use strict";function n(e,r){var n="parse"+r[0].toUpperCase()+r.substr(1);return t.exports[n](e)}function i(e){return function(t){var r=p.createLogger(),n=new DOMParser,i=n.parseFromString(t,"application/xml");return e(s(i),r)}}function o(e){return function(t){var r=p.createLogger(),n=new DOMParser,i=n.parseFromString(t,"application/xml");return a.toArray(s(i).children).map(function(t){return e(t,r)})}}function s(e){for(var t=e.firstChild;"xml"===t.tagName;)t=t.nextSibling;return t}var a=e("./xml/helpers"),l=e("./xml/widget"),c=e("./xml/link"),u=e("./xml/page"),p=e("backbase-widget-engine/src/util/logger-factory");t.exports={parse:n,parseWidget:i(l),parseWidgets:o(l),parseLink:i(c),parseLinks:o(c),parsePage:i(u),parsePages:o(u),parseContainer:i(l),parseContainers:o(l)}},{"./xml/helpers":186,"./xml/link":188,"./xml/page":189,"./xml/widget":190,"backbase-widget-engine/src/util/logger-factory":121}],184:[function(e,t,r){"use strict";function n(e,t){var r=[];return o.pushIfExists(r,t.thumbnailUrl),o.pushIfExists(r,t.icon),r}function i(e,t){var r=o.getProperty(e,"area"),n=o.parseFloat(r),i=o.getProperty(t,"area"),s=o.parseFloat(i),a=o.getProperty(e,"order"),l=o.parseFloat(a),c=o.getProperty(e,"order"),u=o.parseFloat(c),p=n,h=s;return o.isExists(r)&&o.isExists(i)?(isNaN(l)||isNaN(u))&&(p=r,h=i):(p=l,h=u),h>p?-1:p>h?1:0}var o=e("./helpers");t.exports={parseIcons:n,childComparator:i}},{"./helpers":186}],185:[function(e,t,r){t.exports.PROPERTY_BLACKLIST=["Description","shortName","thumbnailUrl","icon","viewmodes","author","authorEmail","authorHref","license","licenseHref","widgetChrome","config","src","settingsSrc","isManageableArea","version"]},{}],186:[function(e,t,r){"use strict";function n(e){return e&&e.value.length?e.value:void 0}function i(e){var t=n(e);return t?t.split(/[,\s]/).filter(function(e){return e.trim().length>0}):[]}function o(e){return"undefined"!=typeof e&&null!==e}function s(e,t,r,n){o(r)&&(e[t]=n?n(r):r)}function a(e,t){o(t)&&e.push(t)}function l(e){return o(e)?"string"==typeof e?"true"===e:e&&"true"===e.value:void 0}function c(e){return[].slice.call(e)}function u(e){return"string"==typeof e?parseFloat(e):void 0}function p(e,t){for(var r=c(e.children),n=0;n<r.length;n++)if(r[n].tagName===t)return r[n]}function h(e,t,r){var n=p(e,t);return"undefined"==typeof r&&(r=null),n&&n.textContent||r}function f(e,t){var r=e.preferences.filter(function(e){return e.name===t})[0];return r&&r.value}t.exports={assignIfExists:s,content:h,getProperty:f,isExists:o,parseBool:l,parseString:n,parseFloat:u,parseViewhint:i,pushIfExists:a,toArray:c,getChildElementByName:p}},{}],187:[function(e,t,r){"use strict";function n(e){var t=p.getChildElementByName(e,"properties"),r=p.toArray(t.children),n=p.content(e,"locale")||u.defaultLocale,s={},a=r.map(function(e){var t=i(e,n);return s[t.name]=t.value,t}).filter(function(e){return-1===c.indexOf(e.name)}),l={id:p.content(e,"uuid"),name:p.content(e,"name",""),shortName:s.shortName,preferences:a,preferencesDict:s,type:e.tagName,locale:n};return p.assignIfExists(l,"tags",o(e)),p.assignIfExists(l,"extendedItemName",p.content(e,"extendedItemName")),p.assignIfExists(l,"parentItemName",p.content(e,"parentItemName")),p.assignIfExists(l,"lockState",p.content(e,"lockState")),p.assignIfExists(l,"securityProfile",p.content(e,"securityProfile")),l}function i(e,t){var r=e.attributes,n=p.parseString(r.name),i=p.parseString(r.label),o=r.manageable,s=p.parseBool(r.readonly),l=r.localizable,c=r.viewHint&&p.parseViewhint(r.viewHint),u=r.type,h=null,f=p.toArray(e.getElementsByTagName("value")),d=f.map(function(e){var r=a(e);return r.locale===t&&(h=r),r});h||(h=d[0]);var g={name:n,readonly:s||!1,value:h.value};return i&&(g.label=i),o&&(g.manageable=p.parseBool(o)),c&&(g.viewhints=c),!u||"contentRef"!==u.value&&"linkRef"!==u.value?"contentRef"!==h.type&&"linkRef"!==h.type||(g.type=h.type):g.type=u.value,l&&(g.localizable=p.parseBool(l),g.localizable&&Object.keys(d).length>1&&(g._lang=d.reduce(function(e,t){var r=t.locale;return e[r]={value:t.value},e},{}))),g}function o(e){var t=p.getChildElementByName(e,"tags"),r=t&&p.toArray(t.children);return r&&r.map(s)}function s(e){return{type:e.attributes.type.value,name:p.parseString({value:e.textContent})}}function a(e){return{value:e.textContent,type:e.getAttribute("type"),locale:e.getAttribute("locale")}}var l=e("./constants"),c=l.PROPERTY_BLACKLIST,u=e("../../core/locale"),p=e("./helpers");t.exports=n},{"../../core/locale":174,"./constants":185,"./helpers":186}],188:[function(e,t,r){"use strict";function n(e){var t=h(e),r=t.preferencesDict,n=r.itemType;"menuHeader"===n&&(n="LINK");var d={children:[],itemType:n,title:r.title,locale:f.content(e,"locale","en")||u.defaultLocale,dir:f.content(e,"dir","ltr")};switch(n){case"LINK":i(d,r);break;case"divider":s(d,r);break;case"page":o(d,r);break;case"externalLink":a(d,r);break;case"redirect":l(d,r)}var g=c(e);return(g||[]).length>0&&(d.children=g),delete d.preferencesDict,p(t,d)}function i(e,t){e.navPattern=null}function o(e,t){e.itemRef=t.ItemRef,e.href=t.generatedUrl,t.Url&&(e.url=t.Url),e.generatedUrl=t.generatedUrl}function s(e,t){e.className=t.className}function a(e,t){e.url=t.Url}function l(e,t){e.redirectionMethod=t.redirectionMethod,e.url=t.Url,e.targetPage=t.targetPage}function c(e){var t=f.getChildElementByName(e,"children"),r=t&&f.toArray(t.children);return r&&r.map(n)}var u=e("../../core/locale"),p=e("lodash/object/merge"),h=e("./item"),f=e("./helpers");t.exports=n},{"../../core/locale":174,"./helpers":186,"./item":187,"lodash/object/merge":166}],189:[function(e,t,r){"use strict";function n(e){var t=s(e),r=t.preferencesDict,n={children:[],description:r.Description,dir:u.content(e,"dir","ltr"),icons:c.parseIcons(e,r),locale:u.content(e,"locale","en")||o.defaultLocale,title:r.title};u.assignIfExists(n,"manageable",u.parseBool(u.content(e,"manageable")));var a=i(e);return(a||[]).length>0&&(n.children=a),delete t.preferencesDict,l(t,n)}function i(e){var t=e.getElementsByTagName("children")[0],r=t&&u.toArray(t.children);return r&&r.map(a).sort(c.childComparator)}var o=e("../../core/locale"),s=e("./item"),a=e("./widget"),l=e("lodash/object/merge"),c=e("./common"),u=e("./helpers");t.exports=n},{"../../core/locale":174,"./common":184,"./helpers":186,"./item":187,"./widget":190,"lodash/object/merge":166}],190:[function(e,t,r){"use strict";function n(e,t){var r=c(e),n=r.preferencesDict,h={content:i(e,n),description:n.Description,dir:p.content(e,"dir","ltr"),icons:u.parseIcons(e,n),title:n.title};p.assignIfExists(h,"isManageableArea",p.parseBool(n.isManageableArea)),p.assignIfExists(h,"viewmodes",s(n)),p.assignIfExists(h,"manageable",p.parseBool(p.content(e,"manageable"))),p.assignIfExists(h,"author",n.author),p.assignIfExists(h,"authorEmail",n.authorEmail),p.assignIfExists(h,"authorHref",n.authorHref),p.assignIfExists(h,"width",n.width),p.assignIfExists(h,"height",n.height),p.assignIfExists(h,"version",n.version),p.assignIfExists(h,"license",n.license),p.assignIfExists(h,"licenseHref",n.licenseHref),p.assignIfExists(h,"settingsContent",o(e,n));var f=a(e);(f||[]).length>0&&(h.children=f);var d=n.datasources;if(d&&d.length)try{var g=JSON.parse(d);h.datasources=g.reduce(function(e,t){return e[t.name]=t,e},{})}catch(m){t.error(m.message)}return delete r.preferencesDict,
l(r,h)}function i(e,t){var r={src:"",type:"text/html",encoding:"UTF-8"};return p.assignIfExists(r,"src",t.src),p.assignIfExists(r,"config",t.config),r}function o(e,t){return p.isExists(t.settingsSrc)?{src:t.settingsSrc}:void 0}function s(e){var t=e.viewmodes,r=e.widgetChrome;return t?t.split(/\s+/):r&&r.indexOf("widget_none")<0?["windowed"]:[]}function a(e){var t=e.getElementsByTagName("children")[0],r=t&&p.toArray(t.children);return r&&r.map(n).sort(u.childComparator)}var l=e("lodash/object/merge"),c=e("./item"),u=e("./common"),p=e("./helpers");t.exports=n},{"./common":184,"./helpers":186,"./item":187,"lodash/object/merge":166}],191:[function(e,t,r){"use strict";function n(e){o.apply(this,[e])}function i(e){return new n(e)}var o=e("../core/model"),s=e("./xml-item-context"),a=e("./xml-item-collection-context");t.exports={XmlCxpModel:n,createInstance:i},n.prototype=Object.create(o.prototype),n.prototype.items=function(e){return new a(this.config,this._cache,e)},n.prototype.item=function(e,t){return new s(this.config,this._cache,e,t)},n.prototype.itemById=function(e,t){return new s(this.config,this._cache,e,t,!0)}},{"../core/model":177,"./xml-item-collection-context":192,"./xml-item-context":193}],192:[function(e,t,r){"use strict";function n(e,t,r,n){s.call(this,e,t,r,n),this.apiConsumer=a.createInstance(this.config)}var i=e("../parsers/xml-parser"),o=e("../generators/xml-generator"),s=e("../core/item-collection-context"),a=e("../core/rest-api-consumer");t.exports=n,n.prototype=Object.create(s.prototype),n.prototype.get=function(){var e=this.config.get("portalName"),t="portals/"+e+"/"+this.type+"s",r=this._filter,n=this._requiredParams,o=[],s=[];r&&(o=["f="+r.name+"("+r.operator+")"+encodeURIComponent(r.value)]),this._requiredParams&&(s=Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}));var a=o.concat(s).join("&");return t+=a.length>0?"?"+a:"",this.apiConsumer.get(t).then(function(e){return e.text()}).then(function(e){this.logger.info("Parsing %s",t);var r=i.parse(e,this.type+"s","container"===this.type);return this.logger.info("%s parsed successfully"),r}.bind(this))},n.prototype.filter=function(e,t,r){var i={name:e,value:t,operator:r||"eq"};return new n(this.config,this._cache,this.type,i)},n.prototype.create=function(e){var t=["parentItemName","extendedItemName"];t.forEach(function(t){if("undefined"==typeof e[t]||"string"!=typeof e[t]||0===e[t].length)throw new Error("ItemCollectionContext.create needs the model has the field named: "+t)});var r=this.config.get("portalName");e.contextItemName=r,"undefined"==typeof e.preferences&&(e.preferences=[]);var n=o.generate(e,this.type),s="portals/"+r+"/"+this.type+"s";return this.apiConsumer.post(s,n).then(function(e){return e.text()}).then(function(e){this.logger.info("Parsing newly created item's xml");var t=i.parse(e,this.type,"container"===this.type);return this.logger.info("Newly created item parsed successfully"),t}.bind(this))}},{"../core/item-collection-context":172,"../core/rest-api-consumer":178,"../generators/xml-generator":182,"../parsers/xml-parser":183}],193:[function(e,t,r){"use strict";function n(e,t,r,n,i){a.call(this,e,t,r,n,i),this.apiConsumer=s.createInstance(this.config)}var i=e("../parsers/xml-parser"),o=e("../generators/xml-generator"),s=e("../core/rest-api-consumer"),a=e("../core/item-context");t.exports=n,n.prototype=Object.create(a.prototype),n.prototype.get=function(e){return e&&this._cache.remove(this.itemType,this.itemName),this.findById?this._getItemById():this._getItemByName()},n.prototype._buildParams=function(){return Object.keys(this._requiredParams).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(this._requiredParams[e])}.bind(this)).join("&")},n.prototype._getItemByName=function(){var e=this._cache.get(this.itemType,this.itemName);if(e)return e;var t=this.config.get("portalName"),r=this.itemType+"s/"+this.itemName+".xml",n="portals/"+t+"/"+r,o=this._buildParams();return o.length>0&&(n+="?"+o),e=this.apiConsumer.get(n).then(function(e){return e.text()}).then(function(t){this.logger.info("Parsing response from [%s]",r);var n=i.parse(t,this.itemType,"container"===this.itemType);return this.logger.info("Response from [%s] parsed successfully",r),this._cache.update(this.itemType,n.id,e),this._cache.update(this.itemType,n.name,e),n}.bind(this))},n.prototype._getItemById=function(){var e=this._cache.get(this.itemType,this.itemName);if(e)return e;var t=this.config.get("portalName"),r=encodeURIComponent(this.itemName),n=this.itemType+"s",o=n+"?f=uuid(eq)"+r,s="portals/"+t+"/"+o,a=this._buildParams();return a.length>0&&(s+="&"+a),e=this.apiConsumer.get(s).then(function(e){return e.text()}).then(function(t){this.logger.info("Parsing response from [%s]",o);var r=i.parse(t,n,"container"===this.itemType);this.logger.info("Response from [%s] parsed successfully",o);var s=r[0];if(!s)throw new Error("Item of type ["+this.itemType+"] with id ["+this.itemName+"] not found");return this._cache.update(this.itemType,s.id,e),this._cache.update(this.itemType,s.name,e),s}.bind(this))},n.prototype.update=function(e){var t=this.config.get("portalName"),r="portals/"+t+"/"+this.itemType+"s/"+this.itemName,n=o.generate(e,this.itemType);return this.apiConsumer.put(r,n).then(function(){this._cache.remove(this.itemType,e.id),this._cache.remove(this.itemType,e.name),this.logger.info("%s named %s updated successfully",this.itemType,this.itemName)}.bind(this))},n.prototype.revert=function(){var e=this.config.get("portalName"),t="portals/"+e+"/"+this.itemType+"s/"+this.itemName+".xml";return this.apiConsumer["delete"](t).then(function(){this._cache.remove(this.itemType,this.itemName)}.bind(this))},n.prototype.remove=function(){var e=this.config.get("portalName"),t="portals/"+e+"/"+this.itemType+"s/"+this.itemName;return this.apiConsumer["delete"](t).then(function(){this._cache.remove(this.itemType,this.itemName)}.bind(this))}},{"../core/item-context":173,"../core/rest-api-consumer":178,"../generators/xml-generator":182,"../parsers/xml-parser":183}],194:[function(e,t,r){"use strict";var n=e("./strategies/html5-item-renderer"),i=function(e){return e.get("contextRoot")||e.set("contextRoot",""),e.get("remoteContextRoot")||e.set("remoteContextRoot",""),new n(e)};t.exports={createInstance:i}},{"./strategies/html5-item-renderer":195}],195:[function(e,t,r){(function(r){"use strict";var n=e("handlebars/dist/handlebars.min"),i=e("handlebars-helpers"),o=e("promise-extensions")(Promise),s=e("browser-bunyan"),a=e("../../util")._,l=r.fetch,c=["windowed","maximized"],u={},p=n.create();Object.keys(i).forEach(function(e){p.registerHelper(e,i[e])});var h=function(e){if(this.config=e,!this.config.get("itemEngineLocator"))throw new Error("You must provide an item engine locator");this.log=e.getLogger().child({childName:"html5-item-renderer"}),this.plugins=[],this.features=[],this._widgetEngines=[]};t.exports=h,h.prototype.start=function(e,t,r){if(!e||0===e.length)return o.resolve();r=r||{};var n=this.log,i=this;n.info("Starting item tree rendering..."),n.level()<=s.TRACE&&n.trace("Item tree model is this:\n %s",JSON.stringify(e,null,"	"));for(var l=Date.now();t.firstChild;)t.removeChild(t.firstChild);var c=a.isArray(e)?e:[e],u=r.useChrome!==!1?i._loadChromeTemplate(i.config.get("chromeSrc")):o.resolve(null);return u.then(function(e){var r=[];return c.forEach(function(n){var o=i._createChromeNode(n,t,e);r.push(i._renderItem(n,o,{chromeTemplate:e}))}),o.settleAll(r)}).then(function(e){n.info("Item tree rendering complete.");var t=Date.now()-l,r={time:t,failures:[]};r=e.reduce(function(e,t){if(t.isRejected()){var r="function"==typeof t.reason.cause?t.reason.cause():t.reason;e.failures.push(r)}return e},r);var i=r.failures.length;if(i>0&&n.warn("%s/%s items failed to load.",i,e.length),i===e.length){var o=new Error("All items in a rendering tree failed to render");throw o.result=r,o}return r})},h.prototype.addFeature=function(e){return"object"==typeof e&&this.features.push(e),this},h.prototype.addPlugin=function(e){return"object"==typeof e&&this.plugins.push(e),this},h.prototype._renderItem=function(e,t,r){var n=this,i=this.config,s=i.get("itemEngineLocator"),a="";e.content&&e.content.src?a=e.content.src.replace(/\/[^\/]+$/,""):e.content&&e.content.config&&(a=e.content.config.replace(/\/[^\/]+$/,"")),a=a.replace(/\$\(contextRoot\)/,i.get("contextRoot"));var l=s.locate(e,{widgetUrl:a,widgetEl:t,initialModel:e,locale:e.locale,configVars:{authenticatedUserName:i.get("authenticatedUserName"),contextRoot:i.get("contextRoot"),designmode:i.get("designmode"),isAdmin:i.enabled("isAdmin"),isManager:i.enabled("isManager"),isMasterPage:i.enabled("isMasterPage")},log:this.log});this.plugins.forEach(function(e){"function"==typeof l.addPlugin&&l.addPlugin(e)}),this.features.forEach(function(e){"function"==typeof l.addFeature&&l.addFeature(e)});var c=l.start(e,t);return c.delay(0).then(function(t){n._widgetEngines.push(l);var i=[],s=t.areaNodes;if(s)for(var a in s)if(s.hasOwnProperty(a)){var c=e.children.filter(function(e){return n.config.util.getPreferenceValue(e,"area")===a});n.log.info("Rendering %s child item(s) for area [%s] of item [%s]...",c.length,a,t.id),c.forEach(function(e){var t=n._createChromeNode(e,s[a],r.chromeTemplate);i.push(n._renderItem(e,t,r))})}return o.all(i)})},h.prototype.destroyAllItems=function(){this._widgetEngines.forEach(function(e){e.destroy()}),this._widgetEngines=[]},h.prototype.destroyItem=function(e){var t=this._widgetEngines.filter(function(t){return t.widgetEngine.config.initialModel.id===e})[0];if(t){t.destroy();var r=this._widgetEngines.indexOf(t);this._widgetEngines.splice(r,1)}},h.prototype.rerenderItem=function(e,t,r){var n=document.createElement("div"),i=document.querySelector('[data-chrome="'+t+'"]');return i.parentNode.insertBefore(n,i),this.destroyItem(e),this.start(r,n).then(function(){var e=n.firstElementChild;n.parentNode.insertBefore(e,n),n.parentNode.removeChild(n)})},h.prototype._createChromeNode=function(e,t,n){var i,o="data-widget-holder",s="*["+o+"]";if(n&&e.viewmodes&&c.indexOf(e.viewmodes[0])>=0){var a=n(e);t.insertAdjacentHTML||(t.insertAdjacentHTML=function(e,r){var n,i=this.ownerDocument.createElement("div");for(i.innerHTML=r;n=i.firstChild;)t.appendChild(n)});var l=r.document.createElement("div");if(l.innerHTML=a,l.querySelector(s)){t.insertAdjacentHTML("beforeend",a);var u=t.querySelectorAll(s);i=u[u.length-1]}else this.log.warn('Chrome layout doesn\'t have an element with "data-widget-holder" attribute. Falling back to blank chrome.')}return i||(i=r.document.createElement("div"),i.setAttribute("data-chrome",e.name),i.setAttribute(o,""),t.appendChild(i)),i},h.prototype._loadChromeTemplate=function(e){if(!e){var t="No chrome template is defined. Widgets with 'windowed' or 'maximized' viewmodes will not be displayed with chrome";return this.log.warn(t),o.resolve(null)}var r=this.config.get("contextRoot"),n=e.replace(/\$\(contextRoot\)/,r),i=this.log,s=u[n];return s||(i.debug("Requesting chrome template from %s",n),s=l(n,{credentials:"same-origin"}).then(function(e){if(i.debug("Chrome template request resolved. Status: %s",e.status),0===e.status||200===e.status)return e.text();throw new Error(e.statusText)}).then(function(e){i.trace("Chrome template body\n: %s",e),i.debug("Compiling handlebars template instance from %s",n);try{return p.compile(e)}catch(t){throw i.error("There was a problem compiling a handlebars template"),t}})["catch"](function(e){return i.error(e),delete u[n],null}),u[n]=s),s}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../util":196,"browser-bunyan":132,"handlebars-helpers":133,"handlebars/dist/handlebars.min":134,"promise-extensions":168}],196:[function(e,t,r){"use strict";t.exports._={isArray:e("lodash/lang/isArray"),isObject:e("lodash/lang/isObject"),merge:e("lodash/object/merge")},t.exports.arrayToObject=function(e,t,r){return(r||[]).reduce(function(r,n){var i=n[e];return r[i]=n[t],r},{})}},{"lodash/lang/isArray":157,"lodash/lang/isObject":160,"lodash/object/merge":166}],197:[function(e,t,r){!function(){function e(e){var t=e.__resizeTriggers__,r=t.firstElementChild,n=t.lastElementChild,i=r.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,i.style.width=r.offsetWidth+1+"px",i.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight}function t(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height}function r(r){var n=this;e(this),this.__resizeRAF__&&a(this.__resizeRAF__),this.__resizeRAF__=s(function(){t(n)&&(n.__resizeLast__.width=n.offsetWidth,n.__resizeLast__.height=n.offsetHeight,n.__resizeListeners__.forEach(function(e){e.call(n,r)}))})}function n(){if(!o){var e=(y?y:"")+".resize-triggers { "+(b?b:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)),t.appendChild(r),o=!0}}var i=document.attachEvent,o=!1;if(!i){var s=function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};return function(t){return e(t)}}(),a=function(){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(t){return e(t)}}(),l=!1,c="animation",u="",p="animationstart",h="Webkit Moz O ms".split(" "),f="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),d="",g=document.createElement("fakeelement");if(void 0!==g.style.animationName&&(l=!0),l===!1)for(var m=0;m<h.length;m++)if(void 0!==g.style[h[m]+"AnimationName"]){d=h[m],c=d+"Animation",u="-"+d.toLowerCase()+"-",p=f[m],l=!0;break}var v="resizeanim",y="@"+u+"keyframes "+v+" { from { opacity: 0; } to { opacity: 0; } } ",b=u+"animation: 1ms "+v+"; "}window.addResizeListener=function(t,o){i?t.attachEvent("onresize",o):(t.__resizeTriggers__||("static"==getComputedStyle(t).position&&(t.style.position="relative"),n(),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=document.createElement("div")).className="resize-triggers",t.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',t.appendChild(t.__resizeTriggers__),e(t),t.addEventListener("scroll",r,!0),p&&t.__resizeTriggers__.addEventListener(p,function(r){r.animationName==v&&e(t)})),t.__resizeListeners__.push(o))},window.removeResizeListener=function(e,t){i?e.detachEvent("onresize",t):(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(e.removeEventListener("scroll",r),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)))}}()},{}],198:[function(e,t,r){"use strict";!function(e){var t=e.prototype,r=t.parseFromString;t.parseFromString=function(e,t){if(/^\s*text\/html\s*(?:;|$)/i.test(t)){var n=document.implementation.createHTMLDocument("");return e.toLowerCase().indexOf("<!doctype")>-1?n.documentElement.innerHTML=e:n.body.innerHTML=e,n}return r.apply(this,arguments)}}(DOMParser),window.system_scroll=window.scroll,window.scroll=function(e,t){window.cxp.mobile.scrollTo(""+e,""+t),window.system_scroll(e,t)}},{}],199:[function(e,t,r){"use strict";window.b$.module("gadgets.pubsub",function(){function e(e,t,r,n){"boolean"!=typeof r&&(r=!0),a.publish(e,t,r,n)}function t(e,t){a.subscribe(e,t)}function r(e,t){a.unsubscribe(e,t)}function n(e){a.flush(e)}var i=window.b$.Class,o=i.extend(function(){this.callbacks=[]},{queue:[],subscribe:function(e){this.callbacks.push(e)},unsubscribe:function(e){e?this.callbacks=this.callbacks.filter(function(t){return t!==e}):this.callbacks=[]},publish:function(e,t){t&&this.flush(),this.callbacks.forEach(function(t){t(e)})},flush:function(){this.queue=[]}}),s=i.extend(function(){this.channels={}},{subscribe:function(e,t){this.channels[e]||(this.channels[e]=new o),this.channels[e].subscribe(t),window.cxp.mobile.subscribe(e)},unsubscribe:function(e,t){this.channels[e]&&(this.channels[e].unsubscribe(t),window.cxp.mobile.unsubscribe(e))},publish:function(e,t,r,n){this.channels[e]&&this.channels[e].publish(t,r),t=t||{},n=n||"","SYSTEM"!==n&&window.cxp.mobile.publish(e,JSON.stringify(t),n)},flush:function(e){this.channels[e]&&this.channels[e].flush()}}),a=new s;this.publish=e,this.subscribe=t,this.unsubscribe=r,this.flush=n})},{}],200:[function(e,t,r){"use strict";window.cxp=window.cxp||{},window.mobile=window.mobile||{},window.cxp.mobile=window.mobile,window.cxp.mobile.render=function(t,r,n,i,o,s,a,l){e("./common/dom-parser-polyfill"),e("javascript-detect-element-resize"),e("./common/pubsub");var c,u=/(iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent);if(u){console.info("Portal Client Mobile is rendering in iOS mode");var p=e("./platforms/ios/ios-cxp-bridge");p.enable(),c=e("./platforms/ios/ios-page-renderer")}else console.info("Portal client mobile is rendering in Android mode"),c=e("./platforms/android/android-page-renderer");window.cxp.mobile.plugins=o;var h=new c;h.render(document.getElementById(t),i,{portalName:l,localContextRoot:r,remoteContextRoot:n,syncPreferences:a,logLevel:s})},window.renderWidget=window.cxp.mobile.render},{"./common/dom-parser-polyfill":198,"./common/pubsub":199,"./platforms/android/android-page-renderer":204,"./platforms/ios/ios-cxp-bridge":205,"./platforms/ios/ios-page-renderer":206,"javascript-detect-element-resize":197}],201:[function(e,t,r){"use strict";var n=function(e){this.size=e||1e3,this.buffer=[],this.decoratedStreams=[]};n.prototype.decorateStream=function(e){this.decoratedStreams.push(e)},n.prototype.write=function(e){this.buffer.length>=this.size&&this.buffer.shift(),this.buffer.push(e)},n.prototype.flush=function(){for(var e;e=this.buffer.shift();)this.decoratedStreams.forEach(function(t){t.write(e)})},n.prototype.clear=function(){this.buffer=[]},t.exports=n},{}],202:[function(e,t,r){"use strict";function n(e){e=e||{},this.printLevel=!!e.printLevel,this.printTimestamp=!!e.printTimestamp}n.prototype.write=function(e){function t(e,t){return Array(t+1-(e+"").length).join("0")+e}function r(){return"["+t(e.time.getHours(),2)+":"+t(e.time.getMinutes(),2)+":"+t(e.time.getSeconds(),2)+":"+t(e.time.getMilliseconds(),4)+"]"}var n,i=e.childName?e.name+"/"+e.childName:e.name;n=e.level<30?"log":e.level<40?"info":e.level<50?"warn":"error";var o=this.printTimestamp?r()+" ":"",s=this.printLevel?e.levelName.toUpperCase()+": ":"";console[n](o+s+i+": "+e.msg)},t.exports=n},{}],203:[function(e,t,r){(function(e){"use strict";var r=e.document,n=function(){};n.prototype.write=function(e){var t=r.createElement("IFRAME");t.setAttribute("src","log://?type="+e.levelName+"&msg="+e.msg+" ("+e.time+")"),r.documentElement.appendChild(t),t.parentNode.removeChild(t),t=null},t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],204:[function(e,t,r){"use strict";var n=e("../../render/page-renderer"),i=e("../../logging/console-plain-log-stream"),o=function(){n.call(this)};o.prototype=Object.create(n.prototype),o.prototype._createLogStreams=function(e){return[{level:e,stream:new i}]},o.prototype._doRender=function(e,t,r){var n=e.features?e:e.children;t.start(n,r).then(function(e){var t="Item tree rendered in "+e.time+"ms",r=document.getElementsByTagName("html")[0],n=function(){window.cxp.mobile.resize(r.scrollHeight)};window.addResizeListener(r,n),console.log(t),window.cxp.mobile.itemLoaded()})["catch"](function(e){console.log(e)})},t.exports=o},{"../../logging/console-plain-log-stream":202,"../../render/page-renderer":212}],205:[function(e,t,r){(function(e){"use strict";var r=e.window,n=e.document;t.exports={enable:function(){function e(e){var t=n.createElement("IFRAME");t.setAttribute("src",e),n.documentElement.appendChild(t),t.parentNode.removeChild(t),t=null}function t(t){e("cxp-loaded://?time="+t)}function i(){e("cxp-reload://")}function o(t,r){e("cxp-resize://?w="+t+"&h="+r)}function s(t,r){e("cxp-scroll://?x="+t+"&y="+r)}function a(t,r,n){e("cxp-publish://?event="+encodeURIComponent(t)+"&type="+encodeURIComponent(n)+"&payload="+encodeURIComponent(r))}function l(t){e("cxp-subscribe://?event="+encodeURIComponent(t))}function c(t){e("cxp-unsubscribe://?event="+encodeURIComponent(t))}function u(){if(0!==arguments.length){var t=[];Array.prototype.push.apply(t,arguments);for(var r=t.shift(),n=t.shift(),i=t,o=0;o<i.length;o++)i[o]=encodeURIComponent(i[o]);e("cxp-plugin://?plugin="+encodeURIComponent(r)+"&method="+encodeURIComponent(n)+"&params="+i.join("&params="))}}function p(e,t,n,i,o){for(var s="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,r="x"==e?t:3&t|8;return r.toString(16)}),a=[e,t,s].join("."),l=function(){r.gadgets.pubsub.unsubscribe("plugin.success."+a,c),r.gadgets.pubsub.unsubscribe("plugin.error."+a,p)},c=function(e){e.keep||l(),i&&i(e.data)},p=function(e){e.keep||l(),o&&o(e.data)},h=0;h<n.length;h++){var f=n[h];"object"==typeof f&&(n[h]=JSON.stringify(f))}return r.gadgets.pubsub.subscribe("plugin.success."+a,c),r.gadgets.pubsub.subscribe("plugin.error."+a,p),u.apply(r.cxp.mobile,[e,t,s].concat(n)),s}r.XMLHttpRequest&&!function(e){XMLHttpRequest.prototype.send=function(t){this.setRequestHeader("cxp.nsurlrequest.webview","true"),e.call(this,t)}}(XMLHttpRequest.prototype.send),r.cxp.mobile={loaded:t,reload:i,resizeTo:o,scrollTo:s,publish:a,subscribe:l,unsubscribe:c,callPlugin:p}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],206:[function(e,t,r){"use strict";var n=e("../../render/page-renderer"),i=e("../../logging/console-plain-log-stream"),o=e("../../logging/iframe-bridge-log-stream"),s=e("../../logging/buffered-log-stream"),a=function(){n.call(this)};a.prototype=Object.create(n.prototype),a.prototype._createLogStreams=function(e){var t=new i({printTimestamp:!0,printLevel:!0}),r=new s;r.decorateStream(t),window.bufferedLogStream=r;var n=new o;return[{level:e,stream:n},{level:e,stream:t},{level:e,stream:r}]},a.prototype._doRender=function(e,t,r){var n=document.getElementsByTagName("html")[0];window.addResizeListener(n,function(){window.cxp.mobile.resizeTo(n.scrollWidth,n.scrollHeight)});var i=e.features?e:e.children;t.start(i,r).then(function(e){window.cxp.mobile.loaded(e.time),window.cxp.mobile.resizeTo(n.scrollWidth,n.scrollHeight);var t="CXPMobile Widget-Engine: Item tree rendered in "+e.time+"ms";console.log(t)})["catch"](function(e){console.log(e)})},t.exports=a},{"../../logging/buffered-log-stream":201,"../../logging/console-plain-log-stream":202,"../../logging/iframe-bridge-log-stream":203,"../../render/page-renderer":212}],207:[function(e,t,r){"use strict";t.exports=function(e){return e=e||[],{name:"add-feature-plugin",postRead:function(t){return 0===e.length?t:(Array.isArray(t.features)||(t.features=[]),e.forEach(function(e){var r=t.features.some(function(t){return t.name===e});r||t.features.push({name:e,required:!1})}),t)}}}},{}],208:[function(e,t,r){"use strict";t.exports=function(){return{name:"expose-children-plugin",preRender:function(e,t,r){return e.children=r.children?r.children.map(function(e){return{id:e.id,name:e.name}}):[],e}}}},{}],209:[function(e,t,r){"use strict";t.exports=function(){return{name:"ice-workaround-plugin",postRead:function(e){var t=e.preferences.filter(function(e){return"templateUrl"===e.name})[0];return t&&(t._ignoreReplace=!0),e}}}},{}],210:[function(e,t,r){"use strict";var n=36e5,i=24*n,o={credentials:"same-origin"},s={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",html:"text/html",js:"application/javascript",css:"text/css"},a=function(e){return[].slice.call(e)},l=function(e){var t=document.createElement("template");return t.innerHTML=e,t.content.firstChild},c=function(e,t){var r=e.parentNode,n=l(t);return r.replaceChild(n,e),n},u=function(e,t,r){return e+"/contenttemplates/rendered?contextItemName="+t+"&uuid="+r},p=function(e){var t=(new window.DOMParser).parseFromString("<foo>"+e+"</foo>","text/xml");return t&&t.childNodes&&t.childNodes[0]&&t.childNodes[0].textContent},h=function(e){var t=e.match(".([^.]+)$")[1];return s[t]},f=function(e,t){var r=document.createEvent("HTMLEvents");r.initEvent(t,!0,!0),e.dispatchEvent(r)},d=function(e){return e.match(/^[^\/]+\/\/[^\/]+/)},g=window.localStorage,m=function(e){return"moc-cache-"+e},v=function(e,t){var r=window.cxp&&window.cxp.mobile&&window.cxp.mobile.plugins&&window.cxp.mobile.plugins.SimpleStorage;return new Promise(function(t,n){if(r)r.getItem(function(e){e?t(JSON.parse(e)):t()},function(){t()},m(e));else{var i=g[m(e)];i?t(JSON.parse(i)):t()}})},y=function(e,t){var r=window.cxp&&window.cxp.mobile&&window.cxp.mobile.plugins&&window.cxp.mobile.plugins.SimpleStorage;return new Promise(function(n,i){r?r.setItem(n,i,m(e),JSON.stringify(t)):(g[m(e)]=JSON.stringify(t),n())})},b=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){var r=document.createElement("canvas");r.width=this.naturalWidth,r.height=this.naturalHeight,r.getContext("2d").drawImage(this,0,0),t(r.toDataURL(h(e)))},n.onerror=function(){r()},n.src=e})},w=function(e,t,r){return fetch(u(e,t,r),o).then(function(e){return e.status>=200&&e.status<300?Promise.resolve(e.text()):Promise.reject(e.statusText)}).then(function(e){return e.split(/([^"]+\/content\/bbp\/repositories\/[^"]+)/g)}).then(function(t){return Promise.all(t.map(function(t){return/\/content\/bbp\/repositories\//.test(t)?b(d(e)+p(t)):t}))}).then(function(e){return e.join("")})},x=function(e,t,r){return v(r.id).then(function(o){var s=r.preferences.widgetContentsUpdated?r.preferences.widgetContentsUpdated.value:0,a=r.preferences.contentsExpiry?r.preferences.contentsExpiry.value*n:i,l=r.preferences.contentsCached?"true"===r.preferences.contentsCached.value:!0;return l&&o&&o.cacheKey&&o.cacheKey===s?o.data:l&&o&&o.expiry>Date.now()?o.data:w(e,t,r.id).then(function(e){return y(r.id,{cacheKey:s,expiry:s?void 0:Date.now()+(a||i),data:e}),e})})};t.exports=function(e){return{name:"mobile-optimized-content-plugin",postRender:function(t,r,n){var i=t.features.cxp.config.get("portalName"),o=a(t.body.getElementsByTagName("g:include")).filter(function(e){return/\/contenttemplates\/rendered/.test(e.getAttribute("src"))&&0===e.querySelectorAll('[name="templateUrl"]').length}).map(function(t){var r=c(t,t.outerHTML.replace(/g:include/g,"moc:include"));return x(e,i,n).then(function(e){c(r,e)})});return o.length&&Promise.all(o).then(function(){f(t.body,"contentLoaded")})["catch"](function(){f(t.body,"contentError")}),t}}}},{}],211:[function(e,t,r){(function(e){"use strict";var r=e.window;t.exports=function(e){return r.cxp&&!r.cxp.mobile.syncPreferences&&(r.cxp.mobile.syncPreferences={listeners:[],update:function(e,t,r){this.listeners.forEach(function(n){n.call(null,e,t,r)})},addListener:function(e){this.listeners.push(e)}}),{name:"sync-preferences-plugin",preRender:function(t,n,i){return i.preferences.forEach(function(r){!r.readonly&&r.name in e&&("__null__"===e[r.name]&&(e[r.name]=null),t.preferences.setItem(r.name,e[r.name]))}),r.cxp.mobile.syncPreferences.addListener(function(r,n,i){if(t.preferences.hasOwnProperty(n)&&n in e){t.preferences._eventsEnabled=!1;try{"setItem"===r?t.preferences.setItem(n,i):"removeItem"===r&&t.preferences.setItem(n,null)}catch(o){console.log(o)}t.preferences._eventsEnabled=!0}}),t.addEventListener("storage",function(t){if(t.key in e){var n=t.newValue,i=r.cxp.mobile.plugins.SyncedPreferences;i&&i.setItem(null,null,t.key,n)}}),t}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],212:[function(e,t,r){(function(r){"use strict";var n=r.window||{};r.window||(r.window=n);var i=e("cxp-web-apis"),o=e("backbase-widget-engine/src/plugins/replace-config-vars-plugin"),s=e("backbase-widget-engine/src/plugins/backbase-format-plugin"),a=e("./webview-widget-engine"),l=e("../plugins/add-feature-plugin"),c=e("../plugins/expose-children-plugin"),u=e("../plugins/ice-workaround-plugin"),p=e("../plugins/sync-preferences-plugin"),h=e("../plugins/mobile-optimised-content-plugin"),f="bbCSRF",d=f,g=function(e){};g.prototype.render=function(e,t,r){r=r||{};var n=r.logLevel||"warn",f=r.localContextRoot||"",g=r.remoteContextRoot||"",m=r.portalName||"anonymous-portal",v=r.syncPreferences||[],y=i.createConfiguration({contextRoot:f,remoteContextRoot:g,logStreams:this._createLogStreams(n)});y.set("portalName",m),y.set("itemEngineLocator",{locate:function(e,t){return a(e,t,f)}});var b=null;b&&y.set("csrfToken",{name:d,value:b});var w=i.getRenderer(y);w.addPlugin(h(y.get("remoteContextRoot"))),w.addPlugin(c()),w.addPlugin(u()),w.addPlugin(new o({contextRoot:f,remoteContextRoot:g},{full:!0}));var x={contextRoot:y.get("contextRoot"),remoteContextRoot:y.get("remoteContextRoot"),makeIncludedRefsAbsolute:!0},_=y.get("csrfToken");_&&(x.csrfToken=_),w.addPlugin(new s(x)),w.addPlugin(p(v));var E={name:"cxp",config:y,render:w,model:i.getModel(y)};w.addPlugin(l([E.name])),w.addFeature(E),this._doRender(t,w,e)},g.prototype._createLogStreams=function(e){throw new Error("PageRenderer#_createLogStreams must be overridden.")},g.prototype._doRender=function(e,t,r){throw new Error("PageRenderer#_doRender must be overridden.")},t.exports=g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../plugins/add-feature-plugin":207,"../plugins/expose-children-plugin":208,"../plugins/ice-workaround-plugin":209,"../plugins/mobile-optimised-content-plugin":210,"../plugins/sync-preferences-plugin":211,"./webview-widget-engine":213,"backbase-widget-engine/src/plugins/backbase-format-plugin":101,"backbase-widget-engine/src/plugins/replace-config-vars-plugin":109,"cxp-web-apis":171}],213:[function(e,t,r){"use strict";var n=e("backbase-widget-engine/src/exports/webview-kit");t.exports=function(e,t,r){var i=e.children?n.ContainerEngine:n.WidgetEngine,o=new i({log:t.log});return o.init({widgetUrl:t.widgetUrl,widgetEl:t.widgetEl,initialModel:e,configVars:{contextRoot:r}}),o}},{"backbase-widget-engine/src/exports/webview-kit":100}]},{},[200]);
//# sourceMappingURL=portal-client-mobile.min.js.map
