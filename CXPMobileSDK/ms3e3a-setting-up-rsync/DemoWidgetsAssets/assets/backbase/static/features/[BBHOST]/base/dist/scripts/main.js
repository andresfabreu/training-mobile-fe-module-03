!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery"),require("angular"),require("lodash")):"function"==typeof define&&define.amd?define(["jquery","angular","lodash"],t):"object"==typeof exports?exports.base=t(require("jquery"),require("angular"),require("lodash")):e.base=t(e.jquery,e.angular,e.lodash)}(this,function(e,t,n){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var i;i=function(require,e,t){"use strict";var i=n(1),o=window,r=i.NS;o[r]=o[r]||{},e.NS=r,e.$=n(2),n(3),e.ng=window.angular,e.utils=n(4),e.bus=n(9),e.Promise=n(10),e.fetch=n(11),e.log=n(12),e.error=n(13),e.queue=n(14),e.Widget=n(15),e.portal=n(16),e.startPortal=n(17),e.getWidgetsInfo=n(22),e.createModule=n(23),e.requireWidget=o.requireWidget||n(24),e.bootstrap=function(t,n){return e.ng.bootstrap(t,n)},e.inject=function(t,n){var i=["ng"];return e.utils.isEmpty(n)||i.push(n),e.ng.injector(i).get(t)}}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(require,e,t){"use strict";e.NS="launchpad"}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){var i;i=function(require,e,t){"use strict";var i=n(5).noConflict();i.mixin(n(6)),i.mixin(n(7)),i.mixin(n(8)),t.exports=i}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t){e.exports=n},function(e,t,n){var i;i=function(require,e,t){"use strict";var i=n(5),o=n(1).NS,r=window;e.isMobileDevice=function(){if(r[o].mobileSDK)return!0;for(var e=[/iPhone|iPad|iPod/i,/Android/i,/BlackBerry/i,/Opera Mini/i,/IEMobile/i,/MeeGo/i],t=0,n=e.length;n>t;t++)if(navigator.userAgent.match(e[t]))return!0;return!1},e.isb$Mocked=function(){var e=r.b$;return i.isUndefined(e)||Boolean(e.isMocked)===!0||i.isUndefined(e.bdom)}}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(require,e,t){"use strict";var i=n(5);e.resolvePortalPlaceholders=function(e){var t=window.b$.portal.config.serverRoot||"";if(i.isString(e)){var n=["$(contextRoot)","$(contextPath)","$(servicesPath)"];e=i.reduce(n,function(e,n){return e.replace(n,t)},e)}return e}}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(require,e,t){"use strict";var i=n(5);e.deprecate=function(e,t,n){function o(e){var t=i.template(e),o=window.console,r=t(n);!a&&i.isObject(o)&&(o.warn(r),a=!0)}function r(){return o(t),e.apply(this,arguments)}var s=window.launchpad&&window.launchpad.config&&window.launchpad.config.usemin;if(s)return e;var a=!1;return i.isString(e)||!s?o(e):r}}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(require,e,t){"use strict";t.exports=window.gadgets&&window.gadgets.pubsub}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(require,e,t){"use strict";n(3);var i=window.angular;t.exports=window.Promise||function(e){var t=i.extend(function(t){var n=e.defer();return t(n.resolve,n.reject),n.promise},e);return t.resolve=function(t){return e.when(t)},t}(i.injector(["ng"]).get("$q"))}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(require,e,t){"use strict";n(3);var i=window.angular;t.exports=i.injector(["ng"]).get("$http")}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(require,e,t){"use strict";n(3);var i=window.angular;t.exports=i.injector(["ng"]).get("$log")}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(require,e,t){"use strict";e.captureException=function(e,t){},e.createException=function(e){function t(t){this.name=e||"Error",this.message=t||"Unknown Message"}return t.prototype=new Error,t.prototype.constructor=t,t}}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(require,e,t){"use strict";function i(e){return a.reduce(function(t,n,i,o){return n.contextId===e&&t.push(o.splice(i,1)[0]),t},[])}function o(e,t){var n=[],o=t?i(t):a;if("clear"===e)o.length=0;else for(;o.length;)n.push(o.shift()[e]());return r.all(n)}var r=n(10),s={__onPushCallbacks:[]},a=[];s.queue=a,s.__runPushCallbacks=function(e,t){s.__onPushCallbacks.forEach(function(n){n(e,t)})},s.push=function(e,t){return new r(function(n,i){var o={contextId:e.contextId,retry:function(){return r.resolve(t()).then(n,i)},cancel:i};a.push(o),s.__runPushCallbacks(e,o)})},s.hasMore=function(){return a.length>0},s.onPush=function(e){s.__onPushCallbacks.push(e)},s.retry=function(e){return e.retry().then(function(){return o("clear",e.contextId)})},s.cancel=function(e){return o("cancel",e.contextId)},t.exports=s}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(require,e,t){"use strict";{var i=n(4),o=window;o.b$}if(i.isb$Mocked())return!1;var r=o.b$.bdom.getNamespace("http://backbase.com/2013/portalView"),s=t.exports=r.getClass("backbaseWidget");s.prototype.createDisplay=function(e){this._displayed=this._displayed||e;var t=!bd.designMode&&!this._displayed&&"LauncherContainer"===this.parentNode.tagName&&("2"===this.getPreference("area")||"3"===this.getPreference("area"))&&this.getPreference("widgetChrome").indexOf("chrome-tab")>-1;t||(this._displayed=!0,this.constructor.superClass.prototype.createDisplay.call(this))},s.prototype.getPreferenceFromParents=function(e){var t=function(e,n){var i;return n.getPreference&&"application"!==n.tagName&&(i=n.getPreference(e),!i&&n.parentNode&&(i=t(e,n.parentNode))),i};return t(e,this)}}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(require,e,t){"use strict";t.exports=function(){}}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(require,e,t){"use strict";var i=n(4),o=n(11),r=n(18),s=n(15),a=n(19),c=n(20),u=function(e){var t=window.be&&window.be.xmlToJson;return t({xml:e})};t.exports=function(e,t){var n=t.portalView.getElementsByTagName("page")[0],l=function(e){var i={logoutUrl:e.serverRoot+"/j_spring_security_logout?portalName="+t.portalName,redirectUrl:e.serverRoot+e.defaultLandingPage,sessionUrl:e.sessionEndpoint,pingUrl:e.sessionValidateEndpoint,startCountdown:e.startCountdownAt,pingInterval:e.sessionCheckInterval,notifyAfterTimeoutDuration:e.notifyAfterTimeoutDuration};JSON.parse(n.getPreference("enableTimeout"))&&r.getInstance(i).init()},f=function(){var e=[t.config.serverRoot,"portals",t.portalName+".xml?pc=false"].join("/"),n=function(e){var n=u(e);return t.config=i.chain(n.portal.properties).mapValues("value").mapKeys(function(e,t){return i.camelCase(t)}).assign(t.config).value(),t.config};return o({url:e,responseType:"document",transformResponse:n}).then(function(e){return e.data})},p=function(e){var n=window.bd&&window.bd.uiEditingOptions;return e.chromes=n&&n.widgetPreferenceSelections?n.widgetPreferenceSelections.widgetChrome:[],i.assign(s,a(e.chromes,t)),e},d=function(){c.network()};return f(t).then(p).then(l).then(d)}}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(require,e,t){"use strict";var i=n(4),o=n(12),r=n(11),s=n(2),a={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"};t.exports=function(){function e(e){n=i.chain(e).defaults(u).mapValues(i.resolvePortalPlaceholders).value(),this.isPollingStarted=!1,this.hasSession=!1}var t,n,c,u={pingUrl:"$(servicesPath)/services/rest/v1/authentication/session",logoutUrl:"$(contextRoot)/j_spring_security_logout",keepAlive:!0,startCountdown:6e4,notifyAfterInterval:5e3,pingInterval:3e4};return e.prototype.init=function(){var e=this;this.validSessionExisted=!1,this.userEventsOccurred=!1,this.consecutiveFailCount=0,this.notifyAfterTimeout(),this.startPolling(),s(document).on("click.lpTimeout keypress.lpTimeout",function(){e.userEventsOccurred=!0,c&&e.clearSessionWarning(!0)})},e.prototype.startPolling=function(e){window.setTimeout(this.ping.bind(this),e||n.pingInterval)},e.prototype.validateSession=function(){r({url:n.pingUrl+"/validate"}).then(this.handleStateResponse.bind(this),this.handleNetworkError.bind(this))},e.prototype.reconfirmSession=function(){r({url:n.pingUrl,method:"PUT"}).then(this.handleStateResponse.bind(this),this.handleNetworkError.bind(this))},e.prototype.logError=function(e){o.error("SessionHandler: ",e)},e.prototype.handleNetworkError=function(t){t=t||{},this.isPollingStarted=!1,this.validSessionExisted&&401===t.status?(window.sessionStorage.clear(),window.sessionStorage.setItem("launchpad.sessionExpired","true"),this.clearSessionWarning(!1,!0),this.logout()):0===t.status&&"timeout"===t.statusText?(this.consecutiveFailCount++,this.consecutiveFailCount<3?(e.clearSessionWarning(!1,!0),this.startPolling(1e3)):(this.notifyOfflineWarning(),this.startPolling())):401!==t.status&&(this.logError("Unknown error Problem validating session: "+t.statusText),this.startPolling())},e.prototype.handleStateResponse=function(t){this.isPollingStarted=!1,e.publishMessage("lpDataFreshnessValidate",function(e){var t="TheDataIsMostRecent",n=-1;return e&&e.hasOwnProperty(t)||(n="false"===e[t]||e[t]===!1?1:0),n}(t.data)),e.publishMessage("lpBadgesGetItems"),this.validSessionExisted=!0,this.consecutiveFailCount>=3&&e.clearOfflineWarning(),this.consecutiveFailCount=0;var i=1e3*t.data.remainingTime;i>n.startCountdown?this.clearSessionWarning():this.startSessionWarning(t.data.remainingTime)},e.prototype.logout=function(){var e=this;return window.sessionStorage.clear(),r({method:"POST",url:n.logoutUrl,headers:a}).then(function(t){var i=parseInt(t.status,10);i>=200&&300>i||304===i?window.location.href=n.redirectUrl:e.logError(t.message)})},e.publishMessage=function(e,t){window.gadgets.pubsub.publish(e,t)},e.prototype.notifyOfflineWarning=function(){e.publishMessage("launchpad.add-notification",{notification:{id:"offline-warning",level:"WARNING",message:"Experiencing connectivity problems. Please check your internet connection",closable:!1}})},e.prototype.clearOfflineWarning=function(){e.publishMessage("launchpad.remove-notification",{notification:{id:"offline-warning"}})},e.prototype.notifySessionWarning=function(t){return e.publishMessage("launchpad.add-notification",{notification:{id:"session-timeout",level:"WARNING",timeLeft:t,message:"Session is about to expire",values:{secondsLeft:t},closable:!1,links:[{rel:"/timeout/continue",uri:window.location.hash||"#"}]}}),t=t>=1?t-1:0,1>=t&&this.ping(),t},e.prototype.startSessionWarning=function(e){var t=this;c||(e=t.notifySessionWarning(e),c=window.setInterval(function(){e=t.notifySessionWarning(e)},1e3),t.startPolling())},e.prototype.clearSessionWarning=function(t,n){t?this.ping(!0):(c&&(window.clearInterval(c),e.publishMessage("launchpad.remove-notification",{notification:{id:"session-timeout"}}),c=null),n||this.startPolling())},e.prototype.ping=function(e){this.isPollingStarted||(this.isPollingStarted=!0,e?this.reconfirmSession():this.validateSession())},e.prototype.notifyAfterTimeout=function(){var t="launchpad.sessionExpired";window.sessionStorage.getItem(t)&&(window.setTimeout(function(){e.publishMessage("launchpad.add-notification",{notification:{id:"session-expired",level:"INFO",message:"Your session has expired. Please login again.",closable:!0}})},n.notifyAfterTimeoutDuration||5e3),window.sessionStorage.removeItem(t))},{getInstance:function(n){return i.isUndefined(t)&&(t=new e(n)),t}}}()}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(require,e,t){"use strict";var i=n(4);t.exports=function(e,t){e=e||[];var n=function(e){return"widgetChrome"===e.name&&(!e.inputType.options||0===e.inputType.options.length)};return{handlers:{"preferences-form":function(o){var r=o.detail.context,s=t.portalModel.filterPreferences(r.model.preferences.array);o.detail.customPrefsModel=i.each(s,function(t){n(t)&&(t.inputType.name="select-one",t.inputType.options=e)})}}}}}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(require,e,t){"use strict";e.network=n(21)}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(require,e,t){"use strict";function i(){a.publish("launchpad.add-notification",{notification:{container:{template:"templates/offline.html"},id:"offline-notification",level:"info",message:"Network connection has been lost.",closable:!0}})}function o(){a.publish("launchpad.remove-notification",{notification:{id:"offline-notification"}})}var r=n(2),s=n(1).NS,a=n(9),c={offline:s+".network.offline",online:s+".network.online"};t.exports=function(){r(window).on("offline",i).on("online",o),a.subscribe(c.offline,i),a.subscribe(c.online,o)}}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(require,e,t){"use strict";function i(e,t){var n,o=[];if(t)for(var s in e)n=i(e[s]),o=o.concat(n);else if(e.childNodes&&e.childNodes.length||e._children&&e._children.length){var a=(e.childNodes||[]).concat(e._children||[]);a.forEach(function(e){n=i(e),o=o.concat(n)})}else"widget"===e.tag&&o.push({name:e.extendedItemName,version:"x.x.x",src:e.originalItem.preferences.src.value.replace("$(contextRoot)",c.config.serverRoot).replace("index.html","")});return r.chain(o).uniq("name").sortBy("name").value()}var o=n(1).NS,r=n(4),s=n(2),a=window,c=a.b$&&a.b$.portal;a[o].getWidgetsInfo=t.exports=function(){var e=a.b$.portal.portalModel.all,t=i(e,!0),n=t.map(function(e){return s.getJSON(e.src+"bower.json").then(function(t){e.version=t.version})});s.when.apply(null,n).then(function(){console.table(t)})}}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(require,e,t){"use strict";var i=n(1).NS;n(3);var o=window.angular,r=function(e){try{o.module(e)}catch(t){return!1}return!0};t.exports=function(e,t){e=[i,e].join(".");var n;if(e.indexOf("widget-")>-1){var s=e+".templates";r(s)?(t.push(s),n=o.module(e,t),n.factory("templateCacheInjector",["$templateCache","lpCoreTemplate",function(e,t){return{put:function(n,i){return n=t.resolveTemplateSrc(n),e.put(n,i)}}}])):n=o.module(e,t)}else n=o.module(e,t);return n}}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){!function(t,n){"use strict";e.exports=n()}(this,function(){"use strict";function e(e){if(String.prototype.trim)return e.trim();var t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;return e.replace(t,"")}function t(e){return"function"==typeof e}function n(e){return"object"==typeof e&&!(e instanceof Array)}function i(e){return n(e)&&"undefined"!=typeof e._invokeQueue}function o(t,n,i){try{i=e(i);var o=new RegExp("^((https?|file)://|/)","i");o.test(i)||(i=i.replace(/.js$/,"")),i=t.replace(/[^\/]*$/,"").replace(new RegExp("^"+n),"")+i}catch(r){throw console.log("Error while normalizing module path."),r}return i}function r(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function s(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function a(e){var t="lp-widget-loading",n=e.body;e.loading=function(e){t=e||t,r(n,t)},e.loaded=function(e){s(n,t),"string"==typeof e&&r(n,e)}}return function(e,r){var s=window.requirejs;if(t(s)){var c=e.myDefinition;r=o(c?c.sUrl:"",s.s.contexts._.config.baseUrl,r),a(e),s([r],function(o){t(o)?o.call(null,e):i(o)?s(["angular","core"],function(t){o.config(["$provide","lpCoreUtils","lpCoreI18nProvider","lpCoreTemplateProvider",function(t,n,i,o){n.isEmpty(e.getPreference("locale"))||i.useWidgetInstance(e);var r={};e.model&&e.model.preferences&&e.model.preferences.array&&(r=n.reduce(e.model.preferences.array,function(e,t){return t.name.indexOf("widgetTemplate_")>-1&&(e[t.name.replace("widgetTemplate_","")]=t.value),e},{})),o.config({path:n.getWidgetBaseUrl(e),templates:r}),e.getResolvedPreference=function(e){var t=this.getPreference(e);return n.resolvePortalPlaceholders(t)},t.provider("lpWidget",function(){this.getInstance=this.$get=function(){return e}}),t.value("widget",e)}]),t.bootstrap(e.body||e,[o.name])}):n(o)&&t(o.run)&&("string"==typeof e&&(e="undefined"!=typeof window.jQuery?window.jQuery(e):window.document.querySelectorAll(e)),o.run.call(null,e))})}}})}])});