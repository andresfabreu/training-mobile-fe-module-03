!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("base"),require("core"),require("module-tags"),require("hammerjs")):"function"==typeof define&&define.amd?define(["base","core","module-tags","hammerjs"],e):"object"==typeof exports?exports["module-transactions"]=e(require("base"),require("core"),require("module-tags"),require("hammerjs")):t["module-transactions"]=e(t.base,t.core,t["module-tags"],t.hammerjs)}(this,function(t,e,r,o){return function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={exports:{},id:o,loaded:!1};return t[o].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){var o;(function(t){o=function(require,t,e){"use strict";e.name="module-transactions";var o=r(1),n=r(2),a=r(3),i=[n.name,a.name];e.exports=o.createModule(e.name,i).factory(r(4)).factory(r(5)).directive(r(6)).factory(r(7)).directive(r(8)).filter(r(9)).directive(r(10)).factory(r(11)).factory(r(12))}.call(e,r,e,t),!(void 0!==o&&(t.exports=o))}).call(e,r(14)(t))},function(e){e.exports=t},function(t){t.exports=e},function(t){t.exports=r},function(t,e,r){var o;o=function(require,t){"use strict";t.TransactionsModel=function(t,e,r){var o={QUERY:"query",FROM_DATE:"fromDate",TO_DATE:"toDate",FROM_AMOUNT:"fromAmount",TO_AMOUNT:"toAmount",CONTACT:"contact",CATEGORY:"category",DEBITCREDIT:"bk"},n=function(t){this.transactionsEndpoint=t.transactionsEndpoint,this.transactionDetailsEndpoint=t.transactionDetailsEndpoint,this.locale=t.locale,this.pageSize=t.pageSize||20,this.sort="-bookingDateTime",this.transactions=[],this.moreAvailable=!0,this.messages={},this.from=1,this.errorCode=null,this.pfmEnabled=!0,this.account=null};return n.prototype.clearTransactionsList=function(){this.transactions=[],this.moreAvailable=!0,this.from=1},n.prototype.setFilters=function(t){e?(e.setFilter(t),this.filters=e.getFilters()):this.filters=t},n.prototype.clearFilters=function(){this.filters=e?e.clearFilters():{}},n.prototype.updateFilters=function(){this.filters=e?e.getFilters():{}},n.prototype.loadTransactions=function(t){return this.clearTransactionsList(),this.account=t,this.loadMoreTransactions()},n.prototype.loadMoreTransactions=function(){var e=this;if(this.loading=!0,!this.account)throw new Error("No account specified");var r=t.getInstance({endpoint:this.transactionsEndpoint,urlVars:{accountId:this.account.id}}),n={f:this.from,l:this.pageSize};this.filters&&(this.filters.query&&(n.a="search",n.q=this.filters[o.QUERY]),this.filters[o.FROM_DATE]&&this.filters[o.TO_DATE]&&(n.df=this.filters[o.FROM_DATE],n.dt=this.filters[o.TO_DATE]),this.filters[o.FROM_AMOUNT]&&this.filters[o.TO_AMOUNT]&&(n.af=this.filters[o.FROM_AMOUNT],n.at=this.filters[o.TO_AMOUNT]),this.filters[o.CONTACT]&&(n.ca=this.filters[o.CONTACT]),this.filters[o.CATEGORY]&&(n.categoryIds=this.filters[o.CATEGORY]),this.filters[o.DEBITCREDIT]&&(n.bk=this.filters[o.DEBITCREDIT])),n.sort=this.sort;var a=r.read(n);return a.success(function(t){(null===t||"null"===t)&&(t=[]),e.from=e.from+e.pageSize;var r=e.preprocessTransactions(t);r&&r.length<e.pageSize&&(e.moreAvailable=!1),e.transactions.length=n.f-1,e.transactions=e.transactions.concat(r)}),a.error(function(t){e.errorCode=t.errorCode||500}),a["finally"](function(){e.loading=!1}),a},n.prototype.preprocessTransactions=function(t){return t&&(t=t.map(function(e,r){var o=new Date(t[r-1]?t[r-1].bookingDateTime:(new Date).getTime()+864e5),n=new Date(e.bookingDateTime);return e.newDate=o.getDate()!==n.getDate()||o.getMonth()!==n.getMonth()||o.getFullYear()!==n.getFullYear(),e.details||(e.details=null),e.detailTabs={details:!0,categories:!1},"DBIT"===e.creditDebitIndicator&&(e.transactionAmount*=-1),e})),t},n.prototype.loadTransactionDetails=function(e){var o=this;if(!e.details||r.isEmpty(e.details)){e.loading=!0,this.transactionDetailsService=t.getInstance({endpoint:this.transactionDetailsEndpoint,urlVars:{transactionId:e.id,accountId:this.account.id}});var n=this.transactionDetailsService.read();return n.success(function(t){e.details=o.preprocessTransactionDetails(t,e)}),n.error(function(t){e.errorCode=t.errorCode||500}),n["finally"](function(){e.loading=!1}),n}},n.prototype.updateTransactionCategory=function(e,r){var o=t.getInstance({contentType:"application/json",endpoint:this.transactionsEndpoint+"/"+e.id,urlVars:{accountId:this.account.id}}),n=o.update({data:{categoryId:r}});return n.success(function(){e.categoryId=r}),n.error(function(t){e.errorCode=t.errorCode||500}),n},n.prototype.updateSimilarTransactionCategory=function(e,r){var o=t.getInstance({endpoint:this.transactionsEndpoint,contentType:"application/json",urlVars:{accountId:this.account.id}}),n=o.update({data:{id:e.id,condition:"SIMILAR",categoryId:r}});return n.success(function(){e.categoryId=r}),n.error(function(t){e.errorCode=t.errorCode||500}),n},n.prototype.preprocessTransactionDetails=function(t,e){var r=[],o=[],n=["location"],a=["address","merchantType","bookingDateTime"],i=["transactionId"];if(t){if("object"==typeof t.location){var c=t.location.latitude+","+t.location.longitude,s=["size=160x90","center="+c,"zoom=12","format=jpg","sensor="+!1,"markers="+encodeURIComponent("size:med|color:red|")+c];t.location.mapUrl="http://maps.googleapis.com/maps/api/staticmap?"+s.join("&")}t.bookingDateTime=e.bookingDateTime;for(var l in t)if(t.hasOwnProperty(l)&&n.indexOf(l)<0){var u={name:l,value:t[l],longValue:i.indexOf(l)>-1};a.indexOf(l)>-1?r.push(u):o.push(u)}t.special=r,t.custom=o}return t},n.prototype.allowMoreResults=function(){var t=!this.loading&&this.moreAvailable&&!this.errorCode;return t},n.prototype.noTransactionsFound=function(){var t=!this.loading&&0===this.transactions.length&&!this.errorCode;return t},n.prototype.isSearching=function(){if(this.filters)for(var t in this.filters)if(this.filters.hasOwnProperty(t))return!0;return!1},{getInstance:function(t){return new n(t)},availableFilters:o}},t.TransactionsModel.$inject=["httpService","lpTagsUtils","lpCoreUtils"]}.call(e,r,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,r){var o;o=function(require,t){"use strict";t.TransactionsChartModel=function(t){var e=function(e){this.transactionsChartModel=t.getInstance({endpoint:e.transactionsChartEndpoint,urlVars:{accountId:e.accountId}}),this.chartData=null,this.error=!1};return e.prototype.load=function(t){var e,r=this;return e=r.transactionsChartModel.read(t).success(function(t){r.chartData=t}),e.error(function(t){t.errors&&(r.error=t.errors[0].code)}),e},{getInstance:function(t){return new e(t)}}},t.TransactionsChartModel.$inject=["httpService"]}.call(e,r,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,r){var o;o=function(require,t){"use strict";t.lpBalanceUpdate=function(){return{restrict:"A",require:"ngModel",link:function(t,e,r,o){e.addClass("lp-amount"),t.$watch(function(){return o.$modelValue},function(t,r){if(t.id===r.id){var o={increase:"lp-increase-amount",decrease:"lp-decrease-amount"},n=2e3;1===t.delta?(e.addClass(o.increase),setTimeout(function(){e.removeClass(o.increase)},n)):-1===t.delta&&(e.addClass(o.decrease),setTimeout(function(){e.removeClass(o.decrease)},n)),t.delta=0}})}}}}.call(e,r,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,r){var o;o=function(require,t){"use strict";t.CurrencyModel=function(t){var e=function(e){var r=this;r.groups={defaultCurrency:"aDefault",preferredCurrencies:"bPreferred",rest:"cOther"},r.disableExtraCurrencies=e.disableExtraCurrencies,r.defaultCurrencyService=t.getInstance({endpoint:e.defaultCurrencyEndpoint}),r.currencyListService=t.getInstance({endpoint:e.currencyListEndpoint}),r.orderedCurrencies=[]};return e.prototype.loadDefaultCurrency=function(){var t=this,e=t.defaultCurrencyService.read();return e.error(function(){t.error="currencyServiceError"}),e},e.prototype.configureDefaultCurrency=function(t){var e=this,r={currency_code:t.currency_code,exchange_rate:1,group:e.groups.defaultCurrency};e.defaultCurrency=r,e.selected=e.defaultCurrency,e.orderedCurrencies.push(e.defaultCurrency)},e.prototype.loadOtherCurrencies=function(){var t=this;t.currencyListService.endpoint+="?currency="+t.defaultCurrency.currency_code;var e=t.currencyListService.read();return e.success(function(e){e&&t.sortCurrencies(e)}),e.error(function(){t.error="currencyServiceError"}),e},e.prototype.sortCurrencies=function(t){for(var e=this,r=0;r<t.preferred.length;r++)t.preferred[r].group=e.groups.preferredCurrencies;if(e.orderedCurrencies.push.apply(e.orderedCurrencies,t.preferred),!e.disableExtraCurrencies){for(var o=0;o<t.rest.length;o++)t.rest[o].group=e.groups.rest;t.rest.sort(function(t,e){var r=t.currency_code.toLowerCase(),o=e.currency_code.toLowerCase();return o>r?-1:r>o?1:0}),e.orderedCurrencies.push.apply(e.orderedCurrencies,t.rest)}},e.prototype.findCurrency=function(t){var e=this;return e.orderedCurrencies.filter(function(e){return e.currency_code===t})[0]},e.prototype.selectCurrency=function(t){var e=this;e.selected=e.findCurrency(t)},{getInstance:function(t){return new e(t)}}},t.CurrencyModel.$inject=["httpService"]}.call(e,r,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,r){var o;o=function(require,t){"use strict";var e=r(13);t.lpCategoryDisplay=function(t,r){return t.put("$categoryDisplay.html",'<div class="lp-transaction-category" ng-click="categoryClick($event, transaction)"><span class="category-marker" ng-style="markerStyle"></span><div class="category-name"><span class="h4">{{category.name}}</span></div></div>'),{restrict:"A",replace:!0,require:"ngModel",scope:{isCategoryView:"=lpCategoryView",categoryList:"=lpCategoryList",transaction:"=ngModel",categoryClick:"="},template:t.get("$categoryDisplay.html"),link:function(t,o){var n=(o.find("span")[0],o.parent().parent()),a=0;t.markerStyle={},t.category=null;var i={},c=n.data("touch"),s=function(t){t.srcEvent.stopPropagation(),t.preventDefault(),o.parent().addClass("no-animation");var e=a+Math.floor(t.deltaX);e>160&&(e=160),e>a&&o.parent().css("width",e+"px")},l=function(t){t.srcEvent.stopPropagation(),t.preventDefault(),a=parseInt(o.css("width"),10)},u=function(e){e.srcEvent.stopPropagation(),e.preventDefault(),o.parent().removeClass("no-animation");var r=a+Math.floor(e.deltaX);r>160&&(r=160),r>150&&t.categoryClick&&"function"==typeof t.categoryClick&&t.categoryClick.apply(this,[null,t.transaction]),o.parent().css("width","")};t.isCategoryView||"undefined"==typeof e||(c||(c=new e(n[0]),n.data("touch",c)),i.panright=c.on("panright",s),i.panstart=c.on("panstart",l),i.panend=c.on("panend",u)),t.$on("$destroy",function(){Object.keys(i).forEach(function(t){var e=i[t];e.off(t,e.handlers[t][0])})}),t.$watch("transaction.categoryId",function(e){t.setCategory(e)}),t.setCategory=function(e){if(t.categoryList)for(var r=0;r<t.categoryList.length;r++)t.categoryList[r].id===e&&(t.category=t.categoryList[r]);t.category&&e?t.markerStyle.backgroundColor=t.category.color:t.transaction.categoryId="00cc9919-ba0c-4702-917b-1fba4c256b4d"},r.subscribe("launchpad-retail.categoryDelete",function(e){e.id===t.transaction.categoryId&&t.setCategory()})}}},t.lpCategoryDisplay.$inject=["$templateCache","lpCoreBus"]}.call(e,r,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,r){var o;o=function(require,t){"use strict";t.categoryList=function(){return function(t,e){var r=t;e.initialSelected||(e.initialSelected=e.transaction.categoryId);for(var o=0;o<r.length;o++)"TEMPORARY"!==r[o].type?(r[o].priority=1,"CONTROL"===r[o].type&&(r[o].priority=0),r[o].id===e.initialSelected&&(r[o].priority=2)):(r.splice(o,1),o--);for(o=0;o<r.length;o++)e.categoryFilter&&e.categoryFilter.length&&-1===r[o].name.toLowerCase().indexOf(e.categoryFilter.toLowerCase())?(r.splice(o,1),o--):r[o].id===e.transaction.categoryId&&(r.splice(o,1),o--);return e.searchResultNumber=r.length,r}},t.selectedCategory=function(){return function(t,e){for(var r=t,o=0;o<r.length;o++)r[o].id!==e.transaction.categoryId&&(r.splice(o,1),o--);return r}},t.markedCategory=function(){return function(t,e){for(var r=t,o=0;o<r.length;o++)r[o].id!==e.newCategoryId&&(r.splice(o,1),o--);return r}}}.call(e,r,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,r){var o;o=function(require,t){"use strict";function e(){var t,e,r=arguments[0]/255,o=arguments[1]/255,n=arguments[2]/255,a=Math.max(r,o,n),i=Math.min(r,o,n),c=(a+i)/2;if(a===i)t=e=0;else{var s=a-i;switch(e=c>.5?s/(2-a-i):s/(a+i),a){case r:t=(o-n)/s+(n>o?6:0);break;case o:t=(n-r)/s+2;break;case n:t=(r-o)/s+4}t/=6}return{h:Math.round(360*t),s:Math.round(100*e),l:Math.round(100*c)}}var r=window.jQuery;t.lpCategoryItem=function(){return{restrict:"A",replace:!0,template:'<div class="category-item btn btn-block btn-default" tabIndex="{{category.id !== transaction.categoryId ? 0 : -1}}" ng-style="{\'background-color\': category.id === newCategoryId ? category.color : \'#ffffff\'}" ng-click="markNewCategory(category.id)" ng-keydown="categoryKeyDown($event, category)"><div class="marker" ng-style="{\'background-color\':category.color}"></div><span class="name" ng-class="{ light: (category.id === newCategoryId && getTextColor(category.color)) }">{{category.name}}</span><button type="button" class="close" aria-hidden="true" ng-click="deleteCategory($event, category)" ng-if="category.type ===\'NORMAL\'">&times;</button></div>'}},t.lpCategorySelect=function(t,o,n){return t.put("$categorySelect.html",'<div class="lp-category-select clearfix"><div class="clearfix"><label class="control-label pull-left" lp-i18n="Current Category:"></label><div ng-repeat="category in transactionCategories | orderBy:\'-priority\' | selectedCategory:this" class="col-xs-6 col-sm-4 col-md-4"><div lp-category-item="lp-category-item"></div></div></div><label class="control-label pull-left" lp-i18n="Change category to:"></label><form class="form category-search clearfix" role="form" ng-submit="createCategory()"><input type="text" ng-model="categoryFilter" class="form-control" placeholder="{{\'Search categories / Create category\'|translate}}" maxlength="40" ng-disabled="showColorPicker" /></form><div class="category-list col-xs-12 col-sm-12 col-md-9"><div class="new-category col-xs-12 col-sm-12 col-md-12" ng-if="!categoryExists() && !showColorPicker && categoryFilter.length > 0"><label class="control-label pull-left" lp-i18n="Create new category:"></label><div ng-repeat="category in newCategory" class="col-xs-6 col-sm-6 col-md-6"><div lp-category-item="lp-category-item"></div></div></div><ul class="category-list col-xs-12 col-sm-12 col-md-12"><li ng-repeat="category in transactionCategories | orderBy:\'-priority\' | categoryList:this" class="col-xs-6 col-sm-4 col-md-4" ng-show="!showColorPicker"><div lp-category-item="lp-category-item"></div></li><div id="{{\'transaction-\' + transaction.id + \'-category-step-2\'}}" class="clearfix" ng-if="showColorPicker"><label class="clearfix" lp-i18n="Choose a color for the new category:"></label><div lp-color-picker="lp-color-picker" select-color="selectColor"></div></div></ul></div><div id="{{\'transaction-\' + transaction.id + \'-category-step-3\'}}" class="col-xs-12 col-sm-12 col-md-3 category-apply" ng-if="(smallLayout && newCategoryId.length) || !smallLayout"><div class="row" ng-if="smallLayout"><div class="col-xs-12 col-sm-12 clearfix"><label class="control-label pull-left" lp-i18n="You\'ve selected:"></label><div ng-repeat="category in transactionCategories | orderBy:\'-priority\' | markedCategory:this" class="col-xs-7 col-sm-6 col-md-4"><div lp-category-item="lp-category-item"></div></div></div><div class="col-xs-12 col-sm-12 clearfix"><p lp-i18n="Would you like to change the category for only this transaction or all similar transactions?"></p></div></div><div class="row"><div class="col-sm-12 col-md-12" ng-if="!smallLayout"><p lp-i18n="Apply category change to?"></p></div><div class="col-xs-6 col-sm-6 col-md-12"><button type="button" class="btn btn-default btn-block" ng-click="changeCategory(newCategoryId)" ng-disabled="!newCategoryId.length" lp-i18n="Only This"></button></div><div class="col-xs-6 col-sm-6 col-md-12"><button type="button" class="btn btn-default btn-block" ng-click="changeCategory(newCategoryId, true)" ng-disabled="!newCategoryId.length" lp-i18n="All Similar"></button></div></div></div></div>'),{restrict:"A",replace:!1,require:"ngModel",scope:{model:"=ngModel",transaction:"=",update:"=",smallLayout:"=",offsetTopCorrection:"="},template:t.get("$categorySelect.html"),link:function(t,a){t.showColorPicker=!1,t.searchResultNumber=t.model.categories.length;var i=function(){t.transactionCategories=[];for(var e=0;e<t.model.categories.length;e++)t.transactionCategories.push(angular.copy(t.model.categories[e]))};i();var c=function(e){t.smallLayout&&o(function(){r("body").animate({scrollTop:r("#transaction-"+t.transaction.id+(e>1?"-category-step-"+e:"")).offset().top-5-t.offsetTopCorrection},500)},0)},s=function(){o(function(){r(a).find('button[ng-click^="changeCategory"]')[0].focus()},0)};t.$watch("categoryFilter",function(e){t.newCategory=[{id:null,name:e,color:"#cccccc"}]}),t.categoryExists=function(){var e=!1;if(t.categoryFilter&&t.categoryFilter.length>0)for(var r=0;r<t.model.categories.length;r++)t.categoryFilter.toLowerCase()===t.model.categories[r].name.toLowerCase()&&(e=!0);return e},t.getTextColor=function(t){var r=!0,o=t.substr(1,2),n=t.substr(3,2),a=t.substr(5,2);return 4===t.length&&(o=t.substr(1,1)+t.substr(1,1),n=t.substr(2,1)+t.substr(2,1),a=t.substr(3,1)+t.substr(3,1)),o=parseInt(o,16),n=parseInt(n,16),a=parseInt(a,16),e(o,n,a).l>45&&(r=!1),r},t.newCategoryId="",t.markNewCategory=function(e){if(null===e)return void t.createCategory();if(t.transaction.categoryId!==e){if(t.newCategoryId===e)return void(t.newCategoryId="");t.newCategoryId=e,c(3),s()}},t.categoryKeyDown=function(e,r){if(13===e.which||32===e.which){if(e.preventDefault(),e.stopPropagation(),"button"===e.target.tagName.toLowerCase())return void t.deleteCategory(e,r);t.markNewCategory(r.id)}},t.createCategory=function(){var e=!t.categoryExists()&&t.categoryFilter.length>0;e?(t.showColorPicker=!0,c(2)):t.searchResultNumber&&o(function(){r(".category-list .category-item")[0].focus()},0)},t.selectColor=function(e){t.model.create(t.categoryFilter,e).then(function(e){t.categoryFilter="",t.showColorPicker=!1,i(),t.markNewCategory(e.data.id),n.publish("launchpad-retail.categoryListUpdate",null,!0),c(3),s()},function(e){n.publish("launchpad.add-notification",{notification:{id:"category-create-duplicate",level:"SEVERE",message:e.data.error,closable:!0}},!0),t.categoryFilter="",t.showColorPicker=!1})},t.deleteCategory=function(e,r){e.stopPropagation(),"NORMAL"===r.type&&t.model.del(r.id).success(function(){t.newCategoryId===r.id&&(t.newCategoryId=""),i(),n.publish("launchpad-retail.categoryDelete",{id:r.id},!0),n.publish("launchpad-retail.categoryListUpdate",null,!0)})},t.changeCategory=function(e,n){t.newCategoryId="",t.categoryFilter="",t.update(t.transaction,e,n),o(function(){t.transaction.showDetails=!1},100),c(1),r("#transaction-"+t.transaction.id)[0].focus()},n.subscribe("launchpad-retail.categoryListUpdate",function(){i()})}}},t.lpCategorySelect.$inject=["$templateCache","$timeout","lpCoreBus"]}.call(e,r,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,r){var o;o=function(require,t){"use strict";t.CategoryModel=function(t){var e=function(e){this.config=e,this.categories=[],this.categoryService=t.getInstance({endpoint:e.endpoint,contentType:"application/json"})};return e.prototype.readList=function(){var t=this,e=t.categoryService.read();return e.success(function(e){e&&(t.categories=e)}),e.error(function(){t.error="categoryReadError"}),e},e.prototype.create=function(t,e){var r=this,o=r.categoryService.create({data:{name:t,color:e}});return o.success(function(t){t&&r.categories.push(angular.extend({},t,{priority:3}))}),o.error(function(){r.error="categoryCreateError"}),o},e.prototype.del=function(e){var r=this,o=t.getInstance({endpoint:this.config.endpoint+"/"+e,contentType:"application/json"}),n=o.del();return n.success(function(){for(var t=0;t<r.categories.length;t++)if(r.categories[t].id===e){r.categories.splice(t,1);break}}),n.error(function(){r.error="categoryDeleteError"}),n},e.prototype.getById=function(t){for(var e=0;e<this.categories.length;++e){var r=this.categories[e];if(r.id===t)return r}return null},{getInstance:function(t){return new e(t)}}},t.CategoryModel.$inject=["httpService"]}.call(e,r,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,r){var o;o=function(require,t){"use strict";t.P2PTransactionsModel=function(t){var e=function(t){this.transactionsEndpoint=t.transactionsEndpoint,this.locale=t.locale,this.pageSize=t.pageSize||20,this.pageOffset=0,this.transactions=[],this.moreAvailable=!0,this.messages={},this.errorCode=null,this.accountsArray=[]};return e.prototype.clearTransactionsList=function(){this.transactions=[],this.moreAvailable=!0,this.pageOffset=0},e.prototype.loadTransactions=function(t){return this.clearTransactionsList(),this.accountsArray=t,this.loadMoreTransactions()},e.prototype.loadMoreTransactions=function(){var e=this;this.loading=!0;var r=t.getInstance({endpoint:this.transactionsEndpoint,urlVars:{}}),o={accountIds:this.accountsArray.join(","),offset:this.pageOffset,limit:this.pageSize},n=r.read(o);return n.then(function(t){e.pageOffset+=e.pageSize;var r=e.preprocessTransactions(t.data);r&&r.length<e.pageSize&&(e.moreAvailable=!1),e.transactions=e.transactions.concat(r)},function(t){e.errorCode=t.errorCode||500}),n["finally"](function(){e.loading=!1}),n},e.prototype.preprocessTransactions=function(t){var e=[];return t&&t.length>0&&(e=t.map(function(e,r){var o=new Date(e.initiationDateTime);if(e.showDate=!0,r>0){var n=new Date(t[r-1].initiationDateTime);e.showDate=n.getDate()!==o.getDate()||n.getMonth()!==o.getMonth()||n.getFullYear()!==o.getFullYear()}return e.requiresUserAction=!1,"CREDIT"===e.creditDebitIndicator&&"PENDING"===e.status&&(e.requiresUserAction=!0),e})),e},e.prototype.allowMoreResults=function(){return!this.loading&&this.moreAvailable&&!this.errorCode},e.prototype.noTransactionsFound=function(){return!this.loading&&0===this.transactions.length&&!this.errorCode},{getInstance:function(t){return new e(t)}}},t.P2PTransactionsModel.$inject=["httpService"]}.call(e,r,e,t),!(void 0!==o&&(t.exports=o))},function(t){t.exports=o},function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}])});