!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("base"),require("ui"),require("core"),require("module-accounts")):"function"==typeof define&&define.amd?define(["base","ui","core","module-accounts"],r):"object"==typeof exports?exports["widget-profile-preferences"]=r(require("base"),require("ui"),require("core"),require("module-accounts")):e["widget-profile-preferences"]=r(e.base,e.ui,e.core,e["module-accounts"])}(this,function(e,r,n,t){return function(e){function r(t){if(n[t])return n[t].exports;var o=n[t]={exports:{},id:t,loaded:!1};return e[t].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var n={};return r.m=e,r.c=n,r.p="",r(0)}([function(e,r,n){var t;(function(e){t=function(require,e,r){"use strict";function t(){}r.name="widget-profile-preferences";var o=n(1),c=n(2),i=n(3),a=n(4),l=[i.name,c.name,a.name];r.exports=o.createModule(r.name,l).controller(n(5)).run(t)}.call(r,n,r,e),!(void 0!==t&&(e.exports=t))}).call(r,n(6)(e))},function(r,n,t){r.exports=e},function(e,n,t){e.exports=r},function(e,r,t){e.exports=n},function(e,r,n){e.exports=t},function(e,r,n){var t;t=function(require,e,r){"use strict";e.PreferencesController=function(e,r,n,t,o,c,i,a,l,u,f){function p(e){if(!e)return{};var r,n=[];try{var o=e.split(",");return x.each(o,function(e){r=e.split(":"),x.each(r,x.trim),2===r.length&&n.push({value:r[0],text:t.instant(r[1])})}),n}catch(c){a.captureException(c)}}function s(){var r=p(g),n=p(b),o=p(h);l.emptyPlaceholderText=t.instant("Nothing selected"),e.control={preferredName:{value:m.preferredName,errors:[],loading:!1,validate:function(e){return e.length<3?"invalid_name":!0}},locale:{value:m.lpLocale,options:r,loading:!1},defaultAccount:{value:m.defaultAccount,options:d,loading:!1},preferredBalanceView:{value:m.preferredBalanceView,options:n,loading:!1},pfm:{value:m.pfm,options:o,loading:!1}}}var d,m,v=r,x=c,g=v.getPreference("localeSelector"),b=v.getPreference("balanceSelector"),h=v.getPreference("categorizationSelector"),C=!1;u.setConfig({accountsEndpoint:v.getPreference("accountsDataSrc")}),u.load().then(function(e){d=e,f.read().then(function(e){m=e.data,m.pfmEnabled=x.parseBoolean(m.pfmEnabled),s(),C=!0})}),i.subscribe(o.LOCALE_CHANGE_EVENT,function(){C&&n(s,10)}),e.save=function(e,r){f.put(e,r).then(function(n){m[e]=r,"lpLocale"===e&&i.publish(o.LOCALE_CHANGE_EVENT,r)})}},e.PreferencesController.$inject=["$scope","lpWidget","$timeout","lpCoreI18n","lpCoreI18nUtils","lpCoreUtils","lpCoreBus","lpCoreError","dropdownSelectConfig","AccountsModel","PreferenceService"]}.call(r,n,r,e),!(void 0!==t&&(e.exports=t))},function(e,r,n){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}])});