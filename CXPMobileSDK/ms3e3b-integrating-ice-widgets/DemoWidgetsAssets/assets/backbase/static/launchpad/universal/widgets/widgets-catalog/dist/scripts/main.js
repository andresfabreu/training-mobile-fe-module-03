!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("base"),require("core"),require("jquery")):"function"==typeof define&&define.amd?define(["base","core","jquery"],e):"object"==typeof exports?exports["widget-widgets-catalog"]=e(require("base"),require("core"),require("jquery")):t["widget-widgets-catalog"]=e(t.base,t.core,t.jquery)}(this,function(t,e,i){return function(t){function e(a){if(i[a])return i[a].exports;var n=i[a]={exports:{},id:a,loaded:!1};return t[a].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var a;(function(t){a=function(require,t,e){"use strict";function a(t,e){var i=new t(e);i.init(),e.addEventListener("preferencesSaved",function(){})}var n=i(1),s=i(2);i(3);var o=[s.name];a.$inject=["WidgetCatalog","widget"],e.exports=n.createModule(e.name,o).factory(i(4)).run(a)}.call(e,i,e,t),!(void 0!==a&&(t.exports=a))}).call(e,i(6)(t))},function(e,i,a){e.exports=t},function(t,i,a){t.exports=e},function(t,e,i){var a;a=function(require,t,e){var a=i(5);(function(){!function(t,e,i){var a,n,s;return s="slidesjs",n={width:940,height:528,start:1,navigation:{active:!0,effect:"slide"},pagination:{active:!0,effect:"slide"},play:{active:!1,effect:"slide",interval:5e3,auto:!1,swap:!0,pauseOnHover:!1,restartDelay:2500},effect:{slide:{speed:500},fade:{speed:300,crossfade:!0}},callback:{loaded:function(){},start:function(){},complete:function(){}}},a=function(){function e(e,i){this.element=e,this.options=t.extend(!0,{},n,i),this._defaults=n,this._name=s,this.init()}return e}(),a.prototype.init=function(){var i,a,n,s,o,r,d=this;return i=t(this.element),this.data=t.data(this),t.data(this,"animating",!1),t.data(this,"total",i.children().not(".slidesjs-navigation",i).length),t.data(this,"current",this.options.start-1),t.data(this,"vendorPrefix",this._getVendorPrefix()),"undefined"!=typeof TouchEvent&&(t.data(this,"touch",!0),this.options.effect.slide.speed=this.options.effect.slide.speed/2),i.css({overflow:"hidden"}),i.slidesContainer=i.children().not(".slidesjs-navigation",i).wrapAll("<div class='slidesjs-container'>",i).parent().css({overflow:"hidden",position:"relative"}),t(".slidesjs-container",i).wrapInner("<div class='slidesjs-control'>",i).children(),t(".slidesjs-control",i).css({position:"relative",left:0}),t(".slidesjs-control",i).children().addClass("slidesjs-slide").css({position:"absolute",top:0,left:0,width:"100%",zIndex:0,display:"none",webkitBackfaceVisibility:"hidden"}),t.each(t(".slidesjs-control",i).children(),function(e){var i;return i=t(this),i.attr("slidesjs-index",e)}),this.data.touch&&(t(".slidesjs-control",i).on("touchstart",function(t){return d._touchstart(t)}),t(".slidesjs-control",i).on("touchmove",function(t){return d._touchmove(t)}),t(".slidesjs-control",i).on("touchend",function(t){return d._touchend(t)})),i.fadeIn(0),this.update(),this.data.touch&&this._setuptouch(),t(".slidesjs-control",i).children(":eq("+this.data.current+")").eq(0).fadeIn(0,function(){return t(this).css({zIndex:10})}),this.options.navigation.active&&(o=t("<a>",{"class":"slidesjs-previous slidesjs-navigation",href:"#",title:"Previous",text:"Previous"}).appendTo(i),a=t("<a>",{"class":"slidesjs-next slidesjs-navigation",href:"#",title:"Next",text:"Next"}).appendTo(i)),t(".slidesjs-next",i).click(function(t){return t.preventDefault(),d.stop(!0),d.next(d.options.navigation.effect)}),t(".slidesjs-previous",i).click(function(t){return t.preventDefault(),d.stop(!0),d.previous(d.options.navigation.effect)}),this.options.play.active&&(s=t("<a>",{"class":"slidesjs-play slidesjs-navigation",href:"#",title:"Play",text:"Play"}).appendTo(i),r=t("<a>",{"class":"slidesjs-stop slidesjs-navigation",href:"#",title:"Stop",text:"Stop"}).appendTo(i),s.click(function(t){return t.preventDefault(),d.play(!0)}),r.click(function(t){return t.preventDefault(),d.stop(!0)}),this.options.play.swap&&r.css({display:"none"})),this.options.pagination.active&&(n=t("<ul>",{"class":"slidesjs-pagination"}).appendTo(i),t.each(new Array(this.data.total),function(e){var i,a;return i=t("<li>",{"class":"slidesjs-pagination-item"}).appendTo(n),a=t("<a>",{href:"#","data-slidesjs-item":e,html:e+1}).appendTo(i),a.click(function(e){return e.preventDefault(),d.stop(!0),d["goto"](1*t(e.currentTarget).attr("data-slidesjs-item")+1)})})),t(e).bind("resize",function(){return d.update()}),this._setActive(),this.options.play.auto&&this.play(),this.options.callback.loaded(this.options.start)},a.prototype._setActive=function(e){var i,a;return i=t(this.element),this.data=t.data(this),a=e>-1?e:this.data.current,t(".active",i).removeClass("active"),t("li:eq("+a+") a",i).addClass("active")},a.prototype.update=function(){var e;return e=t(this.element),this.data=t.data(this),t(".slidesjs-control",e).children(":not(:eq("+this.data.current+"))").css({display:"none",left:0,zIndex:0}),t(".slidesjs-control, .slidesjs-container",e).css({width:this.options.width,height:this.options.height})},a.prototype.next=function(e){var i;return i=t(this.element),this.data=t.data(this),t.data(this,"direction","next"),void 0===e&&(e=this.options.navigation.effect),"fade"===e?this._fade():this._slide()},a.prototype.previous=function(e){var i;return i=t(this.element),this.data=t.data(this),t.data(this,"direction","previous"),void 0===e&&(e=this.options.navigation.effect),"fade"===e?this._fade():this._slide()},a.prototype["goto"]=function(e){var i,a;if(i=t(this.element),this.data=t.data(this),void 0===a&&(a=this.options.pagination.effect),e>this.data.total?e=this.data.total:1>e&&(e=1),"number"==typeof e)return"fade"===a?this._fade(e):this._slide(e);if("string"==typeof e){if("first"===e)return"fade"===a?this._fade(0):this._slide(0);if("last"===e)return"fade"===a?this._fade(this.data.total):this._slide(this.data.total)}},a.prototype._setuptouch=function(){var e,i,a,n;return e=t(this.element),this.data=t.data(this),n=t(".slidesjs-control",e),i=this.data.current+1,a=this.data.current-1,0>a&&(a=this.data.total-1),i>this.data.total-1&&(i=0),n.children(":eq("+i+")").css({display:"block",left:this.options.width}),n.children(":eq("+a+")").css({display:"block",left:-this.options.width})},a.prototype._touchstart=function(e){var i,a;return i=t(this.element),this.data=t.data(this),a=e.originalEvent.touches[0],this._setuptouch(),t.data(this,"touchtimer",Number(new Date)),t.data(this,"touchstartx",a.pageX),t.data(this,"touchstarty",a.pageY),e.stopPropagation()},a.prototype._touchend=function(e){var i,a,n,s,o,r,d,l=this;return i=t(this.element),this.data=t.data(this),r=e.originalEvent.touches[0],s=t(".slidesjs-control",i),s.position().left>.5*this.options.width||s.position().left>.1*this.options.width&&Number(new Date)-this.data.touchtimer<250?(t.data(this,"direction","previous"),this._slide()):s.position().left<-(.5*this.options.width)||s.position().left<-(.1*this.options.width)&&Number(new Date)-this.data.touchtimer<250?(t.data(this,"direction","next"),this._slide()):(n=this.data.vendorPrefix,d=n+"Transform",a=n+"TransitionDuration",o=n+"TransitionTimingFunction",s[0].style[d]="translateX(0px)",s[0].style[a]=.85*this.options.effect.slide.speed+"ms"),s.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){return n=l.data.vendorPrefix,d=n+"Transform",a=n+"TransitionDuration",o=n+"TransitionTimingFunction",s[0].style[d]="",s[0].style[a]="",s[0].style[o]=""}),e.stopPropagation()},a.prototype._touchmove=function(e){var i,a,n,s,o;return i=t(this.element),this.data=t.data(this),s=e.originalEvent.touches[0],a=this.data.vendorPrefix,n=t(".slidesjs-control",i),o=a+"Transform",t.data(this,"scrolling",Math.abs(s.pageX-this.data.touchstartx)<Math.abs(s.pageY-this.data.touchstarty)),this.data.animating||this.data.scrolling||(e.preventDefault(),this._setuptouch(),n[0].style[o]="translateX("+(s.pageX-this.data.touchstartx)+"px)"),e.stopPropagation()},a.prototype.play=function(e){var i,a,n,s=this;return i=t(this.element),this.data=t.data(this),!this.data.playInterval&&(e&&(a=this.data.current,this.data.direction="next","fade"===this.options.play.effect?this._fade():this._slide()),t.data(this,"playInterval",setInterval(function(){return a=s.data.current,s.data.direction="next","fade"===s.options.play.effect?s._fade():s._slide()},this.options.play.interval)),n=t(".slidesjs-container",i),this.options.play.pauseOnHover&&(n.unbind(),n.bind("mouseenter",function(){return s.stop()}),n.bind("mouseleave",function(){return s.options.play.restartDelay?t.data(s,"restartDelay",setTimeout(function(){return s.play(!0)},s.options.play.restartDelay)):s.play()})),t.data(this,"playing",!0),t(".slidesjs-play",i).addClass("slidesjs-playing"),this.options.play.swap)?(t(".slidesjs-play",i).hide(),t(".slidesjs-stop",i).show()):void 0},a.prototype.stop=function(e){var i;return i=t(this.element),this.data=t.data(this),clearInterval(this.data.playInterval),this.options.play.pauseOnHover&&e&&t(".slidesjs-container",i).unbind(),t.data(this,"playInterval",null),t.data(this,"playing",!1),t(".slidesjs-play",i).removeClass("slidesjs-playing"),this.options.play.swap?(t(".slidesjs-stop",i).hide(),t(".slidesjs-play",i).show()):void 0},a.prototype._slide=function(e){var i,a,n,s,o,r,d,l,c,p,h=this;return i=t(this.element),this.data=t.data(this),this.data.animating||e===this.data.current+1?void 0:(t.data(this,"animating",!0),a=this.data.current,e>-1?(e-=1,p=e>a?1:-1,n=e>a?-this.options.width:this.options.width,o=e):(p="next"===this.data.direction?1:-1,n="next"===this.data.direction?-this.options.width:this.options.width,o=a+p),-1===o&&(o=this.data.total-1),o===this.data.total&&(o=0),this._setActive(o),d=t(".slidesjs-control",i),e>-1&&d.children(":not(:eq("+a+"))").css({display:"none",left:0,zIndex:0}),d.children(":eq("+o+")").css({display:"block",left:p*this.options.width,zIndex:10}),this.options.callback.start(a+1),this.data.vendorPrefix?(r=this.data.vendorPrefix,c=r+"Transform",s=r+"TransitionDuration",l=r+"TransitionTimingFunction",d[0].style[c]="translateX("+n+"px)",d[0].style[s]=this.options.effect.slide.speed+"ms",d.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){return d[0].style[c]="",d[0].style[s]="",d.children(":eq("+o+")").css({left:0}),d.children(":eq("+a+")").css({display:"none",left:0,zIndex:0}),t.data(h,"current",o),t.data(h,"animating",!1),d.unbind("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd"),d.children(":not(:eq("+o+"))").css({display:"none",left:0,zIndex:0}),h.data.touch&&h._setuptouch(),h.options.callback.complete(o+1)})):d.stop().animate({left:n},this.options.effect.slide.speed,function(){return d.css({left:0}),d.children(":eq("+o+")").css({left:0}),d.children(":eq("+a+")").css({display:"none",left:0,zIndex:0},t.data(h,"current",o),t.data(h,"animating",!1),h.options.callback.complete(o+1))}))},a.prototype._fade=function(e){var i,a,n,s,o,r=this;return i=t(this.element),this.data=t.data(this),this.data.animating||e===this.data.current+1?void 0:(t.data(this,"animating",!0),a=this.data.current,e?(e-=1,o=e>a?1:-1,n=e):(o="next"===this.data.direction?1:-1,n=a+o),-1===n&&(n=this.data.total-1),n===this.data.total&&(n=0),this._setActive(n),s=t(".slidesjs-control",i),s.children(":eq("+n+")").css({display:"none",left:0,zIndex:10}),this.options.callback.start(a+1),this.options.effect.fade.crossfade?(s.children(":eq("+this.data.current+")").stop().fadeOut(this.options.effect.fade.speed),s.children(":eq("+n+")").stop().fadeIn(this.options.effect.fade.speed,function(){return s.children(":eq("+n+")").css({zIndex:0}),t.data(r,"animating",!1),t.data(r,"current",n),r.options.callback.complete(n+1)})):s.children(":eq("+a+")").stop().fadeOut(this.options.effect.fade.speed,function(){return s.children(":eq("+n+")").stop().fadeIn(r.options.effect.fade.speed,function(){return s.children(":eq("+n+")").css({zIndex:10})}),t.data(r,"animating",!1),t.data(r,"current",n),r.options.callback.complete(n+1)}))},a.prototype._getVendorPrefix=function(){var t,e,a,n,s;for(t=i.body||i.documentElement,a=t.style,n="transition",s=["Moz","Webkit","Khtml","O","ms"],n=n.charAt(0).toUpperCase()+n.substr(1),e=0;e<s.length;){if("string"==typeof a[s[e]+n])return s[e];e++}return!1},t.fn[s]=function(e){if("string"!=typeof e)return this.each(function(){t.data(this,"plugin_"+s)||t.data(this,"plugin_"+s,new a(this,e))});var i=Array.prototype.slice.call(arguments,1);this.each(function(){var a=t.data(this,"plugin_"+s);a[e].apply(a,i)})}}(a,window,document)}).call(this);var n={ie:"Microsoft Internet Explorer"==navigator.appName,java:navigator.javaEnabled(),ns:"Netscape"==navigator.appName,ua:navigator.userAgent.toLowerCase(),version:parseFloat(navigator.appVersion.substr(21))||parseFloat(navigator.appVersion),win:"Win32"==navigator.platform};n.mac=n.ua.indexOf("mac")>=0,n.ua.indexOf("opera")>=0&&(n.ie=n.ns=!1,n.opera=!0),n.ua.indexOf("gecko")>=0&&(n.ie=n.ns=!1,n.gecko=!0)}.call(e,i,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,i){var a;a=function(require,t,e){"use strict";var i=window.Mustache,a=window.b$;t.WidgetCatalog=function(t,e,n){function s(t){var e=this;e.widget=t,e.$body=o(t.body),e.$preview=o(".lp-catalog-preview",e.$body),e.paginationAfterLoading=!1,e.buildingCatalog=!1,e.catalog={}}var o=window.jQuery,r={widget:null,preview:null},d=e.getPortalProperty("serverRoot"),l=a&&a&&a.portal.portalName,c=d+"/portals/"+encodeURI(l)+"/catalog.xml?f=type(eq)WIDGET&ps=100",p=n;return s.prototype.init=function(){var t=this;t.widget.isCatalog=!0,t.paginationAfterLoading=!0,r.widget=t.$body.find("script[data-template=widget]").html(),r.preview=t.$body.find("script[data-template=preview]").html(),o(".lp-catalog-page",t.$body).length?t.buildingCatalog=!1:t.buildingCatalog||t.buildCatalog(),t.bindEvents(),this.currentContainer=null,p.subscribe("containerReadyForCatalog",function(e){t.currentContainer=e}),p.publish("widgetCatalogLoaded",t.widget)},s.prototype.buildCatalog=function(){var t=this,e=t.getCatalogRequestURL();t.buildingCatalog=!0;var i=o.get(e);i.done(function(e){t.renderCatalog(a.portal.portalServer.itemXMLDOC2JSON(e).children),t.buildingCatalog=!1,t.paginationAfterLoading?t.buildPagination():t.stopLoading()})},s.prototype.bindEvents=function(){var t=this;t.$body.on("click",".lp-catalog-item .lp-catalog-add",function(e){e.preventDefault(),t.addToContainer(o(this).data("catalogid"))}),t.$body.on("mousedown",".lp-catalog-item .lp-catalog-add",function(t){t.stopImmediatePropagation(),t.stopPropagation()}),t.$body.on("click",".lp-catalog-item .lp-catalog-showPreview",function(e){e.preventDefault(),t.showPreview(o(this).data("catalogid"))}),t.$body.on("click",".lp-catalog-preview .lp-catalog-back",function(e){e.preventDefault(),t.$preview.fadeOut()})},s.prototype.getCatalogRequestURL=function(){var t=c,e=this.widget.model.getPreference("filterByTag");return e&&"undefined"!==e&&(t+="&f=tag.name(like)"+encodeURI(e)),t},s.prototype.renderCatalog=function(t){var e,a,n=this;o.each(t,function(t,s){t%9===0&&(e=o('<div class="lp-catalog-page lp-slides-page"></div>'),o(".lp-catalog-content",n.$body).append(e),a=o('<div class="lp-catalog-row row-fluid clearfix"></div>'),e.append(a));var d=s.preferences.icon.value?s.preferences.icon.value:s.extendedItemName.replace("widget-","").replace("-v1",""),l=o(i.to_html(r.widget,{uuid:s.uuid,icon:d,title:s.preferences.title.value}));n.catalog[s.uuid]=s,a.append(l)})},s.prototype.buildPagination=function(){var t=this;if(!(this.$body.find(".slides_control").length>0)){var e=this.$body.find(".lp-slides-page").length;if(e>1){var i=this.$body.find(".lp-catalog-pagination");this.$body.find(".lp-catalog-bottom").show();for(var a=0;e>a;a++)i.append(o('<li><a href="#"" data-slidesjs-item='+a+">"+(a+1)+"</a></li>"));i.find("li:nth-child(1)").addClass("current"),i.find("a").click(function(e){e.preventDefault(),o(".lph-slides-pagination li").removeClass("current"),t.$body.find(".lph-slides-container").slidesjs("stop",!0),t.$body.find(".lph-slides-container").slidesjs("goto",1*o(e.currentTarget).attr("data-slidesjs-item")+1),o(e.currentTarget.parentElement).addClass("current")}),o(".lph-slides-container",this.$body).slidesjs({width:900,height:355,navigation:{active:!1},pagination:{active:!1}})}this.$body.find(".lp-catalog-loading").fadeOut(),this.stopLoading()}},s.prototype.stopLoading=function(){o(".lp-catalog-loading",this.$body).hide()},s.prototype.addToContainer=function(t){var e=this.catalog[t];this.currentContainer&&"function"==typeof this.currentContainer.addItem&&this.currentContainer.addItem(e)},s.prototype.showPreview=function(t){var e=this.catalog[t],a=e.preferences?e.preferences.title.value:"",n=e.preferences.Description?e.preferences.Description.value:"",s=e.preferences.previewUrl?e.preferences.previewUrl.value.replace("$(contextRoot)",d):"";this.$preview.html(i.to_html(r.preview,{uuid:e.uuid,title:a,icon:e.preferences.icon?d+e.preferences.icon.value:"",description:n,preview:s})),this.$preview.fadeIn()},s},t.WidgetCatalog.$inject=["widget","lpCoreUtils","lpCoreBus"]}.call(e,i,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,a){t.exports=i},function(t,e,i){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}])});