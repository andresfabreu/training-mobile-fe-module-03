!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("base"),require("d3")):"function"==typeof define&&define.amd?define(["base","d3"],e):"object"==typeof exports?exports["module-wealth"]=e(require("base"),require("d3")):t["module-wealth"]=e(t.base,t.d3)}(this,function(t,e){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var r;(function(t){r=function(require,t,e){"use strict";var r=n(1),o=n(2),i=n(3),a=n(4);e.name="module-wealth";var s=[];e.exports=r.createModule(e.name,s).constant("utils",r.utils).constant("wealthUtils",o).constant("d3tip",i).provider(n(5)).factory(a.factories)}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}).call(e,n(7)(t))},function(e,n,r){e.exports=t},function(t,e,n){var r;r=function(require,t,e){"use strict";var r=n(6),o=n(1).ng;t.getDomainSize=function(t){var e=t.domain();return e[1]-e[0]},t.ticks=function(){var t=[2,3,4,6],e=0,n=50,o=function(t,e){t.setMonth(t.getMonth()+e)},i=function(i,a){for(var s=r.time.month.ceil(i),f=[];a>s;o(s,1))f.push(new Date(+s));var u,l=function(e){return e.getMonth()%t[u]===0},c=Math.floor(e/n);for(u=0;f.length>c;u++)f=f.filter(l);return f};return i.width=function(t){e=t},i.size=function(t){n=t},i.step=function(t){o=t},i},t.sticky=function(t,e){function n(){s=!1,c.width("auto").css("position",d)}function r(){l=c.offset().top}function i(){var t=h.scrollTop()+e;if(t>l){if(s)return;if(r(),l>=t)return;s=!0,p.height(u),c.width(f).css({position:"fixed",top:e})}else s&&n()}function a(){n();var t=c.width(),e=p.height();0>=t||0>=e||(f=t,u=e,r(),i())}e=e||0;var s,f,u,l,c=o.element(t),p=c.parent(),d=c.css("position"),h=o.element(window);h.on("resize",a).on("scroll",i),a()},t.pubsub=function(t){var e=36e5,n={};return{publish:function(r,o){n[r]=n[r]||[],n[r].push(o),setTimeout(function(){var t=n[r].indexOf(o);-1!==t&&n[r].splice(t,1)},e),t.publish.apply(t,arguments)},subscribe:function(e,r){t.subscribe.apply(t,arguments);var o=n[e];if(o)for(var i=0;i<o.length;++i)r(o[i])}}}(window.gadgets.pubsub)}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r,o,i;!function(a,s){o=[n(6)],r=s,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}(this,function(t){var e=5,n={tpl:'<div class="arrow"></div>',size:7};return function(){function r(t){M=y(t),T=M&&M.createSVGPoint(),M=M||t.node(),document.body.appendChild(b)}function o(){return"n"}function i(){return[0,0]}function a(){return" "}function s(){var t=g.apply(this);return{top:t.n.y-b.offsetHeight,left:t.n.x-b.offsetWidth/2}}function f(){var t=g.apply(this);return{top:t.s.y,left:t.s.x-b.offsetWidth/2}}function u(){var t=g.apply(this);return{top:t.e.y-b.offsetHeight/2,left:t.e.x}}function l(){var t=g.apply(this);return{top:t.w.y-b.offsetHeight/2,left:t.w.x-b.offsetWidth}}function c(){var t=g.apply(this);return{top:t.nw.y-b.offsetHeight,left:t.nw.x-b.offsetWidth}}function p(){var t=g.apply(this);return{top:t.ne.y-b.offsetHeight,left:t.ne.x}}function d(){var t=g.apply(this);return{top:t.sw.y,left:t.sw.x-b.offsetWidth}}function h(){var t=g.apply(this);return{top:t.se.y,left:t.e.x}}function m(){var e=t.select(document.createElement("div"));return e.style({position:"absolute",top:0,opacity:0,"pointer-events":"none","box-sizing":"border-box"}),e.node()}function y(t){return t=t.node(),"svg"===t.tagName.toLowerCase()?t:t.ownerSVGElement}function g(){for(var e=z||t.event.target;"undefined"==typeof e.getScreenCTM&&"undefined"===e.parentNode;)e=e.parentNode;var n={},r=e.getScreenCTM(),o=e.getBBox(),i=o.width,a=o.height,s=o.x,f="function"==typeof $?$(this.__data__):o.y;return T.x=s,T.y=f,n.nw=T.matrixTransform(r),T.x+=i,n.ne=T.matrixTransform(r),T.y+=a,n.se=T.matrixTransform(r),T.x-=i,n.sw=T.matrixTransform(r),T.y-=a/2,n.w=T.matrixTransform(r),T.x+=i,n.e=T.matrixTransform(r),T.x-=i/2,T.y-=a/2,n.n=T.matrixTransform(r),T.y+=a,n.s=T.matrixTransform(r),n}var v=o,x=i,w=a,b=m(),M=null,T=null,z=null;r.show=function(){var o=Array.prototype.slice.call(arguments);o[o.length-1]instanceof SVGElement&&(z=o.pop());var i,a=n.tpl+w.apply(this,o),s=x.apply(this,o),f=v.apply(this,o),u=t.select(b),l=P.length,c=document.documentElement.scrollTop||document.body.scrollTop,p=document.documentElement.scrollLeft||document.body.scrollLeft;for(u.html(a).style({opacity:1,"pointer-events":"all"});l--;)u.classed(P[l],!1);C?i=C.apply(this,u):(i=E.get(f).apply(this),i={top:Math.round(i.top+s[0]+c)+"px",left:Math.round(i.left+s[1]+p)+"px"}),u.classed(f,!0).style(i);var d=b.getBoundingClientRect(),h=M.getBoundingClientRect(),m=d.left<h.left?d.left-h.left:d.right>h.right?d.right-h.right:0,y=d.width/2-n.size;if(u.classed("no-bl",e-y>m),u.classed("no-br",m>y-e),m){i.left=parseFloat(i.left)-m+"px",u.style(i);var g=n.size,T=n.size;-y>m?(g=Math.max(0,y+n.size+m),m=-y):m>y&&(T=Math.max(0,y+n.size-m),m=Math.ceil(y+n.size-T)),u.select(".arrow").style({"margin-left":m-n.size+"px","border-left-width":g+"px","border-right-width":T+"px"})}return r},r.hide=function(){var e=t.select(b);return e.style({opacity:0,"pointer-events":"none"}),r},r.attr=function(e,n){if(arguments.length<2&&"string"==typeof e)return t.select(b).attr(e);var o=Array.prototype.slice.call(arguments);return t.selection.prototype.attr.apply(t.select(b),o),r},r.style=function(e,n){if(arguments.length<2&&"string"==typeof e)return t.select(b).style(e);var o=Array.prototype.slice.call(arguments);return t.selection.prototype.style.apply(t.select(b),o),r},r.direction=function(e){return arguments.length?(v=null==e?e:t.functor(e),r):v},r.offset=function(e){return arguments.length?(x=null==e?e:t.functor(e),r):x},r.html=function(e){return arguments.length?(w=null==e?e:t.functor(e),r):w};var $;r.y=function(t){return $=t,r};var C;r.pos=function(t){return C=t,r};var E=t.map({n:s,s:f,e:u,w:l,nw:c,ne:p,sw:d,se:h}),P=E.keys();return r}})},function(t,e,n){var r;r=function(require,t,e){"use strict";function r(t){return t}function o(t,e,n){function o(r){return this.deferred?this.deferred.promise:(this.deferred=e.defer(),t.get(n.getConfig("portfolioEndPoint").replace(/\{id}/,r)).then(function(t){return 200===t.status&&t.data?(this.data=a(t.data),this.deferred.resolve(this.data),delete this.deferred,this.data):!1}.bind(this)),this.deferred.promise)}function i(t){return a=t,this}var a=r;return{getData:o,parser:i}}function i(t){function e(t){t.date=r[n](t.date)}t=t.totalPortfolioValueOverPeriod;var n,r={monthly:s.time.format("%Y%m").parse,yearly:s.time.format("%Y").parse};for(n in t)t[n].forEach(e);return t}function a(t){t=t.allocations;var e=s.time.format("%Y%m").parse;return t.forEach(function(t){t.date=e(t.date)}),t}var s=n(6);t.factories={},t.factories.aggregatedModel=function(t,e,n){return o(t,e,n)},t.factories.aggregatedModel.$inject=["$http","$q","lpWealth"],t.factories.ptfModel=function(t,e,n){return o(t,e,n).parser(i)},t.factories.ptfModel.$inject=["$http","$q","lpWealth"],t.factories.assetModel=function(t,e,n){return o(t,e,n).parser(a)},t.factories.assetModel.$inject=["$http","$q","lpWealth"]}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(require,t,e){"use strict";t.lpWealth=function(){var t={portfolioEndPoint:"",timespan:"3 years",frequency:"monthly"};this.$get=function(e){var n=t;return{setConfig:function(r){return n=e(r).chain().mapValues(e.resolvePortalPlaceholders).defaults(t).value(),this},getConfig:function(t){return t&&e.isString(t)?n[t]:n}}},this.$get.$inject=["lpCoreUtils"]}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,n,r){t.exports=e},function(t,e,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}])});