!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("base"),require("core"),require("ui"),require("module-accounts")):"function"==typeof define&&define.amd?define(["base","core","ui","module-accounts"],n):"object"==typeof exports?exports["widget-accounts-dropdown"]=n(require("base"),require("core"),require("ui"),require("module-accounts")):e["widget-accounts-dropdown"]=n(e.base,e.core,e.ui,e["module-accounts"])}(this,function(e,n,o,t){return function(e){function n(t){if(o[t])return o[t].exports;var c=o[t]={exports:{},id:t,loaded:!1};return e[t].call(c.exports,c,c.exports,n),c.loaded=!0,c.exports}var o={};return n.m=e,n.c=o,n.p="",n(0)}([function(e,n,o){var t;(function(e){t=function(require,e,n){"use strict";function t(e,n){n.setConfig({accountsEndpoint:e.getPreference("accountsDataSrc"),locale:e.getPreference("locale")})}n.name="widgets-accounts-dropdown";var c=o(1),r=o(2),u=o(3),i=o(4),l=[r.name,u.name,i.name];t.$inject=["lpWidget","lpAccounts"],n.exports=c.createModule(n.name,l).factory(o(5)).factory(o(6)).controller(o(7)).run(t)}.call(n,o,n,e),!(void 0!==t&&(e.exports=t))}).call(n,o(8)(e))},function(n,o,t){n.exports=e},function(e,o,t){e.exports=n},function(e,n,t){e.exports=o},function(e,n,o){e.exports=t},function(e,n,o){var t;t=function(require,e,n){"use strict";e.AccountsDropdownUtils=function(e){var n="000-000-000",o={id:n,ids:"",hideAmounts:!0,currency:"",alias:"All Finances",availableBalance:"",bookedBalance:"",accountIdentification:[],identifier:""},t=function(n,o,t){return e.pluck(n,t||"alias").join((o||",")+" ")},c=function(o){return e.some(o,function(e){return e.id===n})},r=function(n){var o=e.chain(n).pluck("currency").uniq().value();return 1===o.length?o[0]:!1},u=function(n,o){var t=e.pluck(n,o),c=0;return e.isArray(t)&&e.forEach(t,function(e){var n=parseFloat(e)||0;c+=n}),c},i=function(n){var o,t,c={};return n&&e.isArray(n)?(o=e.pluck(n,"id"),t=e.pluck(n,"alias"),o.forEach(function(e,n){c[e]=t[n]||"No Data"}),c):c},l=function(n){return e.pluck(n,"id").join(",")};return{addAllAccountsItem:function(e){return c(e)||(o.accountsNames=i(e),o.ids=l(e),o.identifier=t(e),r(e)!==!1&&(o.availableBalance=u(e,"availableBalance"),o.bookedBalance=u(e,"bookedBalance"),o.currency=r(e),o.hideAmounts=!1),e.unshift(o)),e},getAllAccountsId:function(){return n}}},e.AccountsDropdownUtils.$inject=["lpCoreUtils"]}.call(n,o,n,e),!(void 0!==t&&(e.exports=t))},function(e,n,o){var t;t=function(require,e,n){"use strict";e.AccountsDropdownModel=function(e,n,o,t,c,r){var u=e.getPreference("initialAccountId")||"",i=e.getPreference("showAllAccountsItem")||!1,l={accounts:[],selected:{}},a=function(e){return l.accounts.filter(function(n){return n.id===e})[0]||null},s=function(){var e=n.defer();return t.load().then(function(n){l.accounts=c.addAllAccountsItem(o.clone(n)),u?l.selected=a(u):i&&(l.selected=a(c.getAllAccountsId())),e.resolve(l)},function(n){e.reject(n)}),e.promise.success=e.promise.then,e.promise.error=e.promise["catch"],e.promise};return{loadAccounts:s}},e.AccountsDropdownModel.$inject=["lpWidget","$q","lpCoreUtils","lpAccounts","AccountsDropdownUtils","lpCoreError"]}.call(n,o,n,e),!(void 0!==t&&(e.exports=t))},function(e,n,o){var t;t=function(require,e,n){"use strict";e.AccountsDropdownController=function(e,n,o,t,c,r){var u=this,i=function(){c.loadAccounts().then(function(e){u.model=e,t.publish("lpAccounts.loaded",u.model.accounts)},function(e){o.captureException(e)}),e.$watch("ctrl.model.selected",function(e){e&&t.publish("launchpad-retail.accountSelected",{accountId:u.model.selected.id,allAccounts:r.getAllAccountsId()===u.model.selected.id?!0:!1,_noBehavior:!0},!0)})};i()},e.AccountsDropdownController.$inject=["$scope","lpCoreUtils","lpCoreError","lpCoreBus","AccountsDropdownModel","AccountsDropdownUtils"]}.call(n,o,n,e),!(void 0!==t&&(e.exports=t))},function(e,n,o){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}])});