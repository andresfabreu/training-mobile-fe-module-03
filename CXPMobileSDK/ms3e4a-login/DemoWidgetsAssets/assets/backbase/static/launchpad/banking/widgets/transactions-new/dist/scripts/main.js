!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("base"),require("ui"),require("core"),require("module-accounts"),require("module-transactions-2"),require("module-contacts"),require("module-freshness")):"function"==typeof define&&define.amd?define(["base","ui","core","module-accounts","module-transactions-2","module-contacts","module-freshness"],t):"object"==typeof exports?exports["widget-transactions-new"]=t(require("base"),require("ui"),require("core"),require("module-accounts"),require("module-transactions-2"),require("module-contacts"),require("module-freshness")):e["widget-transactions-new"]=t(e.base,e.ui,e.core,e["module-accounts"],e["module-transactions-2"],e["module-contacts"],e["module-freshness"])}(this,function(e,t,n,a,o,c,s){return function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var a;(function(e){a=function(require,e,t){"use strict";function a(e,t,n,a){t.setConfig({endpoint:e.getPreference("categoryDataSrc")}),n.setConfig({accountsEndpoint:e.getPreference("accountsDataSrc")}),a.setConfig({transactionsEndpoint:e.getPreference("transactionsDataSrc"),transactionDetailsEndpoint:e.getPreference("transactionDetailsDataSrc"),pageSize:parseInt(e.getPreference("transactionsPageSize"),10)||void 0})}t.name="widgets-transactions-3";var o=n(1),c=n(2),s=n(3),r=n(4),i=n(5),l=n(6),u=n(7),p=[s.name,c.name,r.name,i.name,l.name,u.name];a.$inject=["lpWidget","lpTransactionsCategory","lpAccounts","lpTransactions"],t.exports=o.createModule(t.name,p).controller(n(8)).run(a)}.call(t,n,t,e),!(void 0!==a&&(e.exports=a))}).call(t,n(9)(e))},function(t,n,a){t.exports=e},function(e,n,a){e.exports=t},function(e,t,a){e.exports=n},function(e,t,n){e.exports=a},function(e,t,n){e.exports=o},function(e,t,n){e.exports=c},function(e,t,n){e.exports=s},function(e,t,n){var a;a=function(require,e){"use strict";e.MainCtrl=function(e,t,n,a,o,c,s,r,i,l,u,p,d){var f=function(){n(function(){e.$apply()})},h={ACCOUNT:"account",CARD:"card"},g=function(e,t){s.forEach(l.accounts,function(n){t[h[e.toUpperCase()]+"Id"]===n.id&&(l.selected=n)}),f()},m=function(e,t){s.find(e,function(e){return e.id==t.id})||e.push(t)},T=function(){e.lpTransactionsCategory.getAll(),e.lpContacts.loadContacts()},C=function(){e.lpAccounts=l,e.lpTransactionsCategory=r.api(),e.lpTransactions=i.api(),e.lpContacts=new p({contacts:s.resolvePortalPlaceholders(a.getPreference("contactsDataSrc")),lazyload:!0}),e.showCharts=s.parseBoolean(a.getPreference("showCharts")),e.showAccountSelect=s.parseBoolean(a.getPreference("showAccountSelect")),e.accountsTopBalance=a.getPreference("preferredBalanceView")||"current",e.showDatesAllTransactions=s.parseBoolean(a.getPreference("showDatesAllTransactions"))||!1,e.showCategories=!1,e.hideDetailsPreference=s.parseBoolean(a.getPreference("hideTransactionDetails"))||!1,e.offsetTopCorrection=0,e.accountSelectSize="large",e.tabs={list:!0,chart:!1,combined:!1},l.load().then(function(){if(!l.selected&&l.accounts&&l.accounts.length>0){var t=l.findByAccountNumber(a.getPreference("defaultAccount"))||l.accounts[0];l.selected=t,o.subscribe("launchpad-retail.accountSelected",function(e){e.originType&&"transactions"===e.originType||g(h.ACCOUNT,e)}),o.subscribe("launchpad-retail.cardSelected",function(e){var t=e.account;t.cardId||(t.cardId=t.id),t.cardId&&(m(l.accounts,t),g(h.CARD,t))}),o.subscribe("launchpad-retail.transactions.applyFilter",function(t){e.searchTerm=t.contactName,e.lpTransactions.setFilters(t.filters),e.lpTransactions.loadTransactions(l.selected)}),o.subscribe("launchpad-retail.transactions.newTransferSubmitted",function(){n(function(){e.lpTransactions.clearTransactionsList(),e.lpTransactions.loadMoreTransactions()},3e3)}),o.subscribe("launchpad-retail.donutCategoryChartSelection",function(t){e.lpTransactions.setFilters({category:t.categoryId}),e.lpTransactions.loadTransactions(l.selected)})}}),T(),o.subscribe("launchpad-retail.offsetTopCorrection",function(t){e.offsetTopCorrection=t.offsetTopCorrection}),d.read().success(function(t){e.showCategories=s.parseBoolean(t.pfmEnabled)})};e.accountChanged=function(){o.publish("launchpad-retail.accountSelected",{accountId:l.selected.id,originType:"transactions",_noBehavior:!0},!0)},e.selectTab=function(t){e.$broadcast("tabSelected",t)},e.transferMoney=function(){o.publish("launchpad-retail.requestMoneyTransfer")},e.onPerformSearch=function(t){e.lpTransactions.setFilters(t),e.lpTransactions.loadTransactions(l.selected)},e.onClearSearch=function(){e.lpTransactions.clearFilters(),e.lpTransactions.loadTransactions(l.selected)},e.onUpdateSearch=function(){e.lpTransactions.updateFilters(),e.lpTransactions.loadTransactions(l.selected)},e.onChangeSort=function(t){e.lpTransactions.sort=t.sort,e.lpTransactions.transactions&&e.lpTransactions.transactions.length&&e.lpTransactions.loadTransactions(l.selected)},u.enable(t).rule({"max-width":200,then:function(){e.categorySmallLayout=!1,e.categoryLayout="tile",e.responsiveClass="lp-tile-size",f()}}).rule({"min-width":201,"max-width":375,then:function(){e.accountSelectSize="small",e.categorySmallLayout=!0,e.categoryLayout="small",e.responsiveClass="lp-small-size",f()}}).rule({"min-width":376,"max-width":600,then:function(){e.accountSelectSize="large",e.categorySmallLayout=!1,e.categoryLayout="small",e.responsiveClass="lp-medium-size",f()}}).rule({"min-width":601,then:function(){e.categorySmallLayout=!1,e.categoryLayout="large",e.responsiveClass="lp-large-size",f()}}),C(),o.subscribe("lpDataFreshnessRefresh",function(e){l.load(!0).then(function(){o.publish("lpDataFreshnessChanged",e)}),T()})},e.MainCtrl.$inject=["$scope","$element","$timeout","lpWidget","lpCoreBus","i18nUtils","lpCoreUtils","lpTransactionsCategory","lpTransactions","lpAccounts","lpUIResponsive","ContactsModel","PreferenceService"]}.call(t,n,t,e),!(void 0!==a&&(e.exports=a))},function(e,t,n){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}])});