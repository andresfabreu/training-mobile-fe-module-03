<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:g="http://www.backbase.com/2008/gadget" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/xml; charset=UTF-8" />
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="bower_components/theme/themes/default/css/base.css" type="text/css" />
    <link rel="stylesheet" href="styles/base.css" type="text/css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.1.15/require.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.js"></script>
    <script src="bower_components/config/requirejs.conf.js"></script>

    <script>
    // adding a mock for Core Util Portal functions
    window.b$ = { 'portal': { 'portalView': null } };

    require(['base'], function (base) {

        var __WIDGET__ = {
            body:  document.body,
            addEventListener: function() {},
            getPreferenceFromParents: function(name) {
                switch (name) {
                    case 'defaultAccount':
                        return '';
                        break;
                }
            },
            getPreference: function(name){
                switch(name){
                    case 'categoryDataSrc':
                        return '/api/v1/pfm/transaction-categories';
                        break;
                    case 'accountsDataSrc':
                        return '/api/v1/debit-accounts';
                        break;
                    case 'contactsDataSrc':
                        return '/api/v1/party-data-management/counter-parties';
                        break;
                    default:
                        return '';
                }
            }
        }
        base.requireWidget(__WIDGET__ , 'scripts/main');

    });
    </script>

</head>

<body ng-controller="MainCtrl as mainCtrl" class="lp-transactions-search ng-cloak" ng-class="responsiveClass">
    <div lp-transactions-search="lp-transactions-search"
        accounts="accounts"
        contacts="contacts"
        transactions-categories="transactionsCategory"
        on-perform-search="onPerformSearch(filters)"
        on-clear-search="onClearSearch()"
        on-update-search="onUpdateSearch()"
        on-change-sort="onChangeSort(value)"></div>
</body>
</html>
