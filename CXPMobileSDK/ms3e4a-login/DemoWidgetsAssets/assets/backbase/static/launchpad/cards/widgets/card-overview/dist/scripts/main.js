!function(e,a){"object"==typeof exports&&"object"==typeof module?module.exports=a(require("base"),require("ui"),require("core"),require("module-accounts")):"function"==typeof define&&define.amd?define(["base","ui","core","module-accounts"],a):"object"==typeof exports?exports["widget-card-overview"]=a(require("base"),require("ui"),require("core"),require("module-accounts")):e["widget-card-overview"]=a(e.base,e.ui,e.core,e["module-accounts"])}(this,function(e,a,r,c){return function(e){function a(c){if(r[c])return r[c].exports;var t=r[c]={exports:{},id:c,loaded:!1};return e[c].call(t.exports,t,t.exports,a),t.loaded=!0,t.exports}var r={};return a.m=e,a.c=r,a.p="",a(0)}([function(e,a,r){var c;(function(e){c=function(require,e,a){"use strict";function c(){}a.name="widget-card-overview";var t=r(1),n=r(2),i=r(3),d=r(4),o=[i.name,n.name,d.name];a.exports=t.createModule(a.name,o).controller(r(5)).directive(r(6)).run(c)}.call(a,r,a,e),!(void 0!==c&&(e.exports=c))}).call(a,r(7)(e))},function(a,r,c){a.exports=e},function(e,r,c){e.exports=a},function(e,a,c){e.exports=r},function(e,a,r){e.exports=c},function(e,a,r){var c;c=function(require,e,a){"use strict";e.CardOverviewController=function(e,a,r,c,t,n,i){var d=n;e.cardRewards=0,e.cardMinimum=0,e.cardDueDate=(new Date).getTime();var o=function(a){var r=e.cardsModel.loadCardDetails(a);r.then(function(){e.cardsModel.loadCardLoyaltyDetails().then(function(){var a;for(a=0;a<e.cardsModel.selected.loyalty.length;a++)if("TOTAL_REWARDS"===e.cardsModel.selected.loyalty[a].id){e.cardRewards=e.cardsModel.selected.loyalty[a].value;break}if(e.cardsModel.selected.details)for(a=0;a<e.cardsModel.selected.details.length;a++)"NEXT_CLOSING_DATE"===e.cardsModel.selected.details[a].id&&(e.cardDueDate=e.cardsModel.selected.details[a].value),"MINIMUM_PAYMENT_DUE"===e.cardsModel.selected.details[a].id&&(e.cardMinimum=e.cardsModel.selected.details[a].value)}),d.publish("launchpad-retail.cardSelected",{account:e.cardsModel.selected,originType:"card-overview"})})},s=function(){var a=e.cardsModel.load();a.then(function(){o(e.cardsModel.cards[0].id)})},l=function(){e.mediaDir=i.getWidgetBaseUrl(a)+"/media",e.cardsModel=t.getInstance({cardsEndpoint:a.getPreference("cardDataSrc")}),s(),d.subscribe("launchpad-retail.cardSelected",function(e){var a=e.account;a&&a.id&&"card-overview"!==e.originType&&o(a.id)})};e.cardChanged=function(){o(e.cardsModel.selected.id)},l()},e.CardOverviewController.$inject=["$scope","lpWidget","i18nUtils","httpService","CardsModel","lpCoreBus","lpCoreUtils"]}.call(a,r,a,e),!(void 0!==c&&(e.exports=c))},function(e,a,r){var c;c=function(require,e,a){"use strict";e.cardDesign=function(){return{restrict:"A",replace:!0,require:"ngModel",scope:{},template:'<div class="card-design" element-resize="updateFontSize(data)"><img ng-src="{{card.image}}" alt="" class="card-image" /><span class="card-text card-holder">{{card.name}}</span><span class="card-text card-number">{{card.number}}</span><span class="card-text card-expiry">{{card.expiry}}</span></div>',link:function(e,a,r,c){if(c){var t={VISA:e.$parent.mediaDir+"/cc-visa.png",Mastercard:e.$parent.mediaDir+"/cc-mastercard.png",AMEX:e.$parent.mediaDir+"/cc-amex.png",Discover:e.$parent.mediaDir+"/cc-discover.png",other:e.$parent.mediaDir+"/cc-other.png"};e.card={};var n=function(a){if(a&&"undefined"!=typeof a.brand){var r=t.other;return Object.keys(t).forEach(function(e){e===a.brand&&(r=t[a.brand])}),e.card.image=r,e.card.name=a.cardHolderName,e.card.number=a.cardNumber,e.card.expiry=a.expiryDate,a}};c.$formatters.push(n),e.updateFontSize=function(e){a[0].style.fontSize=e.width/250*100+"%"}}}}},e.accountWidgetRewards=function(){return{restrict:"A",scope:{value:"@"},template:'<div class="column"><div class="chunk-name"><i class="glyphicon glyphicon-calendar"></i><span lp-i18n="rewards"></span></div><div class="chunk-value text-right">{{value}}</div></div>',link:function(e,a,r){}}},e.accountWidgetPayment=function(){return{restrict:"A",scope:{value:"@",currency:"@"},template:'<div class="column"><div class="chunk-name"><i class="glyphicon glyphicon-calendar"></i><span lp-i18n="minimum"></span></div><div class="chunk-value text-right"><span lp-amount="numberValue" lp-amount-currency="currency"/></div></div>',link:function(e,a,r){e.$watch("value",function(a){e.numberValue=isNaN(parseFloat(e.value))?0:parseFloat(e.value)})}}},e.accountWidgetPayDue=function(){return{restrict:"A",scope:{value:"@",currency:"@"},template:'<div class="column" ng-class="{\'bg-danger\':daysToPay<1}"><div class="chunk-name"><i class="glyphicon glyphicon-calendar"></i><span lp-i18n="due date"></span></div><div class="chunk-value text-right">{{daysToPay}} day{{daysToPay > 1 || daysToPay < -1 ? \'s\' : \'\'}}</div></div>',link:function(e,a,r){e.$watch("value",function(a){var r=new Date(parseInt(a,10)).getTime(),c=(new Date).getTime(),t=parseInt((r-c)/864e5,10);e.daysToPay=t})}}}}.call(a,r,a,e),!(void 0!==c&&(e.exports=c))},function(e,a,r){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}])});