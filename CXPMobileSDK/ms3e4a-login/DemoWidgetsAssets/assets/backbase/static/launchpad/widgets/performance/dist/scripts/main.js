!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("base"),require("core"),require("ui")):"function"==typeof define&&define.amd?define(["base","core","ui"],e):"object"==typeof exports?exports["first-widget"]=e(require("base"),require("core"),require("ui")):t["first-widget"]=e(t.base,t.core,t.ui)}(this,function(t,e,r){return function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return t[i].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){var i;(function(t){i=function(require,t,e){"use strict";function i(t,e){t.publish(e+":ready")}e.name="first-widget";var n=r(2),o=r(3),s=r(4),c=[o.name,s.name];i.$inject=["lpCoreBus","WIDGET_NAME"],e.exports=n.createModule(e.name,c).constant("WIDGET_NAME",e.name).controller(r(5)).service(r(6)).run(i)}.call(e,r,e,t),!(void 0!==i&&(t.exports=i))}).call(e,r(1)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(e,r){e.exports=t},function(t,r){t.exports=e},function(t,e){t.exports=r},function(t,e,r){var i;i=function(require,t,e){"use strict";function r(t,e,r,i){this.model=t,this.utils=r,this.error=i,this.widget=e,this.widget.loading(),this.loader=!0,this.from={},this.to={},this.fromInput=this.widget.getPreference("amount"),this.init(this.widget.getPreference("fromCurrency"),this.widget.getPreference("toCurrency"))["catch"](this.handleErrors.bind(this))["finally"](function(){this.widget.loaded(),this.loader=!1}.bind(this))}r.$inject=["WidgetModel","lpWidget","lpCoreUtils","lpCoreError"],r.prototype.init=function(t,e){var r={currency:t||this.from.code,toCurrency:e||this.to.code};return this.model.fetchCurrencyRates(r).then(function(t){return this.currencies=this.model.data,this.from=this.model.item(r.currency),this.to=this.model.item(r.toCurrency),this.convert(this.fromInput),t}.bind(this))},r.prototype.convert=function(t){var e=(t/this.from.rate*this.to.rate).toFixed(2);return this.toInput=isNaN(e)===!1?parseFloat(e,2):"",this},r.prototype.handleErrors=function(t){return this.error.captureException(t),this.widget.error=t.message||t.statusText,this},t.MainCtrl=r}.call(e,r,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,r){var i;i=function(require,t,e){"use strict";function i(t){return c.union(t.preferred,t.rest).map(function(t){return{code:t.currency_code,rate:t.exchange_rate}})}function n(t){if(t.status<200&&t.status>300)throw new Error("error message");return t.data}function o(t){return u.map(function(e){return e.rate=1,t.forEach(function(t){t.code===e.code&&(e.rate=t.rate)}),e})}function s(t,e){this.data=[],this.fetch=t,this.widget=e,this.url=this.widget.getPreference("currencyRatesEndpoint")}var c=r(2).utils,u=[{code:"USD",name:"US Dollar",symbol:"$"},{code:"EUR",name:"Euro",symbol:"€"},{code:"GBP",name:"British Pound",symbol:"£"},{code:"HUF",name:"Hungarian Forint",symbol:"Ft"},{code:"PLN",name:"Polish Zloty",symbol:"zł"},{code:"CHF",name:"Swiss Franc",symbol:"CHF"}];s.$inject=["$http","lpWidget"],s.prototype.fetchCurrencyRates=function(t){return this.fetch({url:this.url,params:t||{}}).then(n).then(i).then(o.bind(this)).then(function(t){return this.data=t,t}.bind(this))},s.prototype.item=function(t){return c.findWhere(this.data,{code:t})},t.WidgetModel=s}.call(e,r,e,t),!(void 0!==i&&(t.exports=i))}])});