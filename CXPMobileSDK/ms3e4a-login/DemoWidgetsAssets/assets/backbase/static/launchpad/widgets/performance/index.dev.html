<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:g="http://www.backbase.com/2008/gadget" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/xml; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- add theme -->
    <link rel="stylesheet" href="bower_components/theme/themes/default/css/base.css">
    <link rel="stylesheet" href="styles/base.css" type="text/css" />
    <!-- add main libs only dev required -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.1.15/require.js"></script>
    <script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/config/requirejs.conf.js"></script>

    <script>
    require(['base', 'mock'], function (base, mock) {
        window.b$ = { portal: mock.Portal({ }) };
        window.bd = mock.Bd({});
        mock.Widget({ // Returns Promise.
            model: './model.xml',
            view: document.body,
            preferences: {
                // Override preferences from model.xml
                'src': './index.dev.html',
                'currencyRatesEndpoint': '/api/v1/currency-rates'
            }
        }).then(function(__WIDGET__) {
            base.requireWidget(__WIDGET__, 'scripts/main');
        });
    });
    </script>

</head>

<body ng-controller="MainCtrl as mainCtrl" class="lp-widget-currency-converter" ng-cloak="true">

    <div class="panel panel-default clearfix">
        <div class="panel-heading">Exchange Rates</div>
        <div class="panel-body lp-converter" progress-indicator="mainCtrl.loader">
            <lp-template ng-hide="mainCtrl.widget.error" src="'templates/main.ng.html'"></lp-template>
            <h3 class="text-center text-danger lp-widget-currency-converter__error" ng-if="mainCtrl.widget.error">
                <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> Unable to fetch data.
                <p class="small" ng-bind="mainCtrl.widget.error"></p></h3>
        </div>
    </div>

    <a href="#" class="small text-muted pull-right">Disclaimer</a>

</body>
</html>
