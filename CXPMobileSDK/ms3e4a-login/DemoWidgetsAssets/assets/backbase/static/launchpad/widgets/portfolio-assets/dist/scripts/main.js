!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("base"),require("core"),require("module-wealth"),require("d3")):"function"==typeof define&&define.amd?define(["base","core","module-wealth","d3"],t):"object"==typeof exports?exports["widget-portfolio-assets"]=t(require("base"),require("core"),require("module-wealth"),require("d3")):e["widget-portfolio-assets"]=t(e.base,e.core,e["module-wealth"],e.d3)}(this,function(e,t,n,o){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var o;(function(e){o=function(require,e,t){"use strict";function o(e,t){t.setConfig({portfolioEndPoint:e.getPreference("dataSrc")})}t.name="widget-portfolio-assets";var r=n(1),i=n(2),a=n(3),s=[a.name,i.name];o.$inject=["lpWidget","lpWealth"],t.exports=r.createModule(t.name,s).controller(n(4)).directive(n(5)).run(o)}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))}).call(t,n(7)(e))},function(t,n,o){t.exports=e},function(e,n,o){e.exports=t},function(e,t,o){e.exports=n},function(e,t,n){var o;o=function(require,e,t){"use strict";var n=[{key:"equities",value:"Equities"},{key:"other",value:"Other Investments"},{key:"bonds",value:"Bonds"},{key:"cash",value:"Cash"}];e.MainCtrl=function(e,t){function o(e){r.loading=!1,r.data=e}var r=this;r.config={types:n},t.subscribe("launchpad-retail.portfolioSelected",function(t){r.loading=!0,e.getData(t.id).then(o)})},e.MainCtrl.$inject=["assetModel","lpCoreBus"]}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))},function(e,t,n){var o;o=function(require,e,t){"use strict";function o(e,t){function n(e,t){return'<tr><td><label class="legend asset-'+t+'">'+e.value+"%</label></td></tr>"}function o(e){return r.entries(e.assetAllocation).map(n).join("")}var a,s=i.element('<div class="details"><div class="line"/><table/></div>').width(l),c=s.find(".line");return s.update=function(){if(a){var n=t(a),o=0>n?0:l/2>n?n:n>e.width?l:n>e.width-l/2?n+l-e.width:l/2;c.css("left",o+"px"),s.css("left",n-o+"px")}},s.set=function(e){a=e,s.find("table").html(o(a)),s.update()},s}var r=n(6),i=n(1).ng,a=r.time.format.multi([["%b %Y",function(e){return 0===e.getMonth()}],["%b",function(e){return 1===e.getDate()}],["",function(){return!0}]]),s={top:0,bottom:15},l=80;e.lpWealthAssets=function(e,t,n,l){function c(l,c){function p(){l.range&&g.domain(l.range),C.selectAll(".asset").call(S),C.select(".x.axis").call(q),W.update()}function h(){var e=c.innerWidth(),t=c.innerHeight()-s.top-s.bottom;0>=e||0>=t||(l.width=e,x.width(e),g.range([0,e]),b.range([0,t]),C.attr({width:e,height:t+s.top+s.bottom}),C.select(".x.axis").attr("transform","translate(0,"+t+")"),W.height(t),p())}function m(){var e=l.data;if(e){var t=A(v.map(function(t){return{name:t.key,data:e.map(function(e){return{date:e.date,y:e.assetAllocation[t.key]/100}})}}));C.selectAll(".asset").data(t).enter().append("path").attr("class",function(e,t){return"asset asset-"+t}),$(d(e[e.length-1])),p()}}var v=l.config.types,g=r.time.scale(),b=r.scale.linear(),x=n.ticks(),y=t.compose(g,d),w=function(){var e=r.bisector(function(e,t){return e.date-t}).left;return function(t){return t=r.time.month(t),l.data[e(l.data,t)]}}(),k=c.find("svg")[0],q=r.svg.axis().scale(g).orient("bottom").tickSize(0).tickFormat(a).ticks(x),A=r.layout.stack().values(f),M=r.svg.area().x(y).y0(function(e){return b(e.y0)}).y1(function(e){return b(e.y0+e.y)}),j=t.compose(M,f),S=function(e){e.attr("d",j)},C=r.select(k);C.append("g").attr("class","x axis"),C.on("click",function(){var e=g.invert(r.event.layerX);e.getDate()>15&&e.setMonth(e.getMonth()+1,1),u.publish("portfolio-itemSelected",w(e).date)});var W=o(l,y);W.insertAfter(k);var $=t.compose(W.set,w),E=t.compose(p,function(e){l.range=e});h(),i.element(e).on("resize",t.debounce(h,250)),u.subscribe("portfolio-rangeSelected",E),u.subscribe("portfolio-rangeSelected-live",E),u.subscribe("portfolio-itemSelected",$),l.$watch("data",m)}var u=l,d=t.property("date"),f=t.property("data");return{restrict:"EA",require:"?ngModel",priority:Number.MAX_VALUE,link:c,template:"<svg/>",scope:{config:"=lpWealthAssets",data:"=ngModel"}}},e.lpWealthAssets.$inject=["$window","utils","wealthUtils","lpCoreBus"]}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))},function(e,t,n){e.exports=o},function(e,t,n){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}])});