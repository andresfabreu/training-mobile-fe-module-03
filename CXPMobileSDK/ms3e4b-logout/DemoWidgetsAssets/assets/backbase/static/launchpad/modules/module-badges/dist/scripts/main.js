!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("base"),require("core")):"function"==typeof define&&define.amd?define(["base","core"],t):"object"==typeof exports?exports["module-badges"]=t(require("base"),require("core")):e["module-badges"]=t(e.base,e.core)}(this,function(e,t){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var o;(function(e){o=function(require,e,t){"use strict";t.name="module-badges";var o=n(1),r=n(2),a=n(5),i=[r.name,a.name];return o.createModule(t.name,i).factory(n(3)).factory(n(4))}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))}).call(t,n(6)(e))},function(t){t.exports=e},function(e){e.exports=t},function(e,t,n){var o;o=function(require,e){"use strict";var t=window.gadgets,n=window.jQuery;e.lpBadgesResource=function(e){var n="http://localhost:3000",o=n+"/services/rest/v1/badges",r=e.getInstance({endpoint:o,cacheTimeout:0}),a=function(e){var t=e.data;return t&&t.length>0&&"type"in t[0]&&"unread"in t[0]?t:[]},i=function(){var e=r.read();e.then(function(e){t.pubsub.publish("lpBadgesUnreadServer",a(e))})};return t.pubsub.subscribe("lpBadgesReadNotify",function(e){r.update({contentType:"application/json",data:e})}),t.pubsub.subscribe("lpBadgesGetItems",i),{getBadgesList:i}},e.lpBadgesResource.$inject=["httpService"],e.badgesUtils=function(){var e={right:function(e){var t=Math.abs(e.outerWidth()/2);e.css("right","-"+t+"px")},top:function(e){var t=Math.abs(e.outerHeight()/2);e.css("top","-"+t+"px")},left:function(e){var t=Math.abs(e.outerWidth()/2);e.css("left","-"+t+"px")},bottom:function(e){var t=Math.abs(e.outerHeight()/2);e.css("bottom","-"+t+"px")},middle:function(e){e.css({top:"50%",transform:"translateY(-50%)"})},follow:function(e){e.css({position:"relative"})}},t=function(t,o){var r=o.split("-"),a=n(t).find("span");a.hide().removeClass("showBadge"),setTimeout(function(){r.forEach(function(t){e[t](a)}),a.addClass("showBadge").show()},0)};return{position:t}}}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))},function(e,t,n){var o;o=function(require,e){"use strict";var t=n(1).utils;e.lpBadgesController=function(e){var n=e,o=[],r=function(e){return e&&t.isArray(e)?!0:(console.warn("Badges: input data is invalid!"),!1)},a=function(e){return e&&t.isObject(e)&&e.hasOwnProperty("type")&&e.hasOwnProperty("delta")?!0:(console.warn("Badges: client data is invalid!"),!1)},i=function(e){var n,r,a,i,s;n=t.pluck(e,"type"),r=t.pluck(o,"type"),a=t.difference(n,r),i=t.difference(r,n),s=t.intersection(n,r),a.forEach(function(n){var r=t.filter(e,function(e){return e.type===n});1===r.length&&o.push(r[0])}),o.forEach(function(e){-1!==t.indexOf(i,e.type)&&(e.unread=0)}),o.forEach(function(n){var o;-1!==t.indexOf(s,n.type)&&(o=t.filter(e,function(e){return e.type===n.type}),1===o.length&&(n.unread=o[0].unread))})},s=function(){o.forEach(function(e){n.publish("lpBadgesUnread."+e.type,e.unread)})},u=function(e){n.publish("lpBadgesReadNotify",e)},c=function(e){return r(e)?(i(e),void s()):!1},d=function(e){o.forEach(function(t){t.type===e.type&&(t.unread=0===e.delta?0:t.unread-e.delta)}),s()},l=function(e){return a(e)?(d(e),void u(e)):!1};return n.subscribe("lpBadgesUnreadServer",c),n.subscribe("lpBadgesRead",l),{getMainModel:function(){return o}}}}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))},function(e,t,n){var o;(function(e){o=function(require,e,t){"use strict";t.name="ui-lp-badges";var o=n(1),r=n(2),a=[r.name];t.exports=o.createModule(t.name,a).directive(n(7))}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))}).call(t,n(6)(e))},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){var o;o=function(require,e){"use strict";var t=window.gadgets;e.lpBadges=function(e,n,o){return e.put("$badgesTemplate.html",'<span ng-show="model.unreadItems" class="badge lp-badges" ng-class="{'+"'lp-badges-alert': model.theme === 'alert','lp-badges-info': model.theme === 'info','lp-badges-success': model.theme === 'success'}\">{{ model.unreadItems }}</span>"),{restrict:"A",scope:{type:"@lpBadges",position:"@",theme:"@"},template:e.get("$badgesTemplate.html"),controller:function(e){e.model={},e.model.unreadItems=0,e.model.position=e.position||"right-top",e.model.theme=e.theme||"alert"},link:function(e,r){t.pubsub.subscribe("lpBadgesUnread."+e.type,function(t){n(function(){var n=e.model.unreadItems;e.model.unreadItems=t,n!==e.model.unreadItems&&o.position(r,e.model.position)},0)})}}},e.lpBadges.$inject=["$templateCache","$timeout","badgesUtils","lpBadgesResource","lpBadgesController"]}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))}])});