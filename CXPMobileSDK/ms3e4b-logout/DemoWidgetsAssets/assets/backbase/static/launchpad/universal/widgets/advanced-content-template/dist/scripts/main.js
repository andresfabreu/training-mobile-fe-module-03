!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?exports["widget.advanced-content-template"]=t(require("jquery")):e["widget.advanced-content-template"]=t(e.jquery)}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var o;(function(e){o=function(require,e,t){"use strict";function o(e){return e.find(".lp-background-image:first img").prop("src")}t.name="widget-advanced-content-template";var i=n(1),r=n(2),a=window.lp&&window.lp.util||{},d=function(e){var t="[contenteditable=false]:not(img)",n=function(){var e,t,n=window.CKEDITOR;if(n&&n.instances)for(e in n.instances)if(t=n.instances[e],this===t.element.$)return t.destroy(),i(this).attr("contenteditable",!0),void n.inline(this)};i(e.body).off(".lp-ice").on("focus.lp-ice",t,function(){i(e.body).find(t).each(n)}).find(t).each(n)},c=function(e){var t=new i.Deferred;if(be.ice&&bd&&"true"===bd.designMode){e.iceConfig=i.extend(!0,{},be.ice.config),e.iceConfig.events.push("lp-drag");var n=top&&top.bd&&top.bd.PageMgmtTree&&top.bd.PageMgmtTree.selectedLink&&top.bd.PageMgmtTree.selectedLink.isMasterPage,o=n||"true"===e.model.manageable||""===e.model.manageable||void 0===e.model.manageable;if(o&&be.ice.controller){var r=String(e.getPreference("templateUrl")),a=function(){return be.ice.controller.edit(e,r).then(function(t){return i(e.body).find(".bp-g-include").html(t),d(e),t})};return a()}}else i('img[src=""], img:not([src])',e.body).addClass("be-ice-hide-image"),t.resolve();return t.promise()},s=function(e){this.widget=e,this.$widget=i(e.body)};s.prototype.init=function(){c(this.widget);var e="lp-icon-caret-up",t="lp-icon-caret-down",n=i(".lp-faq-content",this.$widget),o=i(".lp-accordion-toggle-class");i(".lp-faq-title",this.$widget).click(function(){var r=i(this),a=r.hasClass("collapsed");a?(o.removeClass(t).addClass(e),n.slideDown(300)):(o.removeClass(e).addClass(t),n.slideUp(300)),r.toggleClass("collapsed",!a)})};var l=function(e){var t=this;t.widget=e,e.updateBackground=function(){t.setBackground()},t.$widget=i(e.body)};l.prototype.init=function(){var e=this;c(e.widget).then(function(){if(e.DraggableICEBehavior=new r(e.widget,{}),e.DraggableICEBehavior.init(bd.designMode),e.setHeight(),e.$widget.is(":visible")&&e.setBackground(),e.widget.model.addEventListener("PrefModified",function(t){"ImageOne"===t.attrName&&(e.setHeight(),e.setBackground())}),i(e.widget.htmlNode).on("launchpad:show",function(){e.setBackground()}),bd.designMode){for(var t,n=e.widget;n.parentNode;){if(n=n.parentNode,"TCont"===n.nodeName){var a=n;break}t=n}a&&i(a.htmlNode).find(".bp-tContFn-tab").on("click",function(n){var r=a.childNodes.indexOf(t),d=i(n.currentTarget).index();d=(d+1)%a.childNodes.length,r===d&&o(i(t.htmlNode))===o(e.$widget)&&e.setBackground()})}})},l.prototype.setHeight=function(){var e=this.widget.getPreference("height");e&&this.$widget.height(e)},l.prototype.setBackground=function(){d(this.widget);var e=o(this.$widget);if(e&&-1===e.indexOf("blank.gif")){var t=this.widget.getPreference("setPageBackground");t?a.setPageBackground(e):this.$widget.css({"background-image":"url("+e+")","background-repeat":"no-repeat","background-size":"100% 100%"})}};var f=function(e){this.widget=e};f.prototype.init=function(){var e,t=/content\/accordion/.test(this.widget.model.getPreference("templateUrl"));return e=t?new s(this.widget):new l(this.widget),e.init(),e},t.exports=function(e){var t=new f(e);return t.init()}}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))}).call(t,n(3)(e))},function(t){t.exports=e},function(e,t,n){var o;o=function(require,e,t){"use strict";var o,i=n(1),r=function(e,t){var n,o,r=i.extend({draggableAreaSelector:".lp-content-text-area",containersSelector:".lp-promo-slide",grippyContents:"Drag",draggableClass:"draggable",preferenceName:"content-position",defaultCoordinates:{top:"50px",left:"50px"}},t),a=i(e.body),d="lp-grippy",c=400,s=!0,l=function(e,t,n){n=i.extend({onStop:function(){},prevent:!0},n);var o,d=function(){e.removeClass(r.draggableClass),e.parents().unbind("mousemove",o),i(document).unbind("mouseup",d),n.onStop(e)};t.on("mousedown",function(t){n.prevent&&(t.preventDefault(),t.stopPropagation()),e.addClass(r.draggableClass);var c=e.outerHeight(),s=e.outerWidth(),l=e.offset().top+c-t.pageY,f=e.offset().left+s-t.pageX;o=function(t){var n=t.pageY+l-c,o=t.pageX+f-s,i=a.offset().top,r=i+a.outerHeight(),d=a.offset().left,u=d+a.outerWidth();i>n||n>r-20||d>o||o>u-20||e.offset({top:n,left:o})},e.parents().on("mousemove",o),i(document).on("mouseup",d)})},f=function(t,n){o[t]={top:n.css("top"),left:n.css("left")},e.setPreference(r.preferenceName,JSON.stringify(o)),e.model.save()},u=function(e){var t=i("<div/>").text(r.grippyContents).addClass(d).appendTo(e);t.hover(function(){t.data("is:hover",!0)},function(){t.data("is:hover",!1)}),e.hover(function(){t.show(),t.data("timeout")&&clearTimeout(t.data("timeout"))},function(){var e=setTimeout(function(){t.data("is:hover")||t.hide()},500);t.data("timeout",e)}),l(e,t,{onStop:function(e){f(e.attr("id"),e)}})},p=function(){n=i(r.containersSelector,a),n.each(function(e,t){var n=i(t).find(r.draggableAreaSelector);s&&u(n),"absolute"!==n.css("position")&&n.css("position","absolute")})},g=function(){var e=n.find(r.draggableAreaSelector),t=o[n.attr("id")];"undefined"!==t&&t||(t={top:r.defaultCoordinates.top,left:r.defaultCoordinates.left}),e.css({top:t.top,left:t.left}),e.animate({opacity:1},c)},v=function(t){s=!!t,p();try{o=JSON.parse(e.getPreference(r.preferenceName))}catch(n){o=r.defaultCoordinates}g()},h=function(e){e=i(e),e.find("."+d).remove(),e.find(r.draggableAreaSelector).css({top:"",left:"",opacity:""})};return{init:v,cleanup:h}},a=be.ice&&be.ice&&be.ice.events;return a&&(a.registerEventListener("lp-drag",function(e,t){o=new r(t,{}),o.init(bd.designMode)}),a.registerEventCleaner("lp-drag",function(e){o.cleanup(e)})),t.exports=r,r}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}])});