!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("base"),require("core")):"function"==typeof define&&define.amd?define(["base","core"],t):"object"==typeof exports?exports["module-users"]=t(require("base"),require("core")):e["module-users"]=t(e.base,e.core)}(this,function(e,t){return function(e){function t(o){if(r[o])return r[o].exports;var n=r[o]={exports:{},id:o,loaded:!1};return e[o].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){var o;(function(e){o=function(require,e,t){"use strict";t.name="module-user";var o=r(2),n=r(3),i=r(4),a=[n.name,i.name];t.exports=o.createModule(t.name,a).provider(r(6)).factory(r(7)).factory(r(8)).directive(r(9))}.call(t,r,t,e),!(void 0!==o&&(e.exports=o))}).call(t,r(1)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t,r){var o;(function(e){o=function(require,e,t){"use strict";t.name="component.user-reset-password";var o=r(2),n=r(3),i=[n.name];t.exports=o.createModule(t.name,i).directive(r(5))}.call(t,r,t,e),!(void 0!==o&&(e.exports=o))}).call(t,r(1)(e))},function(e,t,r){var o;o=function(require,e,t){"use strict";e.lpResetPasswordLink=function(e){function t(t,r,o){var n=e(o.ngClick||"");t.fireOnClick=function(e){e.preventDefault(),e.stopPropagation(),n(t,{$event:e})}}function r(){return t}var o=['<a href="#" ng-click="fireOnClick($event)">','<small lp-i18n="Having trouble accessing your account?"></small>',"</a>"].join("");return{restricted:"A",template:o,compile:r}},e.lpResetPasswordLink.$inject=["$parse"]}.call(t,r,t,e),!(void 0!==o&&(e.exports=o))},function(e,t,r){var o;o=function(require,e,t){"use strict";var r=window,o={MISSING_USERNAME:"Please fill in your username",MISSING_PASSWORD:"Please fill in your password",MISSING_OTP:"You must provide otp code",CANNOT_AUTHENTICATE:"Sorry, we could not authenticate you with these credentials",MAX_ATTEMPTS_EXCEEDED:"Number of login attempts exceeded",ACCOUNT_BLOCKED:"Your account has been blocked",NOT_FOUND:"Resource not found",UNKNOWN_ERROR:"There was an error processing your request. Contact your administrator",DISCONNECTED:"Unable to connect. Please check your connection",FORBIDDEN:"Access has been denied due to security reasons",BAD_GATEWAY:"Bad gateway. Contact your administrator"},n={UNKNOWN_ERROR:"UNKNOWN_ERROR",NOT_FOUND:"NOT_FOUND",BAD_REQUEST:"BAD_REQUEST",CANNOT_AUTHENTICATE:"CANNOT_AUTHENTICATE",MAX_ATTEMPTS_EXCEEDED:"MAX_ATTEMPTS_EXCEEDED",DISCONNECTED:"DISCONNECTED",FORBIDDEN:"FORBIDDEN",BAD_GATEWAY:"BAD_GATEWAY"},i={INITIATED:"Initiated",VERIFIED:"Verified"};e.lpUsersAuthentication=function(e){var t={},a=function(t){return!(e.isString(t)&&e.trim(t).length)},s=function(t){if(!e.isObject(t))throw new Error("Argument `options` should be an object instead "+typeof t)},c=function(r){return function(o){e.extend(t,o.session),r.resolve(o)}},l={code:n.UNKNOWN_ERROR,message:o[n.UNKNOWN_ERROR]},u=function(e){var t,r,o=e.errors;return o&&o.length&&(t=o[0].code,t!==n.UNKNOWN_ERROR&&(r=o[0].message)),{code:t||l.code,message:r||l.message}},d=function(e){return function(t,r){var i;switch(r){case 0:i={code:n.DISCONNECTED,message:o[n.DISCONNECTED]};break;case 400:i={code:n.BAD_REQUEST,message:t.message};break;case 401:i={code:n.CANNOT_AUTHENTICATE,message:o[n.CANNOT_AUTHENTICATE]};break;case 403:i={code:n.FORBIDDEN,message:o[n.FORBIDDEN]};break;case 404:i={code:n.NOT_FOUND,message:o[n.NOT_FOUND]};break;case 502:i={code:n.BAD_GATEWAY,message:o[n.BAD_GATEWAY]};break;default:i=u(t)}e.reject(i)}},p={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"};this.$get=function(l,f,g,A){var R={ERROR_CODE:n},m={initiateEndPoint:"",otpEndPoint:"",serverRootPath:"",portalName:"",pageName:"",reloadOnSuccess:!0};return R.getConfig=function(){return m},R.setConfig=function(t){return m=e(t).chain().mapValues(e.resolvePortalPlaceholders).defaults(m).value(),this},e.forEach(i,function(r){R["is"+e.capitalize(r)]=function(){return t.status&&t.status.toLowerCase()===r.toLowerCase()}}),R.initiate=function(t){var r,n=f.defer();return s(t),a(t.username)?r=o.MISSING_USERNAME:a(t.password)&&(r=o.MISSING_PASSWORD),r?n.reject(new Error(r)):l({method:"POST",url:m.initiateEndPoint,data:e.buildQueryString(t),headers:p}).success(c(n)).error(d(n)),n.promise},R.securityCheck=function(){var r=f.defer(),o={j_username:t.username,j_password:t.id,portal_name:m.portalName,page_name:m.pageName};return l({method:"POST",url:m.serverRootPath+"/j_spring_security_check?rd="+(new Date).getTime(),data:e.buildQueryString(o),headers:p}).success(c(r)).error(d(r)),r.promise},R.verifyOTP=function(r){var n=f.defer();return s(r),a(r.otpCode)?n.reject(new Error(o.MISSING_OTP)):l({method:"POST",url:m.otpEndPoint.replace("{id}",t.id),data:e.buildQueryString({otp_code:r.otpCode}),headers:p}).success(c(n)).error(d(n)),n.promise},R.handleVerifiedResponse=function(t){var r=e.getPortalProperty("defaultLandingPage");if(0===g.location.protocol.indexOf("file:")&&(t.successView=null,r=null),e.isString(r))return"/"!==r.charAt(0)&&(r="/"+r),void g.location.replace(m.serverRootPath+r);if(e.isString(t.successView))g.location.replace(m.serverRootPath+t.successView);else{var o;o=0===g.location.protocol.indexOf("file:")?g.location.pathname.split("//")[0]+g.location.search+g.location.hash:g.location.href,m.reloadOnSuccess&&g.location.replace(o)}},R.logOut=function(){var e=A.root+"/j_spring_security_logout?portalName="+A.name,t=A.root+r.b$.portal.config.defaultLandingPage;return g.sessionStorage.clear(),l({method:"POST",url:e,headers:p}).then(function(e){var r=parseInt(e.status,10);if(!(r>=200&&300>r||304===r))throw new Error(u(e).message);g.location.replace(t)})},R.MOCKABLE={session:t},R},this.$get.$inject=["$http","$q","$window","lpPortal"]},e.lpUsersAuthentication.$inject=["lpCoreUtils"]}.call(t,r,t,e),!(void 0!==o&&(e.exports=o))},function(e,t,r){var o;o=function(require,e,t){"use strict";e.lpDefaultProfileImage=function(e){var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABPCAIAAADz89W0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3MkVFRDI3OTJERUQxMUUzQkU4Qzk1MDlEQzAyMjFFNCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3MkVFRDI3QTJERUQxMUUzQkU4Qzk1MDlEQzAyMjFFNCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjcyRUVEMjc3MkRFRDExRTNCRThDOTUwOURDMDIyMUU0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjcyRUVEMjc4MkRFRDExRTNCRThDOTUwOURDMDIyMUU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+gildPAAABRdJREFUeNrsmstKI0EUhicmRmO8IoKIgigoCoovIOhOX8m38RncuHWjG0HFjeAl4GWhoAvvUZPMZ/6ZQ9OtmUBa04OnFk2luqo9X51LnVMzqZWVlV8/qbX8+mHNgR3YgR3YgR3YgR3YgR3YgR3YgR3YgR3YgR3YgR3YgR34O1umkcWVSiX4M5VK2Yj6PDUt9Co6GPxI6MvB+U0GDlL9MZiWluBe6KkJ9iqI8RmDjVeq7cO/1TQN8wTm9fX16ekpn88/Pj5ms1kky+VyLy8vdMrlMoOtra100um0MWgLghj0mfD29mav+JnJZJKiYWuA9fb2jo2NiRYwhL64uIBf0k9NTTFHWyMY5kRtVX0msIqfPK+vr0ulUnRrmgyMHF1dXQsLCz09PYChlpubm7W1tbu7O2SFbXx8fGZmxpiZDwzToobKTwhZgmKfn5/Pz883NjaKxaJMo3FR0/Pz841/Ba0iGSSDg4MPDw/Ih27b29uPj495hbUXCoWRkRGELlYb5MDAzCv6etJ4xaD2BWzGh4aGmHl5eVnD4b8PWPpBFbK6q6ur0dFRlCxzbWtrw6sZ7OjoQNXIPTs7y2ScOVttTGCVvFTN+lI7P/kyP9k4vhkLc6NBCwmQiT76RLdbW1vLy8tyP8inp6dPT09RFHi49Pb29sDAgMyVJ+N0YI6eW6yFljkMEvyYw19pftCSQ0osheWTk5OjoyNCFLolgGHGc3Nzm5ubnZ2dbMf6+jquzvj7H85kbLOCja+xO4uLi2wWO4I5yMJjceBGMy3bcsRCOBnhzs7O/f09CmcvwJ6cnAQbWgi7u7vhyVcbVIxg1cxkOX1G6LM1eDLBWX4hS47LgWMAthiLuKgCJEx3b2+PETk2KsV1IZS7QmgeyxL5M5y5apO1M5lpds4rqicrtUS94gESZoAnJib6+/sBYBcI3ZiojqtQvik1auNub2+xDu2j3CRGS47fhzVCrEJRGCR+u7S0pIAE5/DwsDpRYEuniOe7u7vsnbKO1N8WL3MMufT74VZNIVAvHY4f/JDgjEoVYC0g84x+oVRt5WpjrX3zizTcaHloSlBKaJkjZ698WOoy3do0dfTKEmw6+DNPTbCWFA2HVC0DVpOtKsYyfnBwsL+/T4gyk+aVlC8kebuKEL1VREhWPRws8aIVrD15RWp9dnYGQyhpEZvgdUQpb5MXVAItKUHLXM4MW/KZKeotZ4/O3mipYGvVOITxZKUllmNGLxuar+HQ1QT6URqsA5noRVIZugOIOoX8glWazEdk2DF6ciZ2J7E8RC4qbPItKkTxh6wjeDeiJcQ50hVLM1G4YkGC6uEQsIWcYMWD6HaVESo8dKppnBGcWaFLsZrz2WJbEjUsEqvvTWl20RHKW2zQtsBuCKiZqCsPDw/tbiiJGpboxFskNjyJa5VgjSs73RCpzKbuJ9ksFApkMhYLkwgMGInx6uoqRZKUo6u5f2rJ/FlVhOqwvr6+GAumr9Kwkko0U7+UZtLsi2KVQoDcwbKUJPqwLiikIrmxyil5bG0N6zKEQlpHsZRsdwzJ1TAiIqhiDzmj7qssONVYq9ybtVKsrUpWLh2NQBDKaaVnRFc9XOdyqVp3l1aZJNSkLdlUTLYiIXjY1nm1EDx77QxL6DkcyoHr+QexaGYe7SRUw9EEu55z5bOFH36qaRcA/11zYAd2YAd2YAd2YAd2YAd2YAd2YAd24B/QMrH/J4qkA8f7Pyhcw+7DzW6/BRgAykJQPtOgddIAAAAASUVORK5CYII=",r=function(e){var t="";e=e.split(" ");for(var r=0;r<e.length;r++)t+=e[r].substr(0,1);return t=t.toUpperCase()},o=function(e){var t=e.charCodeAt(0)-64,r=t+120,o=Math.floor((t-1)/25*4+1-1),n=[[r,210,210],[r,r,210],[210,r,r],[r,210,r],[210,r,210]];return n[o]};return function(n,i,a,s){if(!arguments.length)return t;var c=document.createElement("canvas");if(!c.getContext||!c.getContext("2d"))return t;var l=r(n);s=s||o(l),c.setAttribute("width",i),c.setAttribute("height",a);var u=c.getContext("2d");u.fillStyle=e.isArray(s)?"rgb("+s.join(",")+")":s,u.fillRect(0,0,i,a),u.fillStyle="rgb(250,250,250)";var d;switch(l.length){case 1:d=.6;break;case 2:d=.5;break;case 3:d=.45;break;default:d=.3}var p=parseInt(d*a,10),f=Math.floor(.15*a);return u.font=p+"px Proxima Regular, Helvetica Nueue, Helvetica, Arial, sans-serif",u.textAlign="right",u.fillText(l,i-3,a-f),c.toDataURL("image/png")}},e.lpDefaultProfileImage.$inject=["lpCoreUtils"]}.call(t,r,t,e),!(void 0!==o&&(e.exports=o))},function(e,t,r){var o;o=function(require,e,t){"use strict";e.lpUserDetails=function(e,t,r){function o(e){var o=[];return t.each(e,function(e,t){o.push({key:r.instant(t),value:"dateOfBirth"===t?r.formatDate(e):r.instant(e)})}),o}function n(e){e.photoUrl=e.photoData||(e.PhotoUrl?decodeURIComponent(e.photoUrl):null),e.details=o(e.details);var t=e.activities;return t?t.lastLoggedIn=t.lastLoggedIn?r.formatDate(t.lastLoggedIn,"medium"):"":e.activities={lastLoggedIn:""},e}return{get:function(t){return e.get(t).then(function(e){return n(e.data)})}}},e.lpUserDetails.$inject=["$http","lpCoreUtils","lpCoreI18n"]}.call(t,r,t,e),!(void 0!==o&&(e.exports=o))},function(e,t,r){var o;o=function(require,e,t){"use strict";e.profileImage=function(e,t){return{restrict:"EA",replace:!0,template:'<img height="{{size}}" width="{{size}}" ng-src="{{dataUrl}}"" />',scope:{fullname:"@",color:"@",size:"="},link:function(e,r,o){var n=function(r,o){e.dataUrl=t(e.fullname,r,o,e.color)};e.$watch("size + fullname + color",function(){var t=e.size||100,r=e.size||100;n(t,r)})}}},e.profileImage.$inject=["lpCoreUtils","lpDefaultProfileImage"]}.call(t,r,t,e),!(void 0!==o&&(e.exports=o))}])});