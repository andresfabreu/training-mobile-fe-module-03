!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("base"),require("core"),require("ui")):"function"==typeof define&&define.amd?define(["base","core","ui"],e):"object"==typeof exports?exports["widget-saving-goals"]=e(require("base"),require("core"),require("ui")):t["widget-saving-goals"]=e(t.base,t.core,t.ui)}(this,function(t,e,n){return function(t){function e(a){if(n[a])return n[a].exports;var o=n[a]={exports:{},id:a,loaded:!1};return t[a].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var a;(function(t){a=function(require,t,e){"use strict";e.name="widgets-saving-goals";var a=n(1),o=n(2),i=n(3),r=[o.name,i.name];e.exports=a.createModule(e.name,r).factory(n(4)).controller(n(5)).directive(n(6))}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))}).call(e,n(7)(t))},function(e,n,a){e.exports=t},function(t,n,a){t.exports=e},function(t,e,a){t.exports=n},function(t,e,n){var a;a=function(require,t,e){"use strict";t.state=function(){return{view:"list",accountList:[],savingGoals:[],editorSavingGoal:{}}},t.SavingAccounts=function(t,e,n){var a=n.resolvePortalPlaceholders(e.getPreference("savingAccountsDataSrc"));return t(a,{})},t.SavingAccounts.$inject=["$resource","lpWidget","lpCoreUtils"],t.SavingGoal=function(t,e,n){var a=n.resolvePortalPlaceholders(e.getPreference("savingGoalsDataSrc")),o={"Content-Type":"application/json"};return t(a,{savingId:"@savingId"},{query:{method:"GET",isArray:!0},save:{method:"POST",headers:o},update:{method:"PUT",headers:o}})},t.SavingGoal.$inject=["$resource","lpWidget","lpCoreUtils"],t.SavingGoalService=function(t,e,n,a){var o=function(t){return{AHEAD_OF_PLAN:"success",ON_TRACK:"success",OVERDUE:"warning"}[t]},i=function(t){return t.saved=t.saved||0,t.type=o(t.status),t.percentageSaved=Math.round(100*t.saved/t.amount),t.targetDate=Date.parse(t.targetDate),t};return{getAll:function(){var e=t.defer();return n.query({},function(t){var n=a.transform(t,function(t,e){t.push(i(e))});e.resolve(n)},function(t){e.reject("Could not load saving goals")}),e.promise},create:function(e){var o=t.defer(),r=new n(e);return a.assign(r,{targetDate:r.targetDate.toISOString()}),r.$save(function(t){a.assign(r,{id:t.id}),o.resolve(i(r))},function(t){o.reject("Could not create Saving Goal")}),o.promise},update:function(e){var a=t.defer();return n.update({savingId:e.id},e,function(t){a.resolve(e)}),a.promise},remove:function(e){var a=t.defer();return n.remove({savingId:e},function(t){a.resolve(!0)}),a.promise}}},t.SavingGoalService.$inject=["$q","$timeout","SavingGoal","lpCoreUtils"]}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;a=function(require,t,e){"use strict";function a(){var t=["car","college","computer","house","payoffloan","pension","phone","rainyday","trip"];return r.transform(t,function(t,e){t[e]="icon-icons-goals_"+e},{})}function o(t,e){var n=new Date(t),a=(new Date).setMonth(n.getMonth()+e);return new Date(a)}var i=n(1),r=i.utils,s=i.ng;t.SavingGoalAppCtrl=function(t,e,n,a){var o=this,i=a.getWidgetBaseUrl(t)+"/partials";o.state=e,n.query(function(t){o.state.accountList=t}),o.templates={editor:i+"/savingGoalEditor.html",list:i+"/savingGoalList.html"}},t.SavingGoalAppCtrl.$inject=["lpWidget","state","SavingAccounts","lpCoreUtils"],t.SavingGoalListCtrl=function(t,e){var n=this;n.state=t,n.iconMap=a(),n.fetchSavingGoalList=function(){n.loading=!0,n.error=!1,e.getAll().then(function(t){n.state.savingGoals=n.state.savingGoals.concat(t),n.loading=!1},function(t){n.loading=!1,n.error=!0})},n.fetchSavingGoalList(),n.addSavingGoal=function(){window.scroll(0,0),n.state.view="editor:create",n.state.editorSavingGoal={}},n.updateSavingGoal=function(t){n.state.view="editor:update",n.state.editorSavingGoal=t}},t.SavingGoalListCtrl.$inject=["state","SavingGoalService"],t.SavingGoalEditorCtrl=function(t,e,n,i){var c=this;c.state=e,c.loading=!1,c.iconMap=a(),c.showAccountSelect=n.getPreference("showAccountSelect");var l=parseInt(n.getPreference("minMonths"),10)||1,u=o(new Date,l);c.showTargetDateCalendar=!1,t.$watch(function(){return c.state.editorSavingGoal},function(t,e){c.savingGoal=s.copy(t),"editor:create"===c.state.view?(c.minTargetDate=u,c.savingGoal.targetDate=c.minTargetDate):(c.savingGoal.targetDate=new Date(c.savingGoal.targetDate),c.minTargetDate=c.savingGoal.targetDate)}),c.create=function(e){return t.goalForm.title.$setValidity("duplicate",!r.isObject(r.find(c.state.savingGoals,function(t){return t.title===e.title}))),t.goalForm.$invalid?void t.goalForm.$setDirty():(c.loading=!0,void i.create(e).then(function(t){c.loading=!1,c.state.savingGoals.push(t),c.state.view="list"},function(t){c.loading=!1}))},c.update=function(e){i.update(e).then(function(t){s.copy(c.savingGoal,c.state.editorSavingGoal)}),t.goalForm.$setPristine(),c.state.view="list"},c.remove=function(e){i.remove(e).then(function(){c.state.savingGoals=r.without(c.state.savingGoals,c.state.editorSavingGoal),c.state.view="list"}),t.goalForm.$setPristine()},c.cancel=function(){t.goalForm.$setPristine(),c.state.view="list"},c.openCalendar=function(t){t.preventDefault(),t.stopPropagation(),c.showTargetDateCalendar=!0}},t.SavingGoalEditorCtrl.$inject=["$scope","state","lpWidget","SavingGoalService"]}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;a=function(require,t,e){"use strict";t.iconSelect=function(t,e){var n=e.getWidgetBaseUrl(t)+"/partials";return{scope:{icons:"=",ngModel:"="},restrict:"EA",templateUrl:n+"/iconSelect.html",replace:!0,link:function(t,e,n){t.selectIcon=function(e){t.ngModel=e}}}},t.iconSelect.$inject=["lpWidget","lpCoreUtils"]}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}])});