!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("base"),require("core"),require("module-tags"),require("module-charts"),require("hammerjs"),require("ui"),require("module-contacts"),require("d3")):"function"==typeof define&&define.amd?define(["base","core","module-tags","module-charts","hammerjs","ui","module-contacts","d3"],e):"object"==typeof exports?exports["module-transactions"]=e(require("base"),require("core"),require("module-tags"),require("module-charts"),require("hammerjs"),require("ui"),require("module-contacts"),require("d3")):t["module-transactions"]=e(t.base,t.core,t["module-tags"],t["module-charts"],t.hammerjs,t.ui,t["module-contacts"],t.d3)}(this,function(t,e,n,a,r,o,i,s){return function(t){function e(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return t[a].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){n(2),t.exports=n(6)},,function(t,e,n){var a=n(3);"string"==typeof a&&(a=[[t.id,a,""]]);n(5)(a,{});a.locals&&(t.exports=a.locals)},function(t,e,n){e=t.exports=n(4)(),e.push([t.id,'.lp-transactions-list-authorizations .lp-auth-header {\n  padding-left: 15px;\n  cursor: pointer;\n  font-size: 1.3em;\n}\n.lp-transactions-list-authorizations .centered div {\n  line-height: 1.5;\n}\n@media (max-width: 1199px) {\n  .lp-transactions-list-authorizations .lp-auth-header {\n    font-size: 1.2em;\n  }\n}\n@media (max-width: 991px) {\n  .lp-transactions-list-authorizations .lp-auth-header {\n    font-size: 1.2em;\n  }\n}\n@media (max-width: 767px) {\n  .lp-transactions-list-authorizations .lp-auth-header {\n    font-size: 1.1em;\n  }\n}\n/**\n * Component Transactions Charts\n */\n.lp-chart-balances,\n.lp-chart-turnovers {\n  height: 260px;\n}\n.chart-progress-indicator .panel {\n  border: 0;\n}\n.chart-empty-data {\n  text-align: center;\n  padding: 80px 0;\n}\n/**\n * Component Transactions Search\n */\n.lp-search-right {\n  border-left: 1px solid #DEDEDE;\n}\n.lp-search-right .input-group-btn {\n  width: 170px;\n}\n.lp-search-right .input-group-btn > button > span {\n  font-size: 0.857em;\n  width: 100%;\n  display: inline-block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1em;\n}\n.lp-search-right .input-group-btn > button > span:before {\n  font-family: \'Backbase-Neue\';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  content: "\\E603";\n  position: absolute;\n  right: 5px;\n}\n.lp-search-right .input-group-btn.open > button > span:before {\n  content: "\\E604";\n}\n.lp-search-right .dropdown-toggle i {\n  display: none;\n}\n.lp-search-right .dropdown .dropdown-menu {\n  margin-top: 4px;\n  right: 0;\n  border: 1px solid #ddd;\n}\n.lp-search-right .dropdown .dropdown-menu > li:first-child {\n  border-top: none;\n}\n.lp-search-right .dropdown .dropdown-menu > li:first-child > a {\n  border-top-right-radius: 4px;\n  border-top-left-radius: 4px;\n}\n.lp-search-right .dropdown .dropdown-menu > li:last-child > a {\n  border-bottom-right-radius: 4px;\n  border-bottom-left-radius: 4px;\n}\n.lp-search-right .dropdown .dropdown-menu > li > a {\n  padding: 20px;\n}\n.lp-search-right .dropdown .dropdown-menu > li > a i {\n  font-size: 1.2em;\n}\n.lp-search-right .dropdown .dropdown-menu > li > a .option-label {\n  font-size: 1em;\n  padding: 0 36px 0 18px;\n}\n.lp-search-right .dropdown .dropdown-menu > li > a > span > i.lp-icon-checkmark_fat {\n  visibility: hidden;\n  position: absolute;\n  top: 22px;\n  right: 20px;\n}\n.lp-search-right .dropdown .dropdown-menu > li > a > span > i.option-icon {\n  color: #337ab7;\n}\n.lp-search-right .dropdown .dropdown-menu > li.active > a > span > i.lp-icon-checkmark_fat {\n  visibility: visible;\n}\n.lp-search-right .dropdown .dropdown-menu > li.active > a > span > i.option-icon {\n  color: currentColor;\n}\n/**\n * Component Transactions List\n */\n.transaction-details .tab-content {\n  background-color: transparent !important;\n  padding: 0 19px 14px 19px !important;\n}\n.transaction-details .tab-content .lp-category-select {\n  margin-top: 14px;\n}\n.transaction-details .tab-content .lp-transaction-details .progress-indicator {\n  border: 0 none;\n}\n.transaction-details .tab-content .lp-transaction-details .row > div {\n  margin-top: 14px;\n  text-align: left;\n  padding-right: 10px;\n}\n.transaction-details .tab-content .lp-transaction-details .row > div .transaction-detail-label {\n  line-height: 1em;\n  margin-bottom: 10px;\n  font-weight: bold;\n}\n.transaction-details .tab-content .lp-transaction-details .row > div .transaction-detail-map {\n  width: 100%;\n  height: 90px;\n  max-width: 160px;\n}\n.transaction-details .tab-content .lp-transaction-details .row.transaction-detail-reference {\n  margin-top: 23px;\n}\n.transaction-details .tab-content .lp-transaction-details .row.transaction-detail-reference .transaction-detail-value {\n  white-space: nowrap;\n}\n.lp-transactions-list-category {\n  max-width: 150px;\n}\n.lp-transactions-list-category-noanim {\n  -webkit-transition: none !important;\n  transition: none !important;\n}\n.hide-xs .hidden-xs {\n  display: none;\n}\n',""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];t.push(n[2]?"@media "+n[2]+"{"+n[1]+"}":n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(a[o]=!0)}for(r=0;r<e.length;r++){var i=e[r];"number"==typeof i[0]&&a[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}},function(t,e,n){function a(t,e){for(var n=0;n<t.length;n++){var a=t[n],r=u[a.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](a.parts[o]);for(;o<a.parts.length;o++)r.parts.push(s(a.parts[o],e))}else{for(var i=[],o=0;o<a.parts.length;o++)i.push(s(a.parts[o],e));u[a.id]={id:a.id,refs:1,parts:i}}}}function r(t){for(var e=[],n={},a=0;a<t.length;a++){var r=t[a],o=r[0],i=r[1],s=r[2],c=r[3],l={css:i,media:s,sourceMap:c};n[o]?n[o].parts.push(l):e.push(n[o]={id:o,parts:[l]})}return e}function o(){var t=document.createElement("style"),e=h();return t.type="text/css",e.appendChild(t),t}function i(){var t=document.createElement("link"),e=h();return t.rel="stylesheet",e.appendChild(t),t}function s(t,e){var n,a,r;if(e.singleton){var s=v++;n=f||(f=o()),a=c.bind(null,n,s,!1),r=c.bind(null,n,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=i(),a=d.bind(null,n),r=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=o(),a=l.bind(null,n),r=function(){n.parentNode.removeChild(n)});return a(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;a(t=e)}else r()}}function c(t,e,n,a){var r=n?"":a.css;if(t.styleSheet)t.styleSheet.cssText=m(e,r);else{var o=document.createTextNode(r),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(o,i[e]):t.appendChild(o)}}function l(t,e){{var n=e.css,a=e.media;e.sourceMap}if(a&&t.setAttribute("media",a),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function d(t,e){var n=e.css,a=(e.media,e.sourceMap);a&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var r=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(r),o&&URL.revokeObjectURL(o)}var u={},p=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},g=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),h=p(function(){return document.head||document.getElementsByTagName("head")[0]}),f=null,v=0;t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=g());var n=r(t);return a(n,e),function(t){for(var o=[],i=0;i<n.length;i++){var s=n[i],c=u[s.id];c.refs--,o.push(c)}if(t){var l=r(t);a(l,e)}for(var i=0;i<o.length;i++){var c=o[i];if(0===c.refs){for(var d=0;d<c.parts.length;d++)c.parts[d]();delete u[c.id]}}}};var m=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){var a;(function(t){a=function(require,t,e){"use strict";e.name="module-transactions-3";var a=n(8),r=n(9),o=n(10),i=n(11),s=n(12),c=n(17),l=n(19),d=n(21),u=n(28),p=n(32),g=n(37),h=n(41),f=n(19),v=[r.name,o.name,i.name,s.name,c.name,l.name,d.name,u.name,p.name,g.name,h.name,f.name];e.exports=a.createModule(e.name,v).provider(n(46)).directive(n(47))}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))}).call(e,n(7)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e){t.exports=a},function(t,e,n){var a;(function(t){a=function(require,t,e){"use strict";e.name="component.transactions-categories";var a=n(8),r=n(9),o=[r.name];e.exports=a.createModule(e.name,o).provider(n(13)).directive(n(14)).filter(n(16))}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))}).call(e,n(7)(t))},function(t,e,n){var a;a=function(require,t,e){"use strict";t.lpTransactionsCategory=function(t){var e={generic:"Generic error",badId:"The id must be a string"};this.$get=function(n,a,r){function o(){function a(){this.categories=[]}return a.prototype.getAll=function(){return n.get(i.endpoint).then(function(n){return t.isArray(n.data)?(this.categories=n.data,this.categories):void r.throwException(new Error(e.generic))}.bind(this),function(t,n,a,o){r.throwException(new Error(e.generic))})},a.prototype.getById=function(a){return t.isString(a)||r.throwException(new TypeError(e.badId)),n.get(i.endpoint+"/"+a).then(function(t){return t.data},function(t){r.throwException(new Error(e.generic))})},a.prototype.create=function(a){return t.isObject(a)&&a.name&&a.color||r.throwException(new Error("Bad category data: "+a)),n.post(i.endpoint,a).then(function(t){var e=t.data;return this.categories.push(e),e}.bind(this),function(t){r.throwException(new Error(e.generic))})},a.prototype.removeById=function(a){return t.isString(a)||r.throwException(new TypeError(e.badId)),n["delete"](i.endpoint+"/"+a).then(function(e){var n=t(this.categories).find({id:a});return this.categories.splice(t(this.categories).indexOf(n),1),n}.bind(this),function(t){r.throwException(new Error(e.generic))})},new a}var i={endpoint:""};return{setConfig:function(e){return i=t(e).chain().mapValues(t.resolvePortalPlaceholders).defaults(i).value(),this},api:o}},this.$get.$inject=["$http","$q","lpCoreError"]},t.lpTransactionsCategory.$inject=["lpCoreUtils"]}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;a=function(require,t,e){"use strict";function a(){var t,e,n=arguments[0]/255,a=arguments[1]/255,r=arguments[2]/255,o=Math.max(n,a,r),i=Math.min(n,a,r),s=(o+i)/2;if(o===i)t=e=0;else{var c=o-i;switch(e=s>.5?c/(2-o-i):c/(o+i),o){case n:t=(a-r)/c+(r>a?6:0);break;case a:t=(r-n)/c+2;break;case r:t=(n-a)/c+4}t/=6}return{h:Math.round(360*t),s:Math.round(100*e),l:Math.round(100*s)}}var r=n(15),o=window.jQuery;t.lpCategoryDisplay=function(t,e){return t.put("$categoryDisplay.html",'<div class="lp-transaction-category" ng-click="onClick($event, transaction)"><span class="category-marker" ng-style="markerStyle"></span><div class="category-name"><span class="h4">{{category.name}}</span></div></div>'),{restrict:"A",replace:!0,require:"ngModel",scope:{isCategoryView:"=lpCategoryView",categoryList:"=lpCategoryList",transaction:"=ngModel",categoryClick:"&",categorySwipe:"&",categoryStartSwipe:"&",categoryEndSwipe:"&"},template:t.get("$categoryDisplay.html"),link:function(t,n,a){var o=n.parent().parent(),i=0;t.markerStyle={},t.category=null,t.onClick=function(e,n){t.categoryClick({$event:e,transaction:t.transaction})};var s={},c=o.data("touch"),l=function(e){e.srcEvent.stopPropagation(),e.preventDefault(),n.parent().addClass("no-animation");var a=i+Math.floor(e.deltaX);a>160&&(a=160),a>i&&n.parent().css("width",a+"px"),t.categorySwipe({$event:e,transaction:t.transaction})},d=function(e){e.srcEvent.stopPropagation(),e.preventDefault(),i=parseInt(n.css("width"),10),t.categoryStartSwipe({$event:e,transaction:t.transaction})},u=function(e){e.srcEvent.stopPropagation(),e.preventDefault(),n.parent().removeClass("no-animation");var a=i+Math.floor(e.deltaX);a>160&&(a=160),a>150&&t.categoryClick({$event:null,transaction:t.transaction}),n.parent().css("width",""),t.categoryEndSwipe({event:e,transaction:t.transaction})};t.isCategoryView||"undefined"==typeof r||(c||(c=new r(o[0]),o.data("touch",c)),s.panright=c.on("panright",l),s.panstart=c.on("panstart",d),s.panend=c.on("panend",u)),t.$on("$destroy",function(){Object.keys(s).forEach(function(t){var e=s[t];e.off(t,e.handlers[t][0])})}),t.$watch("transaction.categoryId",function(e){t.setCategory(e)}),t.setCategory=function(e){if(t.categoryList)for(var n=0;n<t.categoryList.length;n++)t.categoryList[n].id===e&&(t.category=t.categoryList[n]);t.category&&e?t.markerStyle.backgroundColor=t.category.color:t.transaction.categoryId="00cc9919-ba0c-4702-917b-1fba4c256b4d"},e.subscribe("launchpad-retail.categoryDelete",function(e){e.id===t.transaction.categoryId&&t.setCategory()})}}},t.lpCategoryDisplay.$inject=["$templateCache","lpCoreBus"],t.lpCategoryItem=function(){return{restrict:"A",replace:!0,template:'<div class="category-item btn btn-block btn-default" tabIndex="{{category.id !== transaction.categoryId ? 0 : -1}}" ng-style="{\'background-color\': category.id === newCategoryId ? category.color : \'#ffffff\'}" ng-click="markNewCategory(category.id)" ng-keydown="categoryKeyDown($event, category)"><div class="marker" ng-style="{\'background-color\':category.color}"></div><span class="name" ng-class="{ light: (category.id === newCategoryId && getTextColor(category.color)) }">{{category.name}}</span><button type="button" class="close" aria-hidden="true" ng-click="deleteCategory($event, category)" ng-if="category.type ===\'NORMAL\'">&times;</button></div>'}},t.lpCategorySelect=function(t,e,n,r){return t.put("$categorySelect.html",'<div class="lp-category-select clearfix"><div class="clearfix"><label class="control-label pull-left" lp-i18n="Current Category:"></label><div ng-repeat="category in transactionCategories | orderBy:\'-priority\' | selectedCategory:this" class="col-xs-6 col-sm-4 col-md-4"><div lp-category-item="lp-category-item"></div></div></div><label class="control-label pull-left" lp-i18n="Change category to:"></label><form class="form category-search clearfix" role="form" ng-submit="createCategory()"><input type="text" ng-model="categoryFilter" class="form-control" placeholder="{{\'Search categories / Create category\'|translate}}" maxlength="40" ng-disabled="showColorPicker" /></form><div class="category-list col-xs-12 col-sm-12 col-md-9"><div class="new-category col-xs-12 col-sm-12 col-md-12" ng-if="!categoryExists() && !showColorPicker && categoryFilter.length > 0"><label class="control-label pull-left" lp-i18n="Create new category:"></label><div ng-repeat="category in newCategory" class="col-xs-6 col-sm-6 col-md-6"><div lp-category-item="lp-category-item"></div></div></div><ul class="category-list col-xs-12 col-sm-12 col-md-12"><li ng-repeat="category in transactionCategories | orderBy:\'-priority\' | categoryList:this" class="col-xs-6 col-sm-4 col-md-4" ng-show="!showColorPicker"><div lp-category-item="lp-category-item"></div></li><div id="{{\'transaction-\' + transaction.id + \'-category-step-2\'}}" class="clearfix" ng-if="showColorPicker"><label class="clearfix" lp-i18n="Choose a color for the new category:"></label><div lp-color-picker="lp-color-picker" select-color="selectColor"></div></div></ul></div><div id="{{\'transaction-\' + transaction.id + \'-category-step-3\'}}" class="col-xs-12 col-sm-12 col-md-3 category-apply" ng-if="(smallLayout && newCategoryId.length) || !smallLayout"><div class="row" ng-if="smallLayout"><div class="col-xs-12 col-sm-12 clearfix"><label class="control-label pull-left" lp-i18n="You\'ve selected:"></label><div ng-repeat="category in transactionCategories | orderBy:\'-priority\' | markedCategory:this" class="col-xs-7 col-sm-6 col-md-4"><div lp-category-item="lp-category-item"></div></div></div><div class="col-xs-12 col-sm-12 clearfix"><p lp-i18n="Would you like to change the category for only this transaction or all similar transactions?"></p></div></div><div class="row"><div class="col-sm-12 col-md-12" ng-if="!smallLayout"><p lp-i18n="Apply category change to?"></p></div><div class="col-xs-6 col-sm-6 col-md-12"><button type="button" class="btn btn-default btn-block" ng-click="changeCategory(newCategoryId)" ng-disabled="!newCategoryId.length" lp-i18n="Only This"></button></div><div class="col-xs-6 col-sm-6 col-md-12"><button type="button" class="btn btn-default btn-block" ng-click="changeCategory(newCategoryId, true)" ng-disabled="!newCategoryId.length" lp-i18n="All Similar"></button></div></div></div></div>'),{restrict:"A",replace:!1,require:"ngModel",scope:{model:"=ngModel",transaction:"=",update:"=",smallLayout:"=",offsetTopCorrection:"="},template:t.get("$categorySelect.html"),link:function(t,i,s){t.showColorPicker=!1,t.searchResultNumber=t.model.categories.length;var c=function(){t.transactionCategories=[];for(var e=0;e<t.model.categories.length;e++)t.transactionCategories.push(r.cloneDeep(t.model.categories[e]))};c();var l=function(n){t.smallLayout&&e(function(){o("body").animate({scrollTop:o("#transaction-"+t.transaction.id+(n>1?"-category-step-"+n:"")).offset().top-5-(t.offsetTopCorrection||0)},500)},0)},d=function(){e(function(){o(i).find('button[ng-click^="changeCategory"]')[0].focus()},0)};t.$watch("categoryFilter",function(e){t.newCategory=[{id:null,name:e,color:"#cccccc"}]}),t.categoryExists=function(){var e=!1;if(t.categoryFilter&&t.categoryFilter.length>0)for(var n=0;n<t.model.categories.length;n++)t.categoryFilter.toLowerCase()===t.model.categories[n].name.toLowerCase()&&(e=!0);return e},t.getTextColor=function(t){var e=!0,n=t.substr(1,2),r=t.substr(3,2),o=t.substr(5,2);return 4===t.length&&(n=t.substr(1,1)+t.substr(1,1),r=t.substr(2,1)+t.substr(2,1),o=t.substr(3,1)+t.substr(3,1)),n=parseInt(n,16),r=parseInt(r,16),o=parseInt(o,16),a(n,r,o).l>45&&(e=!1),e},t.newCategoryId="",t.markNewCategory=function(e){if(null===e)return void t.createCategory();if(t.transaction.categoryId!==e){if(t.newCategoryId===e)return void(t.newCategoryId="");t.newCategoryId=e,l(3),d()}},t.categoryKeyDown=function(e,n){if(13===e.which||32===e.which){if(e.preventDefault(),e.stopPropagation(),"button"===e.target.tagName.toLowerCase())return void t.deleteCategory(e,n);t.markNewCategory(n.id)}},t.createCategory=function(){var n=!t.categoryExists()&&t.categoryFilter.length>0;n?(t.showColorPicker=!0,l(2)):t.searchResultNumber&&e(function(){o(".category-list .category-item")[0].focus()},0)},t.selectColor=function(e){t.model.create({name:t.categoryFilter,color:e}).then(function(e){t.categoryFilter="",t.showColorPicker=!1,c(),t.markNewCategory(e.id),n.publish("launchpad-retail.categoryListUpdate",null,!0),l(3),d()},function(e){n.publish("launchpad.add-notification",{notification:{id:"category-create-duplicate",level:"SEVERE",message:e.data.error,closable:!0}},!0),t.categoryFilter="",t.showColorPicker=!1})},t.deleteCategory=function(e,a){e.stopPropagation(),"NORMAL"===a.type&&t.model.removeById(a.id).then(function(){t.newCategoryId===a.id&&(t.newCategoryId=""),c(),n.publish("launchpad-retail.categoryDelete",{id:a.id},!0),n.publish("launchpad-retail.categoryListUpdate",null,!0)})},t.changeCategory=function(n,a){t.newCategoryId="",t.categoryFilter="",t.update(t.transaction,n,a),e(function(){t.transaction.showDetails=!1},100),l(1),o("#transaction-"+t.transaction.id)[0].focus()},n.subscribe("launchpad-retail.categoryListUpdate",function(){c()})}}},t.lpCategorySelect.$inject=["$templateCache","$timeout","lpCoreBus","lpCoreUtils"]}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports=r},function(t,e,n){var a;a=function(require,t,e){"use strict";t.categoryList=function(){return function(t,e){var n=t;e.initialSelected||(e.initialSelected=e.transaction.categoryId);for(var a=0;a<n.length;a++)"TEMPORARY"!==n[a].type?(n[a].priority=1,"CONTROL"===n[a].type&&(n[a].priority=0),n[a].id===e.initialSelected&&(n[a].priority=2)):(n.splice(a,1),a--);for(a=0;a<n.length;a++)e.categoryFilter&&e.categoryFilter.length&&-1===n[a].name.toLowerCase().indexOf(e.categoryFilter.toLowerCase())?(n.splice(a,1),a--):n[a].id===e.transaction.categoryId&&(n.splice(a,1),a--);return e.searchResultNumber=n.length,n}},t.selectedCategory=function(){return function(t,e){for(var n=t,a=0;a<n.length;a++)n[a].id!==e.transaction.categoryId&&(n.splice(a,1),a--);return n}},t.markedCategory=function(){return function(t,e){for(var n=t,a=0;a<n.length;a++)n[a].id!==e.newCategoryId&&(n.splice(a,1),a--);return n}}}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;(function(t){a=function(require,t,e){"use strict";e.name="component.transactions-p2p";var a=n(8),r=n(9),o=[r.name];e.exports=a.createModule(e.name,o).provider(n(18))}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))}).call(e,n(7)(t))},function(t,e,n){var a;a=function(require,t,e){"use strict";t.lpP2PTransactions=function(t){this.$get=function(e,n){function a(){var a=function(){this.transactions=[],this.from=r.from,this.moreAvailable=!0,this.accountsArray=[],this.errorCode=null};return a.prototype.clearTransactionsList=function(){this.transactions=[],this.moreAvailable=!0,this.from=r.from},a.prototype.loadTransactions=function(t){return this.clearTransactionsList(),this.accountsArray=t,this.loadMoreTransactions()},a.prototype.loadTransactions=function(t){return this.clearTransactionsList(),this.accountsArray=t,this.loadMoreTransactions()},a.prototype.loadMoreTransactions=function(){var t=this,a=n.defer();this.loading=!0;var o={accountIds:this.accountsArray.join(","),offset:this.from,limit:r.pageSize};return e.get(r.transactionsEndpoint,{params:o}).success(function(e){t.from+=r.pageSize;var n=t.preprocessTransactions(e);n&&n.length<r.pageSize&&(t.moreAvailable=!1),t.transactions=t.transactions.concat(n),a.resolve(t.transactions)}).error(function(e){t.errorCode=e.errorCode||500})["finally"](function(){t.loading=!1}),a.promise},a.prototype.preprocessTransactions=function(e){var n=[];return e&&e.length>0&&(n=t.map(e,function(t,n){var a=new Date(t.initiationDateTime);if(t.showDate=!0,n>0){var r=new Date(e[n-1].initiationDateTime);t.showDate=r.getDate()!==a.getDate()||r.getMonth()!==a.getMonth()||r.getFullYear()!==a.getFullYear()}return t.requiresUserAction=!1,"CREDIT"===t.creditDebitIndicator&&"PENDING"===t.status&&(t.requiresUserAction=!0),t})),n},a.prototype.allowMoreResults=function(){return!this.loading&&this.moreAvailable&&!this.errorCode},a.prototype.noTransactionsFound=function(){return!this.loading&&0===this.transactions.length&&!this.errorCode},new a}var r={transactionsEndpoint:"/mock/v1/p2p-payments",pageSize:20,from:1};return{setConfig:function(e){return r=t(e).chain().mapValues(t.resolvePortalPlaceholders).defaults(r).value(),this},getConfig:function(e){return e&&t.isString(e)?r[e]:r},api:a}},this.$get.$inject=["$http","$q"]},t.lpP2PTransactions.$inject=["lpCoreUtils"]}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;(function(t){a=function(require,t,e){"use strict";e.name="component.transactions-currency";var a=n(8),r=n(9),o=[r.name];e.exports=a.createModule(e.name,o).provider(n(20))}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))}).call(e,n(7)(t))},function(t,e,n){var a;a=function(require,t,e){"use strict";t.lpTransactionsCurrency=function(t){this.$get=function(e,n){function a(){var a=function(){this.groups={defaultCurrency:"aDefault",preferredCurrencies:"bPreferred",rest:"cOther"},this.orderedCurrencies=[]};return a.prototype.loadDefaultCurrency=function(){var t=this,a=n.defer();return e.get(r.defaultCurrencyEndpoint).success(function(t){a.resolve(t)}).error(function(){t.error="currencyServiceError"}),a.promise},a.prototype.configureDefaultCurrency=function(t){var e={currency_code:t.currency_code,exchange_rate:1,group:this.groups.defaultCurrency};this.defaultCurrency=e,this.selected=this.defaultCurrency,this.orderedCurrencies.push(this.defaultCurrency)},a.prototype.loadOtherCurrencies=function(){var t=this,a=n.defer();return e.get(r.currencyListEndpoint,{params:{currency:this.defaultCurrency.currency_code}}).success(function(e){e&&t.sortCurrencies(e),a.resolve(e)}).error(function(){t.error="currencyServiceError"}),a.promise},a.prototype.sortCurrencies=function(t){for(var e=0;e<t.preferred.length;e++)t.preferred[e].group=this.groups.preferredCurrencies;if(this.orderedCurrencies.push.apply(this.orderedCurrencies,t.preferred),!r.disableExtraCurrencies){for(var n=0;n<t.rest.length;n++)t.rest[n].group=this.groups.rest;t.rest.sort(function(t,e){var n=t.currency_code.toLowerCase(),a=e.currency_code.toLowerCase();return a>n?-1:n>a?1:0}),this.orderedCurrencies.push.apply(this.orderedCurrencies,t.rest)}},a.prototype.findCurrency=function(e){return t.find(this.orderedCurrencies,function(t){return t.currency_code===e})},a.prototype.selectCurrency=function(t){this.selected=this.findCurrency(t)},new a}var r={defaultCurrencyEndpoint:"/mock/v1/currency-rates/default",currencyListEndpoint:"/mock/v1/currency-rates",disableExtraCurrencies:!1};return{setConfig:function(e){return r=t(e).chain().mapValues(t.resolvePortalPlaceholders).defaults(r).value(),this},getConfig:function(e){return e&&t.isString(e)?r[e]:r},api:a}},this.$get.$inject=["$http","$q"]},t.lpTransactionsCurrency.$inject=["lpCoreUtils"]}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;(function(t){a=function(require,t,e){"use strict";e.name="component.transactions-list";var a=n(8),r=n(22),o=n(10),i=[r.name,o.name];e.exports=a.createModule(e.name,i).directive(n(23)).directive(n(24))}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))}).call(e,n(7)(t))},function(t,e){t.exports=o},function(t,e,n){var a;a=function(require,t){"use strict";t.lpTransactionDetailsAddress=function(){var t=['<div class="transaction-detail-label" lp-i18n="Address:"></div>',"<div>",'<span ng-show="address.street">{{address.street}}</span><br/>','<span ng-show="address.city">{{address.city}}</span>','<span ng-show="address.state">, {{address.state}}</span><br/>','<span ng-show="address.country">{{address.country}}</span><br/>','<span ng-show="address.zip">{{address.zip}}</span>',"</div>"].join("");return{restrict:"AE",scope:{address:"=lpTransactionDetailsAddress"},template:t,link:function(t,e,n){}}},t.lpTransactionDetailsDatetime=function(){var t=['<div class="transaction-detail-label" lp-i18n="{{detailLabel || \'Time\'}}:"></div>',"<div>{{datetime|date:'shortTime'}}<br/>{{datetime|date:'longDate'}}</div>"].join("");return{restrict:"AE",scope:{detailLabel:"=",datetime:"=lpTransactionDetailsDatetime"},template:t,link:function(t,e,n){}}},t.lpTransactionDetailsMap=function(){var t=['<img ng-src="{{location.mapUrl}}" class="transaction-detail-map" alt="{{\'Location map\' | translate}}" />'].join("");return{restrict:"AE",scope:{location:"=lpTransactionDetailsMap"},template:t,link:function(t,e,n){}}},t.lpTransactionDetailsVertical=function(){var t=['<div class="transaction-detail-vertical">','<div class="transaction-detail-label" lp-i18n="{{detailLabel}}:"></div>','<span class="transaction-detail-value">{{detailValue}}</span>',"</div>"].join("");return{restrict:"AE",scope:{detailLabel:"=",detailValue:"="},template:t,link:function(t,e,n){}}},t.lpTransactionDetailsHorizontal=function(){var t=['<div class="transaction-detail-vertical">','<span class="transaction-detail-label" lp-i18n="{{detailLabel}}:"></span> ','<span class="transaction-detail-value">{{detailValue}}</span>',"</div>"].join("");return{restrict:"AE",scope:{detailLabel:"=",detailValue:"="},template:t,link:function(t,e,n){}}}}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;a=function(require,t){"use strict";function e(){var t=!1;try{Object.defineProperty({},"x",{})}catch(e){t=!0}return t}var a=window.jQuery;t.lpTransactionsList=function(t,r,o,i,s,c){function l(t){return a("#transaction-"+t.id).find(".lp-transactions-list-category")}function d(i,d,u){var g=e(),h=160,f=9;i.$watch("accounts.selected",function(t){t&&i.transactions.loadTransactions(t).then(function(){s.publish("widget-transactions:transactions:ready",i.transactions.transactions),i.showScrollbar&&p(d.find(".transactions-list-wrapper"))})}),i.$on("$destroy",function(){}),i.previewAll=!1,i.showCategoriesToggle=c.isUndefined(i.showCategoriesToggle)?!0:i.showCategoriesToggle,i.transactionKeydown=function(t,e){(13===t.which||32===t.which)&&(t.preventDefault(),t.stopPropagation(),i.loadTransactionDetails(e),i.openDetails(e))},i.loadTransactionDetails=function(t){t.isLoading=!0,i.transactions.loadTransactionDetails(t).then(function(e){t.categoryId&&i.transactionsCategories.getById(t.categoryId).then(function(t){e.category=t})})["finally"](function(){t.isLoading=!1})},i.loadMoreTransactions=function(){if(i.transactionsLoading=!0,!i.transactions.loading){var e=i.transactions.transactions.length;i.transactions.loadMoreTransactions().then(function(){setTimeout(function(){var n=a(t.body).find(".transactions-list-row").eq(e);n.focus()},100),i.transactionsLoading=!1})}},i.updateTransactionCategory=function(t,e,n){var a;a=n?i.transactions.updateSimilarTransactionCategory(t,e):i.transactions.updateTransactionCategory(t,e),a.success(function(){})},i.updateItemSize=function(t){var e=550;t.element.toggleClass("hide-xs",t.width<e)},i.openDetails=function(t,e){var s=d.find("#transaction-details-"+t.id);if(t.showDetails=!t.showDetails,!s.children().size()){var c=a(n(25));s.append(c),o(c)(s.scope())}var l=function(t,e){for(var n in t)t.hasOwnProperty(e)&&(t[n]=!1,n===e&&(t[n]=!0))};(null===e||void 0===e)&&(e="details"),t.showDetails&&r(function(){l(t.detailTabs,e)},0),"details"===e&&i.loadTransactionDetails(t),i.closePreview(t),i.categorySmallLayout&&t.showDetails&&a("body").animate({scrollTop:a("#transaction-"+t.id).offset().top-5-(i.offsetTopCorrection||0)},500);var u=document.getElementById("transactions-tabs");!i.showDetails&&u&&(u.style.display="none",u.style.display="block")},i.selectDetailsTab=function(t){i.loadTransactionDetails(t)},i.openPreview=function(t){t.preview=!0,t.showDetails||(g?a("#transaction-"+t.id+" .categories").width(h):a("#transaction-"+t.id).addClass("preview"))},i.closePreview=function(t){t.preview=!1,g?a("#transaction-"+t.id+" .categories").width(f):a("#transaction-"+t.id).removeClass("preview"),l(t).removeClass("lp-transactions-list-category-noanim").width("")},i.categoryClick=function(t,e){null!==t&&void 0!==t&&(t.preventDefault(),t.stopPropagation()),i.openDetails(e,"categories")},i.categorySwipeStart=function(t,e){l(e).addClass("lp-transactions-list-category-noanim")},i.categorySwipe=function(t,e){l(e).width(t.deltaX)},i.categorySwipeEnd=function(t,e){i.closePreview(e)};var v=function(t){return c.isString(t)?c.trim(t):c.isArray(t)&&!t.length?"":t||""};i.getTransactionDescription=function(t){var e=v(t.counterpartyName),n=v(t.transactionDescription),a=v(t.transactionType);return e||n||a},i.getTransactionSubDescription=function(t){var e=v(t.accountName),n=v(t.counterpartyName),a=v(t.transactionDescription),r=v(t.transactionType);return e?e:n||a?r:""},i.toggleCategoryView=function(){i.previewAll=!i.previewAll}}function u(t,e){return d}var p=function(t){r(function(){var e=t.length?t[0]:t,n=e.offsetHeight;n&&(e.style.height=n+"px",e.style.overflowY="auto")})};return{scope:{accounts:"=lpAccounts",transactions:"=lpTransactions",transactionsCategories:"=lpTransactionsCategories",categoryLayout:"=",showCategories:"=",showCategoriesToggle:"=?",
showTransactionIcons:"=",showDatesAllTransactions:"=",hideDetailsPreference:"=",offsetTopCorrection:"=?",showScrollbar:"="},restrict:"AE",compile:u,template:n(26)}},t.lpTransactionsList.$inject=["lpWidget","$timeout","$compile","$templateCache","lpCoreBus","lpCoreUtils"],t.lpTransactionsListDetails=function(t,e,a){function r(t,e,n){}function o(t,e){return r}return{restrict:"AE",scope:{transaction:"=",categories:"=",isLoading:"="},compile:o,template:n(27)}},t.lpTransactionsListDetails.$inject=["$templateCache","$timeout","lpCoreUtils"]}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;a=function(){"use strict";var t='<div class="col-xs-12 col-sm-12"><div alert="alert" class="alert alert-info" ng-show="transaction.errorCode"><span lp-i18n="{{transaction.errorCode}}"></span></div><ul tabset="tabset" class="transaction-details-navbar" ng-if="showCategories && transaction.showDetails && !hideDetailsPreference"><li tab="tab" select="selectDetailsTab(transaction)" active="transaction.detailTabs.details"><span tab-heading="tab-heading" lp-i18n="Details"></span><div lp-transactions-list-details="lp-transactions-list-details" transaction="transaction" categories="transactionsCategories" is-loading="transaction.isLoading"></div></li><li tab="tab" active="transaction.detailTabs.categories">  <span tab-heading="tab-heading" lp-i18n="Categories"></span>  <div lp-category-select="lp-category-select" ng-model="transactionsCategories" transaction="transaction" update="updateTransactionCategory" small-layout="categoryLayout === \'small\'" offset-top-correction="offsetTopCorrection" class="panel-body no-padding"></div></li></ul><div class="panel-body no-padding" ng-if="showCategories && transaction.showDetails && hideDetailsPreference"><div lp-category-select="lp-category-select" ng-model="transactionsCategories" transaction="transaction" update="updateTransactionCategory" small-layout="categoryLayout === \'small\'" offset-top-correction="offsetTopCorrection" class="panel-body no-padding"></div></div><div lp-transactions-list-details="lp-transactions-list-details" transaction="transaction" categories="transactionsCategories" is-loading="transaction.isLoading" ng-if="!showCategories && transaction.showDetails && !hideDetailsPreference"></div></div>';return t}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;a=function(require,t,e){"use strict";var n='<div class="lp-widget-body" ng-class="{logohidden: hideLogo, \'preview-all\': previewAll }">    <div class="category-toggle" ng-if="showCategories && showCategoriesToggle">        <button class="btn btn-default" tabindex="0" aria-pressed="{{ previewAll }}" ng-click="toggleCategoryView()" ng-class="{ \'active\': previewAll }">            <i title="Category view" class="lp-icon lp-icon-tag"></i>            <span class="sr-only">Show Categories</span>        </button>    </div>    <div class="panel-message" ng-if="transactions.noTransactionsFound()" role="alert">        <p>There are no transactions to display            <span ng-show="!transactions.isSearching()">for this account</span>            <span ng-show="transactions.isSearching()">for this search</span>.        </p>    </div>    <div lp-freshness-message="lp-freshness-message"></div>    <div class="transactions-list-wrapper"         lp-infinite-scroll="loadMoreTransactions()"         lp-infinite-scroll-disabled="!showScrollbar || transactions.loading || !accounts.selected"         lp-infinite-scroll-end="!transactions.moreAvailable">    <ul id="transactions-list" role="presentation" class="list-group list-view transactions-list" element-resize="updateItemSize(data)">        <li class="list-group-item list-view-row expandable clearfix" ng-class="{ open: transaction.showDetails }"            ng-repeat="transaction in transactions.transactions track by $index">            <div class="list-view-container cursor-pointer clearfix" ng-click="openDetails(transaction)"                tabindex="0" ng-keydown="transactionKeydown($event, transaction)"                ng-mouseleave="closePreview(transaction)" role="button"                id="transaction-{{transaction.id}}" aria-expanded="{{ !!transaction.showDetails }}"                aria-controls="transaction-details-{{transaction.id}}">                <div class="categories" ng-mouseover="categoryLayout == \'small\' || openPreview(transaction)" ng-if="showCategories">                    <div class="lp-transactions-list-category" lp-category-display="lp-category-display" lp-category-view="previewAll" lp-category-list="transactionsCategories.categories" ng-model="transaction" category-click="categoryClick($event, transaction)" category-start-swipe="categorySwipeStart($event, transaction)" category-swipe="categorySwipe($event, transaction)" category-end-swipe="categorySwipeEnd($event, transaction)"></div>                </div>                <div class="info" data-role="transactions-item-info">                    <div class="column" ng-class="[categoryLayout == \'small\' ? \'col-xs-2\' : \'col-sm-1\']" ng-mouseover="categoryLayout == \'small\' || openPreview(transaction)">                        <div class="centered">                            <div class="h4 text-center lp-transactions-date" aria-hidden="true" ng-if="transaction.newDate || showDatesAllTransactions">                                <span itemprop="dateTimeMonth">{{transaction.bookingDateTime | date:\'MMM\'}}</span>                                <br />                                <span itemprop="dateTimeDate">{{transaction.bookingDateTime | date:\'dd\'}}</span>                            </div>                        </div>                    </div>                    <div class="col-sm-1 hidden-xs column" ng-class="{ hidden: categoryLayout == \'small\' || !showTransactionIcons }">                        <div class="centered">                            <div ng-if="showTransactionIcons" class="lp-transaction-icon hidden-xs gray-image-hover">                                <img ng-if="transaction.counterPartyLogoPath" ng-src="{{transaction.counterPartyLogoPath}}" width="35" height="35" alt=""/>                            </div>                        </div>                    </div>                    <div class="main-content column left-align" ng-class="[categoryLayout == \'small\' ? \'col-xs-7\' : \'col-sm-8\']">                        <div class="centered">                            <div class="h4 transactions-list-item-name counterparty-name" itemProp="counterpartyName">                                <span class="sr-only">Name</span>{{getTransactionDescription(transaction)}}                            </div>                            <span class="h6 transactions-list-item-type text-muted hidden-xs" itemProp="transactionType">                                <span class="sr-only">Transaction type</span>{{getTransactionSubDescription(transaction)}}                            </span>                            <span class="h6 transactions-list-item-info text-muted hidden-sm hidden-md visible-xs">                                <span class="sr-only transactions-list-item-date" lp-i18n="Date"></span>{{transaction.bookingDateTime | date:\'MMM\'}} {{transaction.bookingDateTime | date:\'dd\'}} <span class="h6 text-muted transactions-list-item-amount" itemProp="transactionAmount" lp-amount="transaction.transactionAmount" lp-amount-currency="transaction.transactionCurrency"></span>                            </span>                        </div>                    </div>                    <div class="col-xs-3 col-sm-2 column right-align">                        <div class="centered">                            <span class="sr-only">Amount</span>                            <span class="h4" itemProp="transactionAmount"                                  lp-amount="transaction.transactionAmount"                                  lp-amount-currency="transaction.transactionCurrency"></span>                        </div>                    </div>                </div>            </div>            <div class="clearfix details transaction-details" id="transaction-details-{{transaction.id}}" aria-labelledby="transaction-details-data-{{transaction.id}}"></div>        </li>    </ul>    <div ng-if="showScrollbar && transactions.loading" role="alert">       <div class="text-center" lp-i18n="Loading transactions..."></div>    </div>    <div ng-if="!showScrollbar">      <div ng-show="transactions.allowMoreResults()">           <p class="lp-transactions-list-more text-center">               <a href="" class="lp-transactions-list-more-button cursor-pointer" tabindex="0" ng-click="loadMoreTransactions()" lp-i18n="Show more"></a>            </p>       </div>       <div ng-if="transactions.loading" role="alert">           <p class="panel-message text-center" lp-i18n="Loading transactions..."></p>       </div>    </div>    </div></div>';return n}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;a=function(require,t,e){"use strict";return['<div class="lp-transaction-details container-fluid">','<div progress-indicator="progress-indicator" is-loading="isLoading">','<div ng-if="transaction.details.bookingDateTime && transaction.details.address" class="row">','<div ng-if="transaction.details.bookingDateTime" class="col-xs-6 col-md-3" lp-transaction-details-datetime="transaction.details.bookingDateTime"></div>','<div ng-if="transaction.details.address" class="col-xs-6 col-md-3" lp-transaction-details-address="transaction.details.address"></div>','<div ng-if="transaction.details.location" class="col-xs-6 col-md-3" lp-transaction-details-map="transaction.details.location"></div>','<div ng-if="transaction.details.merchantType || transaction.details.category" class="col-xs-6 col-md-3">','<div ng-show="transaction.details.merchantType" lp-transaction-details-vertical detail-label="\'Merchant\'" detail-value="transaction.details.merchantType"></div>','<div ng-show="!transaction.details.merchantType" lp-transaction-details-vertical detail-label="\'Category\'" detail-value="transaction.details.category.name"></div>',"</div>","</div>",'<div ng-if="!(transaction.details.bookingDateTime && transaction.details.address)" class="row">','<div class="alert alert-warning col-xs-12">','<p><i class="lp-icon lp-icon-alert-warning"></i> <span lp-i18n="Specific details regarding this transaction are currently unavailable, please contact us for further information."></span></p>',"</div>","</div>",'<div ng-if="transaction.details.transactionId" class="row transaction-detail-reference">','<div class="col-xs-12 col-md-12" lp-transaction-details-horizontal detail-label="\'Transaction Reference\'" detail-value="transaction.details.transactionId"></div>',"</div>","</div>","</div>"].join("")}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;(function(t){a=function(require,t,e){"use strict";function a(t,e){e.setConfig({accountHoldsEndpoint:t.getPreference("accountHolds")})}e.name="component.transactions-list-authorizations";var r=n(8),o=[];a.$inject=["lpWidget","lpTransactionsAuth"],e.exports=r.createModule(e.name,o).provider(n(29)).directive(n(30)).run(a)}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))}).call(e,n(7)(t))},function(t,e,n){var a;a=function(require,t,e){"use strict";t.lpTransactionsAuth=function(){this.$get=function(t,e,n,a){function r(){var r=function(){this.from=o.from,this.sort=o.sort,this.transactions=[],this.account=null,this.errorCode=null};return r.prototype.clearTransactionsAuthList=function(){return this.transactions=[],this.moreAvailable=!0,this.from=o.from,this},r.prototype.loadTransactionsAuth=function(t){return this.clearTransactionsAuthList(),this.account=t,this.loadMoreTransactionsAuth()},r.prototype.preprocessTransactions=function(t){return t.forEach(function(e,a){var r;e.id||(t[a].id=n.uniqueId()),e.categoryId||(t[a].categoryId="1"),e.creditDebitIndicator&&"DBIT"!==e.creditDebitIndicator||(t[a].creditDebitIndicator="DBIT",e.amount*=-1),e.dateTime&&(r=e.dateTime.replace(/-/g,"/"),t[a].dateTime=Date.parse(r))}),t},r.prototype.loadMoreTransactionsAuth=function(){var n=this,r=e.defer();this.account||a.throwException(new Error("Auth list: No account specified"));var i={f:this.from,l:o.pageSize};return this.loading=!0,i.sort=this.sort,this.from=this.from+o.pageSize,t.get(o.accountHoldsEndpoint,{data:{accountIds:this.account.ids||this.account.id||""},params:i}).success(function(t){n.errorCode=null,(null===t||"null"===t)&&(t=[]),n.transactions=n.preprocessTransactions(t),r.resolve(n.transactions)}).error(function(t){n.errorCode=t.errorCode||500})["finally"](function(){n.loading=!1}),r.promise},r.prototype.noTransactionsAuthFound=function(){return!this.loading&&0===this.transactions.length&&!this.errorCode},new r}var o={accountHoldsEndpoint:"/portalserver/services/rest/mock/v1/account-holds?accountIds=$(accountIds)",pageSize:20,from:1,sort:"-bookingDateTime"};return{setConfig:function(t){return o=n(t).chain().mapValues(n.resolvePortalPlaceholders).defaults(o).value(),this},getConfig:function(t){return t&&n.isString(t)?o[t]:o},api:r}},this.$get.$inject=["$http","$q","lpCoreUtils","lpCoreError"]}}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;a=function(require,t){"use strict";var e=window.jQuery;t.lpTransactionsAuthorizationsList=function(t,a){function r(t,n,r){t.transactions=a.api(),t.listVisible=!0,t.showToggle=!0,t.$watch("accounts.selected",function(e){e&&t.transactions.loadTransactionsAuth(e)}),t.openPreview=function(t){t.preview=!0,e("#transaction-"+t.id).addClass("preview")},t.closePreview=function(t){t.preview=!1,e("#transaction-"+t.id).removeClass("preview")}}function o(t,e){return r}return t.put("$transactions-auth/list.html",n(31)),{scope:{accounts:"=lpAccounts",transactionsCategories:"=lpTransactionsCategories",categoryLayout:"=",showCategories:"="},restrict:"AE",compile:o,template:t.get("$transactions-auth/list.html")}},t.lpTransactionsAuthorizationsList.$inject=["$templateCache","lpTransactionsAuth"]}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;a=function(require,t,e){"use strict";var n='<div ng-if="transactions.transactions.length > 0" class="lp-transactions-list-authorizations">    <h5 ng-click="(listVisible = !listVisible)" class="lp-auth-header text-muted">{{ "Authorizations and Funds on Hold" | translate}}&nbsp;        <i ng-show="listVisible" class="lp-icon lp-icon-caret-up"></i>        <i ng-show="!listVisible" class="lp-icon lp-icon-caret-down"></i>    </h5>    <div ng-show="!listVisible" class="text-warning text-center">{{ "List of on-hold transactions is collapsed. Click the header above to show it..." }}</div><br ng-show="!listVisible" />    <ul ng-show="listVisible" id="transactions-list-auth" class="list-group list-view transactions-list">        <li class="list-group-item list-view-row clearfix"            ng-repeat="transaction in transactions.transactions track by $index">            <div id="transaction-{{transaction.id}}" class="list-view-container clearfix">               <div class="categories" ng-mouseover="openPreview(transaction)" ng-mouseout="closePreview(transaction)" ng-if="showCategories">                   <div lp-category-display="lp-category-display" lp-category-view="previewAll" lp-category-list="transactionsCategories.categories" ng-model="transaction"></div>               </div>               <div class="info">                   <div class="col-md-8 col-sm-8 col-xs-8 column">                       <div class="centered">                           <div class="h4">{{ transaction.beneficiary }}</div>                           <div class="h6 text-muted">{{ transaction.dateTime | date }}</div>                       </div>                   </div>                   <div class="col-md-4 col-sm-4 col-xs-4 column text-center">                       <div class="centered">                           <span class="sr-only">Amount</span>                           <span class="h4" itemProp="transactionAmount"                               lp-amount="transaction.amount"                               lp-amount-currency="transaction.currencyCode"></span>                       </div>                   </div>               </div>            </div>        </li>    </ul>    <h3 class="lp-auth-footer"></h3></div>';return n}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;(function(t){a=function(require,t,e){"use strict";e.name="component.transactions-search";var a=n(8),r=n(22),o=n(10),i=n(33),s=[r.name,o.name,i.name];e.exports=a.createModule(e.name,s).directive(n(34))}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))}).call(e,n(7)(t))},function(t,e){t.exports=i},function(t,e,n){var a;a=function(require,t){"use strict";var e=window.jQuery;t.lpTransactionsSearch=function(t,e){function a(t,n,a){var r,o={date:function(t){var n={fromDate:t.from.getTime(),toDate:t.to.getTime()};return e.publish("launchpad-retail.transactionsDateSearch",n),n},amount:function(t){return{fromAmount:t.from,toAmount:t.to}},contact:function(t){return{contact:t.contact}},category:function(t){return e.publish("launchpad-retail.transactionsCategorySearch",r.category),{category:t.category}},query:function(t){return{query:t.query}}},i="lp-icon",s=i+" lp-icon-new_top",c=i+" lp-icon-old_top",l=i+" lp-icon-big_to_small",d=i+" lp-icon-small_to_big";t.sort={options:[{label:"Newest on Top",icon:s,sort:"-bookingDateTime",aria:"Decreasing"},{label:"Oldest on Top",icon:c,sort:"bookingDateTime",aria:"Increasing"},{label:"Largest Amount on Top",icon:l,sort:"-transactionAmount",aria:"Decreasing"},{label:"Smallest Amount on Top",icon:d,sort:"transactionAmount",aria:"Increasing"}]},t.sort.selected=t.sort.options[0],t.$on("$destroy",function(){}),t.doSearch=function(){var e;if(r){var n=r.search.query?"query":r.type;e=o[n](r.search)}else e={};t.onPerformSearch({filters:e})},t.selectSuggestion=function(e){r=e,t.doSearch()},t.clearSuggestion=function(){t.onClearSearch()},t.updateSuggestion=function(){t.onUpdateSearch()},t.changeSort=function(){var e=t.sort.selected;t.onChangeSort({value:e})}}function r(t,e){return a}return t.put("$transactions/sortDropdownOption.html",n(35)),{scope:{accounts:"=",contacts:"=",transactionsCategories:"=",onPerformSearch:"&",onClearSearch:"&",onUpdateSearch:"&",onChangeSort:"&"},restrict:"AE",require:"?^ngModel",compile:r,template:n(36)}},t.lpTransactionsSearch.$inject=["$templateCache","lpCoreBus"],t.lpSmartsuggest=function(t,n,a,r){return{restrict:"A",scope:{smartsuggestSelect:"=",smartsuggestClear:"=",smartsuggestUpdate:"=",currency:"=",contacts:"=",categories:"="},link:function(o,i,s){o.tagsInput=e(i).closest("form").find(".lp-tags").length?!0:!1,o.tagsInput===!0&&t.publish("lpTagsInputField",i[0]);var c=new a;c.addSuggester({data:[],suggest:a.builtIn.getContactSuggestions}),c.addSuggester({type:a.types.AMOUNT,suggest:a.builtIn.getAmountSuggestions}),c.addSuggester({type:a.types.DATE,suggest:a.builtIn.getDateSuggestions}),c.addSuggester({type:a.types.GENERAL,suggest:a.builtIn.getGeneralSuggestions});var l=new r({locale:"en-US",currency:o.currency});o.$watch("currency",function(t){l.currency=t}),o.$watch("contacts",function(t){n.isArray(t)&&c.addSuggester({data:t,suggest:a.builtIn.getContactSuggestions})}),o.$watch("categories",function(t){l.categories=t,c.addSuggester({data:o.categories,type:a.types.CATEGORY,suggest:a.builtIn.getCategorySuggestions})}),e(i).autosuggest({lookup:function(t){var e=c.getSuggestions(t);return e=e.map(function(t){var e,n=l.format(t);return e=t.contact?t.contact.name:2===n.length?n[0]+" to "+n[1]:n[0],{data:t,value:e}})},onSelect:function(e){o.smartsuggestSelect&&(t.publish("lpSearchSelectValue",{type:e.data.type,text:e.value,icon:l.getSuggestionIcon(e.data,!0)}),o.$apply(function(){o.smartsuggestSelect.call({},e.data)}))},onClear:function(){o.smartsuggestClear&&!o.tagsInput&&o.$apply(function(){o.smartsuggestClear.call({})})},onChangeModel:function(){o.smartsuggestUpdate&&o.tagsInput&&o.$apply(function(){o.smartsuggestUpdate.call({},!0)})},formatResult:function(t){return l.getSuggestionHtml(t.data)},autoSelectFirst:!0})}}},t.lpSmartsuggest.$inject=["lpCoreBus","lpCoreUtils","SmartSuggestEngine","SmartSuggestFormatter"]}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;a=function(require,t,e){"use strict";var n='<span>    <i class="{{option.icon}} option-icon"></i>    <span class="sr-only">Sort by</span>    <span class="option-label">{{option.label}}</span>    <span class="sr-only">{{option.aria}}</span>    <i class="lp-icon lp-icon-checkmark_fat"></i></span>';return n}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;a=function(require,t,e){"use strict";e.exports=['<form class="panel-heading" ng-submit="doSearch" ng-class="{ \'has-category-toggle\': showCategories }">','    <div class="lp-search-wrapper">','        <div class="lp-search-left">','            <div lp-tags-filters="lp-tags-filters"></div>',"        </div>",'        <div class="lp-search-tags">','            <div lp-tags="lp-tags" empty="lp-tags-left" class="lp-tags"></div>',"        </div>",'        <div class="lp-search-middle">','            <input lp-smartsuggest="lp-smartsuggest"','                   smartsuggest-select="selectSuggestion"','                   smartsuggest-clear="clearSuggestion"','                   smartsuggest-update="updateSuggestion"','                   currency="accounts.selected.currency"','                   contacts="contacts.contacts"','                   categories="transactionsCategories.categories"','                   ng-model="searchTerm"','                   class="form-control" placeholder="Search for dates, amounts, contacts..." />',"        </div>",'        <div class="lp-search-right">','            <div dropdown-select="dropdown-select" ng-options="option as option for option in sort.options" ng-model="sort.selected" ng-change="changeSort()" class="input-group-btn sort-select pull-right" option-template-url="$transactions/sortDropdownOption.html"','                 aria-controls="transactions-list">',"            </div>","        </div>","    </div>","</form>"].join("")}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;(function(t){a=function(require,t,e){"use strict";e.name="component.transactions-spendings";var a=n(8),r=[];e.exports=a.createModule(e.name,r).factory(n(38)).directive(n(39))}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))}).call(e,n(7)(t))},function(t,e,n){var a;a=function(require,t,e){"use strict";t.CategorySpendingsResource=function(t,e,n){var a=n.resolvePortalPlaceholders(e.getPreference("categorySpendingDataSrc"));return t(a,null,{get:{method:"GET"}})},t.CategorySpendingsResource.$inject=["$resource","lpWidget","lpCoreUtils"],t.CategoriesResource=function(t,e,n){var a=n.resolvePortalPlaceholders(e.getPreference("categoriesDataSrc"));return t(a,null,{get:{method:"GET",isArray:!0}})},t.CategoriesResource.$inject=["$resource","lpWidget","lpCoreUtils"]}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;a=function(require,t,e){"use strict";function a(t,e){t.selectAll("tspan").remove();var n=t.attr("width"),a=1,r=t.append("tspan"),o=e.split(/\s+/),i=20;if(1===o.length&&e.length>15)return r.text(e.slice(0,12)+"..."),t;for(var s=0;s<o.length;s++){if(r.node().getComputedTextLength()>n){if(a++,a>=3){r.text(r.text()+"...");break}r=t.append("tspan").attr({x:0,dy:i})}r.text(r.text()+" "+o[s])}return t}function r(t){return(100*t).toFixed(2)+"%"}var o=n(40),i=n(8).utils;t.lpCategoriesSpendings=function(t,e,n,a,r,o){function s(t){var e=t.spendings.categoriesSpendings,n=t.categories;return e.sort(function(t,e){return t.amount-e.amount}).forEach(function(e){var a=i.find(n,function(t){return t.id===e.categoryId});e.name=a.name,e.color=a.color,e.currency=t.spendings.currency}),e}function c(n,c,l){n.options=i.assign({},n.options,n.lpCategoriesSpendings),n.accountId=null,n.fromDate=null,n.toDate=null,n.viewLoading=!0,n.missingData=!1,n.showChart=!1,n.$watchCollection("[viewLoading,missingData]",function(t,e){var a=t[0],r=t[1];n.showChart=!a&&!r}),n.selectItem=function(t){e(function(){n.selectedItem=t,a.publish("launchpad-retail.donutCategoryChartSelection",t)})},n.resize=function(t,a){e(function(){n.width=t})},n.updateData=function(){var e={accountIds:n.accountId||null,start:n.fromDate,end:n.toDate};t.all({spendings:r.get(e).$promise,categories:o.get().$promise}).then(function(t){return 0===t.spendings.categoriesSpendings.length?(n.missingData=!0,void(n.viewLoading=!1)):(n.viewLoading=!1,n.missingData=!1,void(n.options=i.assign({},n.options,{data:s(t)})))},function(t){n.viewLoading=!1,n.missingData=!0})};var d,u=function(t){i.forEach(t,function(t){t.ids&&(d=t.ids)}),n.accountId=d};a.subscribe("launchpad-retail.accountsLoaded",u),a.subscribe("lpAccounts.loaded",u);var p=n.$watch("lpAccounts.selected",function(t){t&&(a.subscribe("launchpad-retail.accountSelected",function(t){n.accountId=t.allAccounts?d:t.accountId,n.updateData()}),n.accountId=t.id,n.updateData(),p())});a.subscribe("launchpad-retail.transactionsDateSearch",function(t){n.fromDate=t.fromDate,n.toDate=t.toDate,n.updateData()}),a.subscribe("launchpad-retail.transactionsCategorySearch",function(t){if(1===t.length){var e=i.find(n.options.data,function(e){return e.categoryId===t[0].id});n.selectItem(e)}}),n.$on("tabSelected",function(t,e){"donut"===e&&(n.options=i.assign({},n.options))})}function l(t,e){return c}function d(){return'<div class="ng-cloak" ng-class="responsiveClass">	<div class="lp-widget-content widget widget-default" role="application">		<div class="lp-widget-body">			<div ng-if="missingData" class="panel-message" >				<div class="panel-body text-center">You have no data available.</div>			</div>			<div ng-if="viewLoading" class="panel-message loading-panel" role="alert">				<i class="lp-icon lp-icon-spinner2 lp-spin loading-icon"></i>				<span class="sr-only">Busy</span>			</div>			<div lp-donut-chart options="options" class="category-spendings-chart" on-select="selectItem" item="selectedItem" on-resize="resize" ng-show="showChart">               <g category-details ng-model="selectedItem" width="width"></g>           </div>		</div>	</div></div>'}return{scope:{lpCategoriesSpendings:"=?",lpAccounts:"=",options:"=?"},restrict:"AE",compile:l,template:d}},t.lpCategoriesSpendings.$inject=["$q","$timeout","$templateCache","lpCoreBus","CategorySpendingsResource","CategoriesResource"],t.categoryDetails=function(t){function e(e,n){function i(t,e){if(t){var n=t/2,a=.55*n;l.attr("transform","translate("+n+","+n+")");var r=t/20;l.select(".name").attr({y:-.34*a,width:a}).style("font-size",r+"px"),l.select(".amount").attr({y:.15*a}).style("font-size",1.4*r+"px"),l.select(".share").attr({y:.5*a}).style("font-size",r+"px"),l.select(".delta").attr({y:.5*a}).style("font-size",r+"px")}}function s(e){if(e){a(l.select(".name"),e.name);var n=e.historicalChangeFactor||1,o=0>n?"":n>0?"":"";l.select(".amount").text(t.formatCurrency(e.amount,e.currency)),l.select(".share").text(r(e.totalFraction)+""),l.select(".delta").text(""+o+r(Math.abs(n)))}}var c=document.createElementNS("http://www.w3.org/2000/svg","g");n.replaceWith(c);var l=o.select(c);l.append("text").attr("class","name"),l.append("text").attr("class","amount"),l.append("text").attr("class","share"),l.append("text").attr("class","delta"),e.$watch("width",i),e.$watch("data",s)}return{restrict:"EA",template:"<g></g>",link:e,scope:{data:"=ngModel",width:"="}}},t.categoryDetails.$inject=["lpCoreI18n"]}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports=s},function(t,e,n){var a;(function(t){a=function(require,t,e){"use strict";e.name="component.transactions-charts";var a=n(8),r=n(22),o=n(11),i=[r.name,o.name];e.exports=a.createModule(e.name,i).factory(n(42)).directive(n(43))}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))}).call(e,n(7)(t))},function(t,e,n){var a;a=function(require,t,e){"use strict";var a=n(8).utils,r=function(t,e){return t&&t.length?t[0].hasOwnProperty(e)?a.chain(t).map(function(t){return t[e]}).reduce(function(t,e){return t.concat(e)},[]).value():t:[]};t.lpAccountsChartData=function(t,e){var n={accountsChartEndpoint:"",allAccountsChartEndpoint:"",accountId:null},a=function(e){this.config=t.extend({},n,e),this.chartData=null,this.error=!1};return a.prototype.setId=function(t,e){this.config.allAccounts=!!e,this.config.accountId=t},a.prototype.load=function(t){var n,a=this,o={};return t||(t={}),this.config.allAccounts?(n=this.config.allAccountsChartEndpoint,t.accountIds=this.config.accountId):(n=this.config.accountsChartEndpoint,o.data={accountId:this.config.accountId}),o.params=t,e.get(n,o).then(function(t){return a.chartData=r(t.data,"balances"),a.chartData},function(t){t.errors&&(a.error=t.errors[0].code)})},{getInstance:function(t){return new a(t)}}},t.lpAccountsChartData.$inject=["lpCoreUtils","$http"],t.lpTransactionsChartData=function(t,e){var n={transactionsChartEndpoint:"",allTransactionsChartEndpoint:"",accountId:null},a=function(e){this.config=t.extend({},n,e),this.chartData=null,this.error=!1};return a.prototype.setId=function(t,e){this.config.allAccounts=!!e,this.config.accountId=t},a.prototype.load=function(t){var n,a=this,o={};return t||(t={}),this.config.allAccounts?(n=this.config.allTransactionsChartEndpoint,t.accountIds=this.config.accountId):(n=this.config.transactionsChartEndpoint,o.data={accountId:this.config.accountId}),o.params=t,e.get(n,o).then(function(t){return a.chartData=r(t.data,"turnovers"),a.chartData},function(t){t.errors&&(a.error=t.errors[0].code)})},{getInstance:function(t){return new a(t)}}},t.lpTransactionsChartData.$inject=["lpCoreUtils","$http"]}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;a=function(require,t){"use strict";function e(t){var e=function(e,o,i,s,c,l,d,u){function p(t,e,n){var r=function(t,e){var n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],a=new Date(t),r=new Date(e);return a.setDate(a.getDate()+1),a.getDate()+" "+n[a.getMonth()]+" - "+r.getDate()+" "+n[r.getMonth()]},p=function(){var e=new Date(t.endDate);switch(t.scale){case"WEEK":e.setDate(e.getDate()-7);break;case"MONTH":e.setMonth(e.getMonth()-1)}return e},g=function(e){t.endDate=new Date(e),t.timePeriod=r(p().getTime(),t.endDate.getTime())},h=function(t){t&&t.length&&g(t[0].bookingDateTime),u.unsubscribe("widget-transactions:transactions:ready",h)};u.subscribe("widget-transactions:transactions:ready",h);var f=function(e,n){var o={start:p().getTime(),end:t.endDate.getTime()};t.timePeriod=r(o.start,o.end);var c=function(t){var e=new Date(t);return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e},l=function(e){return"DEPOSIT"===t.series?e.deposit:e.hasOwnProperty("withdrawal")?e.withdrawal:e.hasOwnProperty("withdraw")?e.withdraw:0},d=function(e){return i.formatCurrency(e,t.lpAccounts.selected.currency)};t.loading=!0,t.emptyTurnovers=!1,t.emptyBalances=!1,s.all([t.transactionsChartModel.load(o),t.accountsChartModel.load(o)]).then(function(t){return{turnovers:t[0],balances:t[1]}}).then(function(r){t.loading=!1,r.turnovers.length?t.transactionsChartOptions={data:r.turnovers,height:200,padding:[30,30,30,90],parsers:{x:function(t){return c(t.date)},y:function(t){return l(t)}},formatters:{y:function(t){return d(t)},x:function(t){return a.time.format("%e")(t)},tooltip:function(t){return a.time.format("%B %e")(c(t.date))+"<br>"+d(l(t))}}}:t.emptyTurnovers=!0,n||(r.balances.length?t.accountBalanceChartOptions={data:r.balances,height:200,padding:[30,30,30,90],parsers:{x:function(t){return c(t.date)},y:function(t){return t.amount}},formatters:{y:function(t){return d(t)},x:function(t){return a.time.format("%e")(t)},tooltip:function(t){return a.time.format("%B %e")(c(t.date))+"<br>"+d(t.amount)}},animation:{direction:"prev"===e?"left":"right"}}:t.emptyBalances=!0)})},v=function(e,n){t.accountsChartModel.setId(e,n),t.transactionsChartModel.setId(e,n),t.lpAccounts.selected&&!t.lpAccounts.selected.cardId&&f("prev")},m=function(){t.now=new Date,t.scale="WEEK",
t.series="WITHDRAWAL",g(t.now),t.accountsChartModel=c.getInstance({accountsChartEndpoint:o.resolvePortalPlaceholders(d.getPreference("accountBalanceChartDataSrc")),allAccountsChartEndpoint:o.resolvePortalPlaceholders(d.getPreference("allAccountsBalanceChartDataSrc"))}),t.transactionsChartModel=l.getInstance({transactionsChartEndpoint:o.resolvePortalPlaceholders(d.getPreference("transactionsChartDataSrc")),allTransactionsChartEndpoint:o.resolvePortalPlaceholders(d.getPreference("allTransactionsChartDataSrc"))});var e;u.subscribe("lpAccounts.loaded",function(t){e=o.result(o.find(t,function(t){return!!t.ids}),"ids")});var n=t.$watch("lpAccounts.selected",function(t){t&&(u.subscribe("launchpad-retail.accountSelected",function(t){var n=t.allAccounts?e:t.accountId;v(n,t.allAccounts)}),v(t.id),n())})};t.nextPeriod=function(){switch(t.scale){case"WEEK":t.endDate.setDate(t.endDate.getDate()+7);break;case"MONTH":t.endDate.setMonth(t.endDate.getMonth()+1)}f("next")},t.prevPeriod=function(){switch(t.scale){case"WEEK":t.endDate.setDate(t.endDate.getDate()-7);break;case"MONTH":t.endDate.setMonth(t.endDate.getMonth()-1)}f("prev")},t.setScale=function(e){t.scale=e,f("prev")},t.setSeries=function(e){t.series=e,f("prev",!0)},t.showNextPeriod=function(){return t.now.getTime()>t.endDate.getTime()},t.$on("tabSelected",function(t,e){("chart"===e||"combined"===e)&&f("prev")}),m()}function g(t,e){return p}return t===r.vertical?e.put("$transactions/chartTemplate",n(44)):e.put("$transactions/chartTemplate-horizontal",n(45)),{scope:{lpAccounts:"="},restrict:"AE",compile:g,template:e.get("$transactions/chartTemplate"+t)}};return e.$inject=["$templateCache","lpCoreUtils","lpCoreI18n","$q","lpAccountsChartData","lpTransactionsChartData","lpWidget","lpCoreBus"],e}var a=n(40),r={vertical:"",horizontal:"-horizontal"};t.lpTransactionsCharts=e(r.vertical),t.lpTransactionsChartsHorizontal=e(r.horizontal)}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;a=function(require,t,e){"use strict";var n='<div class="lp-widget-body">    <div>        <div class="panel-body lp-chart-balances">            <div class="h4">Balance - <span ng-bind="timePeriod"></span></div>            <div progress-indicator="loading" class="chart-progress-indicator"></div>            <div ng-show="!loading && !emptyBalances" lp-line-chart="lp-line-chart" lp-chart-options="accountBalanceChartOptions" class="accountsChart lp-chart"></div>            <div ng-show="emptyBalances" class="chart-empty-data" lp-i18n="There is no data available for this period of time"></div>        </div>        <div class="panel-body">            <div class="controls clearfix">                <div class="col-xs-2">                    <button class="btn btn-primary btn-block arrow" ng-click="prevPeriod()">&lt;</button>                </div>                <div class="col-xs-8 text-center">                    <button class="btn btn-default" ng-class="{\'btn-primary\':scale==\'WEEK\'}" ng-click="setScale(\'WEEK\')">7D</button>                    <button class="btn btn-default" ng-class="{\'btn-primary\':scale==\'MONTH\'}" ng-click="setScale(\'MONTH\')">1M</button>                </div>                <div class="col-xs-2">                    <button class="btn btn-primary btn-block arrow" ng-click="nextPeriod()" ng-show="showNextPeriod()">&gt;</button>                </div>            </div>        </div>        <div class="panel-body lp-chart-turnovers">            <div class="h4">Transactions - <span ng-bind="timePeriod"></span></div>            <div progress-indicator="loading" class="chart-progress-indicator"></div>            <div ng-show="!loading && !emptyTurnovers" lp-bar-chart="lp-bar-chart" lp-chart-options="transactionsChartOptions" class="transactionsChart lp-chart"></div>            <div ng-show="emptyTurnovers" class="chart-empty-data" lp-i18n="There is no data available for this period of time"></div>        </div>        <div class="panel-body">            <div class="controls clearfix text-center">                <button class="btn btn-default" ng-class="{\'btn-primary\':series==\'WITHDRAWAL\'}" ng-click="setSeries(\'WITHDRAWAL\')">Spending</button>                <button class="btn btn-default" ng-class="{\'btn-primary\':series==\'DEPOSIT\'}" ng-click="setSeries(\'DEPOSIT\')">Income</button>            </div>        </div>    </div></div>';return n}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;a=function(require,t,e){"use strict";var n='<div class="lp-widget-body clearfix">    <div>        <div class="col-xs-12 col-sm-6 chart-horizontal">            <div class="panel-body lp-chart-balances">                <div class="h4">Balance<br /><span ng-bind="timePeriod"></span></div>                <div progress-indicator="loading" class="chart-progress-indicator"></div>                <div ng-show="!loading && !emptyBalances" lp-line-chart="lp-line-chart" lp-chart-options="accountBalanceChartOptions" class="accountsChart lp-chart"></div>                <div ng-show="emptyBalances" class="chart-empty-data" lp-i18n="There is no data available for this period of time"></div>            </div>            <div class="panel-body">                <div class="controls clearfix">                    <div class="col-xs-2">                        <button class="btn btn-primary btn-block arrow" ng-click="prevPeriod()">&lt;</button>                    </div>                    <div class="col-xs-8 text-center">                        <button class="btn btn-default" ng-class="{\'btn-primary\':scale==\'WEEK\'}" ng-click="setScale(\'WEEK\')">7D</button>                        <button class="btn btn-default" ng-class="{\'btn-primary\':scale==\'MONTH\'}" ng-click="setScale(\'MONTH\')">1M</button>                    </div>                    <div class="col-xs-2">                        <button class="btn btn-primary btn-block arrow" ng-click="nextPeriod()" ng-show="showNextPeriod()">&gt;</button>                    </div>                </div>            </div>        </div>        <div class="col-xs-12 col-sm-6 chart-horizontal">            <div class="panel-body lp-chart-turnovers">                <div class="h4">Transactions<br /><span ng-bind="timePeriod"></span></div>                <div progress-indicator="loading" class="chart-progress-indicator"></div>                <div ng-show="!loading && !emptyTurnovers" lp-bar-chart="lp-bar-chart" lp-chart-options="transactionsChartOptions" class="transactionsChart lp-chart"></div>                <div ng-show="emptyTurnovers" class="chart-empty-data" lp-i18n="There is no data available for this period of time"></div>            </div>            <div class="panel-body">                <div class="controls clearfix text-center">                    <button class="btn btn-default" ng-class="{\'btn-primary\':series==\'WITHDRAWAL\'}" ng-click="setSeries(\'WITHDRAWAL\')">Spending</button>                    <button class="btn btn-default" ng-class="{\'btn-primary\':series==\'DEPOSIT\'}" ng-click="setSeries(\'DEPOSIT\')">Income</button>                </div>            </div>        </div>    </div></div>';return n}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;a=function(require,t,e){"use strict";t.lpTransactions=function(){this.$get=function(t,e,n,a,r){function o(){var o=function(){this.from=s.from,this.sort=s.sort,this.transactions=[],this.moreAvailable=!0,this.account=null,this.errorCode=null};return o.prototype.availableFilters={QUERY:"query",FROM_DATE:"fromDate",TO_DATE:"toDate",FROM_AMOUNT:"fromAmount",TO_AMOUNT:"toAmount",CONTACT:"contact",CATEGORY:"category",DEBITCREDIT:"bk"},o.prototype.clearTransactionsList=function(){return this.transactions=[],this.moreAvailable=!0,this.from=s.from,this.errorCode=null,this},o.prototype.setFilters=function(t){return r?(r.setFilter(t),this.filters=r.getFilters()):this.filters=t,this},o.prototype.clearFilters=function(){return this.filters=r?r.clearFilters():{},this},o.prototype.updateFilters=function(){return this.filters=r?r.getFilters():{},this},o.prototype.preprocessTransactions=function(t){var e=this.transactions[this.transactions.length-1]||null,a=n.date;return t&&(t=n.map(t,function(n,r){var o=t[r-1]||e||null,i=o?a(o.bookingDateTime):a().add(1,"days"),s=a(n.bookingDateTime);return n.newDate=i.date()!==s.date()||i.month()!==s.month()||i.year()!==s.year(),n.details||(n.details=null),n.detailTabs={details:!0,categories:!1},"DBIT"===n.creditDebitIndicator&&(n.transactionAmount*=-1),n})),t},o.prototype.loadMoreTransactions=function(){var r,o=this,c=this.availableFilters,l=e.defer();this.account||a.throwException(new Error("No account specified")),this.account.allAccounts&&(this.account.id="");var d={f:this.from,l:s.pageSize+1};return this.loading=!0,this.filters&&(r=parseInt(this.filters[c.DEBITCREDIT],10),this.filters.query&&(d.a="search",d.q=this.filters[c.QUERY]),this.filters[c.FROM_DATE]&&this.filters[c.TO_DATE]&&(d.df=this.filters[c.FROM_DATE],d.dt=this.filters[c.TO_DATE]),n.isUndefined(this.filters[c.FROM_AMOUNT])||n.isUndefined(this.filters[c.TO_AMOUNT])||(d.af=this.filters[c.FROM_AMOUNT],d.at=this.filters[c.TO_AMOUNT]),this.filters[c.CONTACT]&&(d.ca=this.filters[c.CONTACT]),this.filters[c.CATEGORY]&&(d.categoryIds=this.filters[c.CATEGORY]),this.filters[c.DEBITCREDIT]&&(d.crdb=1===r?"DBIT":"CRDT")),d.sort=this.sort,this.from=this.from+s.pageSize,t.get(s.transactionsEndpoint,{data:{accountId:this.account.id||this.account.ids||""},params:d}).success(function(t){o.errorCode=null,(null===t||"null"===t)&&(t=[]);var e=o.preprocessTransactions(n.compact(t));e&&e.length<=s.pageSize?o.moreAvailable=!1:e&&e.pop(),o.transactions=o.transactions.concat(e),o.transactions=i(o.account,o.transactions),l.resolve(o.transactions)}).error(function(t){o.errorCode=t.errorCode||500})["finally"](function(){o.loading=!1}),l.promise},o.prototype.loadTransactions=function(t){return this.clearTransactionsList(),this.account=t,this.loadMoreTransactions()},o.prototype.preprocessTransactionDetails=function(t,e){var a=[],r=[],o=["location"],i=["address","merchantType","bookingDateTime"],s=["transactionId"];if(t){if(n.isObject(t.location)){var c=t.location.latitude+","+t.location.longitude,l=["size=160x90","center="+c,"zoom=12","format=jpg","sensor="+!1,"markers="+encodeURIComponent("size:med|color:red|")+c];t.location.mapUrl="http://maps.googleapis.com/maps/api/staticmap?"+l.join("&")}t.bookingDateTime=e.bookingDateTime;for(var d in t)if(t.hasOwnProperty(d)&&o.indexOf(d)<0){var u={name:d,value:t[d],longValue:s.indexOf(d)>-1};i.indexOf(d)>-1?a.push(u):r.push(u)}t.special=a,t.custom=r}return t},o.prototype.loadTransactionDetails=function(a){var r=this;return!a.details||n.isEmpty(a.details)?(a.loading=!0,t.get(s.transactionDetailsEndpoint,{params:{transactionId:a.id}}).then(function(t){return a.loading=!1,a.details={},n.assign(a.details,r.preprocessTransactionDetails(t.data,a))},function(t){a.loading=!1,a.errorCode=t.data.errorCode||500})):e.when(a.details)},o.prototype.updateTransactionCategory=function(e,n){return t.put(s.transactionsEndpoint+"/"+e.id,{accountId:this.account.id,categoryId:n}).success(function(t){e.categoryId=n}).error(function(t){e.errorCode=t.errorCode||500})},o.prototype.updateSimilarTransactionCategory=function(e,n){return t.put(s.transactionsEndpoint+"/"+e.id,{accountId:this.account.id,categoryId:n,condition:"SIMILAR"}).success(function(t){e.categoryId=n}).error(function(t){e.errorCode=t.errorCode||500})},o.prototype.allowMoreResults=function(){var t=!this.loading&&this.moreAvailable&&!this.errorCode;return t},o.prototype.noTransactionsFound=function(){var t=!this.loading&&0===this.transactions.length&&!this.errorCode;return t},o.prototype.isSearching=function(){if(this.filters)for(var t in this.filters)if(this.filters.hasOwnProperty(t))return!0;return!1},new o}var i=function(t,e){var a=t.accountsNames;return a&&n.isObject(a)&&n.forEach(e,function(t){t.accountName=a[t.accountId]||""}),e},s={transactionsEndpoint:"/mock/v1/current-accounts/$(accountId)/transactions",transactionDetailsEndpoint:"/mock/v1/current-accounts/transaction/$(transactionId)/details",pageSize:20,from:0,sort:"-bookingDateTime"};return{setConfig:function(t){return s=n(t).chain().mapValues(n.resolvePortalPlaceholders).defaults(s).value(),this},getConfig:function(t){return t&&n.isString(t)?s[t]:s},api:o}},this.$get.$inject=["$http","$q","lpCoreUtils","lpCoreError","lpTagsUtils"]}}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,n){var a;a=function(require,t,e){"use strict";t.lpBalanceUpdate=function(){return{restrict:"A",require:"ngModel",link:function(t,e,n,a){e.addClass("lp-amount"),t.$watch(function(){return a.$modelValue},function(t,n){if(t.id===n.id){var a={increase:"lp-increase-amount",decrease:"lp-decrease-amount"},r=2e3;1===t.delta?(e.addClass(a.increase),setTimeout(function(){e.removeClass(a.increase)},r)):-1===t.delta&&(e.addClass(a.decrease),setTimeout(function(){e.removeClass(a.decrease)},r)),t.delta=0}})}}}}.call(e,n,e,t),!(void 0!==a&&(t.exports=a))}])});